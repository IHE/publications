<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>2:3.90 Find Matching Care Services [ITI-90] - Mobile Care Services Discovery (mCSD) v4.0.0-comment</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/ihe.css" rel="stylesheet"/>
<link href="assets/css/nonum.css" rel="stylesheet"/>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async> </script> 


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"3"}
    h3,h4,h5,h6{--heading-prefix:"3"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
  <a id="ihe-logo" no-external="true" href="http://profiles.ihe.net">
    <img height="71" alt="Visit the IHE website" src="assets/images/ihe-international.png"/>
  </a>
</div>
<div id="family-nav">
  <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="30" alt="Visit the FHIR website" src="assets/images/fhir-logo.png"/> </a>
</div>
<!--
<div id="hl7-search">
  <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
</div>
-->
<div id="project-nav">
  
  
    <a id="project-logo" no-external="true" href="http://profiles.ihe.net/ITI/index.html"><img height="70" alt="Visit the ITI website" src="assets/images/ITI.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Mobile Care Services Discovery (mCSD)</span>
            <br/>
            <span style="display:inline-block;">4.0.0-comment - ballot



  <img alt="International flag" src="assets/images/001.svg" height="16" title="International"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">mCSD Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 1
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="volume-1.html">Introduction</a>
      </li>
      <li>
        <a href="volume-1.html#1461-mcsd-actors-transactions-and-content-modules">Actors, Transactions, and Content Modules</a>
      </li>
      <li>
        <a href="volume-1.html#1462-mcsd-actor-options">Actor Options</a>
      </li>
      <li>
        <a href="volume-1.html#1463-mcsd-required-actor-groupings">Required Groupings</a>
      </li>
      <li>
        <a href="volume-1.html#1464-mcsd-overview">Overview</a>
      </li>
      <li>
        <a href="volume-1.html#1465-mcsd-security-considerations">Security Considerations</a>
      </li>
      <li>
        <a href="volume-1.html#1466-mcsd-cross-profile-considerations">Cross-Profile Considerations</a>
      </li>
      <li>
        <a href="volume-1.html#1467-mcsd-deployment-considerations">Deployment Considerations</a>
      </li>
      <li>
        <a href="volume-1.html#1468-mcsd-endpoint-usage-considerations">Endpoint Usage Considerations</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="ITI-90.html">Find Matching Care Services [ITI-90]</a>
      </li>
      <li>
        <a href="ITI-91.html">Request Care Services Updates [ITI-91]</a>
      </li>
      <li>
        <a href="ITI-130.html">Care Services Feed [ITI-130]</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Other
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="other.html">Changes to Other IHE Specifications</a>
      </li>
      <li>
        <a href="download.html">Download and Analysis</a>
      </li>
      <li>
        <a href="testplan.html">Test Plan</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>2:3.90 Find Matching Care Services [ITI-90]</b></li>

          <span style="float:right;">

            <a href="volume-1.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="ITI-91.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the IHE ITI Mobile Care Services Discovery (v4.0.0-comment: Publication Ballot 8) based on <a no-external="true" href="http://hl7.org/fhir/R4">FHIR (HL7® FHIR® Standard) R4</a>. This is the current published version.  For a full list of available versions, see the <a no-external="true" href="https://profiles.ihe.net/ITI/mCSD/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>2:3.90 Find Matching Care Services [ITI-90]</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#23901-scope" id="markdown-toc-23901-scope">2:3.90.1 Scope</a></li>
  <li><a href="#23902-actor-roles" id="markdown-toc-23902-actor-roles">2:3.90.2 Actor Roles</a></li>
  <li><a href="#23903-referenced-standards" id="markdown-toc-23903-referenced-standards">2:3.90.3 Referenced Standards</a></li>
  <li><a href="#23904-messages" id="markdown-toc-23904-messages">2:3.90.4 Messages</a></li>
  <li><a href="#23905-security-considerations" id="markdown-toc-23905-security-considerations">2:3.90.5 Security Considerations</a></li>
</ul>

</div>

<h3 id="23901-scope">2:3.90.1 Scope</h3>

<p>The Find Matching Care Services transaction returns a list of matching care services resources based on the query sent. A Query Client initiates a Find Matching Care Services transaction against a Directory.</p>

<h3 id="23902-actor-roles">2:3.90.2 Actor Roles</h3>

<table class="grid">
  <thead>
    <tr>
      <th><strong>Actor</strong></th>
      <th><strong>Role</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Query Client</td>
      <td>Requests a list of resources from the Directory based on query parameters</td>
    </tr>
    <tr>
      <td>Directory</td>
      <td>Accepts the query request and returns a list of matching resources</td>
    </tr>
  </tbody>
</table>

<h3 id="23903-referenced-standards">2:3.90.3 Referenced Standards</h3>

<ul>
  <li>HL7 FHIR standard Release 4 <a href="http://hl7.org/fhir/R4/index.html">http://hl7.org/fhir/R4/index.html</a></li>
</ul>

<h3 id="23904-messages">2:3.90.4 Messages</h3>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="200px" preserveAspectRatio="none" style="width:436px;height:200px;background:#FFFFFF;" version="1.1" viewBox="0 0 436 200" width="436px" zoomAndPan="magnify"><defs /><g><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="46.5" y="47.6094" /><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="46.5" y="114.3125" /><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="389.5" y="47.6094" /><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="389.5" y="114.3125" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="51" x2="51" y1="37.6094" y2="193.0156" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="394" x2="394" y1="37.6094" y2="193.0156" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="12" y="26.5332">Query Client</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="359" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="366" y="26.5332">Directory</text><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="46.5" y="47.6094" /><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="46.5" y="114.3125" /><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="389.5" y="47.6094" /><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="389.5" y="114.3125" /><polygon fill="#181818" points="377.5,65.9609,387.5,69.9609,377.5,73.9609,381.5,69.9609" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="56.5" x2="383.5" y1="69.9609" y2="69.9609" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="63.5" y="65.1045">1. Find Matching Care Services Request [ITI-90]</text><polygon fill="#181818" points="62.5,96.3125,52.5,100.3125,62.5,104.3125,58.5,100.3125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56.5" x2="393.5" y1="100.3125" y2="100.3125" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="68.5" y="95.4561">2. Find Matching Care Services Response [ITI-90]</text><polygon fill="#181818" points="377.5,140.6641,387.5,144.6641,377.5,148.6641,381.5,144.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="56.5" x2="383.5" y1="144.6641" y2="144.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="63.5" y="139.8076">3. Retrieve Care Services Resource Request [ITI-90]</text><polygon fill="#181818" points="62.5,171.0156,52.5,175.0156,62.5,179.0156,58.5,175.0156" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56.5" x2="393.5" y1="175.0156" y2="175.0156" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309" x="68.5" y="170.1592">4. Retrieve Care Services Resource Response [ITI-90]</text></g></svg>
</div>
<p><br clear="all" /></p>

<p><strong>Figure 2:3.90.4-1: Interaction Diagram</strong></p>

<h4 id="239041-find-matching-care-services-request-message">2:3.90.4.1 Find Matching Care Services Request Message</h4>

<p>The Find Matching Care Services message is a FHIR search operation on the mCSD Resources.</p>

<h5 id="2390411-trigger-events">2:3.90.4.1.1 Trigger Events</h5>

<p>A Query Client triggers a Find Matching Care Services Request to a Directory according to the business rules for the query. These business rules are outside the scope of this transaction.</p>

<h5 id="2390412-message-semantics">2:3.90.4.1.2 Message Semantics</h5>

<p>A Query Client initiates a search request using HTTP GET or POST as defined at <a href="http://hl7.org/fhir/R4/http.html#search">http://hl7.org/fhir/R4/http.html#search</a> on the mCSD Resources. The Directory shall support both GET and POST based searches. The query parameters are identified below. A Query Client may query any combination or subset of the parameters.</p>

<p>A Directory shall support responding to a request for both the JSON and the XML messaging formats as defined in FHIR. A Query Client shall accept either the JSON or the XML messaging formats as defined in FHIR. See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.6-populating-the-expected-response-format">ITI TF-2: Z.6</a> for more details.</p>

<p>A Directory shall implement the parameters described below for the mCSD resources it supports. A Directory may choose to support additional query parameters beyond the subset listed below. Any additional query parameters supported shall be supported according to the core FHIR specification.</p>

<p>See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-W.html">ITI TF-2: Appendix W</a> for informative implementation material for this transaction.</p>

<p>See the CapabilityStatements for the Query Client for additional details:</p>

<ul>
  <li><a href="CapabilityStatement-IHE.mCSD.QueryClient.html">IHE ITI Mobile Care Services Discovery (mCSD) - Query Client</a></li>
  <li><a href="CapabilityStatement-IHE.mCSD.QueryClient.LocationDistance.html">IHE ITI Mobile Care Services Discovery (mCSD) - Query Client Location Distance Option</a></li>
</ul>

<h6 id="23904121-common-parameters">2:3.90.4.1.2.1 Common Parameters</h6>

<p>The Directory shall support the <code class="language-plaintext highlighter-rouge">:contains</code> and <code class="language-plaintext highlighter-rouge">:exact</code> modifiers in all of the string query parameters below.</p>

<p>The Directory shall support the following search parameters as defined at <a href="http://hl7.org/fhir/R4/search.html#all">http://hl7.org/fhir/R4/search.html#all</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_id
_lastUpdated
</code></pre></div></div>

<p>The Directory shall also support the following prefixes for the <code class="language-plaintext highlighter-rouge">_lastUpdated</code> parameter: <code class="language-plaintext highlighter-rouge">gt</code>, <code class="language-plaintext highlighter-rouge">lt</code>, <code class="language-plaintext highlighter-rouge">ge</code>, <code class="language-plaintext highlighter-rouge">le</code>, <code class="language-plaintext highlighter-rouge">sa</code>, and <code class="language-plaintext highlighter-rouge">eb</code>.</p>

<h6 id="23904122-organization-resource-message-semantics">2:3.90.4.1.2.2 Organization Resource Message Semantics</h6>

<p>The Directory shall support the following search parameters on the Organization Resource as defined at <a href="http://hl7.org/fhir/R4/organization.html#search">http://hl7.org/fhir/R4/organization.html#search</a>. String parameter modifiers are defined at <a href="http://hl7.org/fhir/R4/search.html#string">http://hl7.org/fhir/R4/search.html#string</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>active
identifier
name
type
_include=Organization:endpoint
_revInclude=Location:organization
_revInclude=OrganizationAffiliation:participating-organization
_revInclude=OrganizationAffiliation:primary-organization
</code></pre></div></div>

<p>The Directory should support the following search parameters on the Organization Resource.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>partof
</code></pre></div></div>

<h6 id="23904123-location-resource-message-semantics">2:3.90.4.1.2.3 Location Resource Message Semantics</h6>

<p>The Directory shall support the following search parameters on the Location Resource as defined at <a href="http://hl7.org/fhir/R4/location.html#search">http://hl7.org/fhir/R4/location.html#search</a>. String parameter modifiers are defined at <a href="http://hl7.org/fhir/R4/search.html#string">http://hl7.org/fhir/R4/search.html#string</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>identifier
name
organization
status
type
_include=Location:organization
</code></pre></div></div>

<p>The Directory should support the following search parameters on the Location Resource.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>partof
</code></pre></div></div>

<h6 id="23904124-practitioner-resource-message-semantics">2:3.90.4.1.2.4 Practitioner Resource Message Semantics</h6>

<p>The Directory shall support the following search parameters on the Practitioner Resource as defined at <a href="http://hl7.org/fhir/R4/practitioner.html#search">http://hl7.org/fhir/R4/practitioner.html#search</a>. String parameter modifiers are defined at <a href="http://hl7.org/fhir/R4/search.html#string">http://hl7.org/fhir/R4/search.html#string</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>active
identifier
name
given
family
</code></pre></div></div>

<h6 id="23904125-practitionerrole-resource-message-semantics">2:3.90.4.1.2.5 PractitionerRole Resource Message Semantics</h6>

<p>The Directory shall support the following search parameters on the PractitionerRole Resource as defined at <a href="http://hl7.org/fhir/R4/practitionerrole.html#search">http://hl7.org/fhir/R4/practitionerrole.html#search</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>active
location
organization
practitioner
role
service
specialty
_include=PractitionerRole:practitioner
</code></pre></div></div>

<h6 id="23904126-healthcareservice-resource-message-semantics">2:3.90.4.1.2.6 HealthcareService Resource Message Semantics</h6>

<p>The Directory shall support the following search parameters on the HealthcareService Resource as defined at <a href="http://hl7.org/fhir/R4/healthcareservice.html#search">http://hl7.org/fhir/R4/healthcareservice.html#search</a>. String parameter modifiers are defined at <a href="http://hl7.org/fhir/R4/search.html#string">http://hl7.org/fhir/R4/search.html#string</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>active
identifier
location
name
organization
service-type
</code></pre></div></div>

<h6 id="23904127-location-distance-option-message-semantics">2:3.90.4.1.2.7 Location Distance Option Message Semantics</h6>

<p>The Directory supporting the Location Distance Option shall support the following search parameters on the Location Resource as defined at <a href="http://hl7.org/fhir/R4/location.html#search">http://hl7.org/fhir/R4/location.html#search</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>near
</code></pre></div></div>

<h6 id="23904128-endpoint-resource-message-semantics">2:3.90.4.1.2.8 Endpoint Resource Message Semantics</h6>

<p>The Directory shall support the following search parameters on the Endpoint Resource as defined at <a href="http://hl7.org/fhir/R4/endpoint.html#search">http://hl7.org/fhir/R4/endpoint.html#search</a>. String parameter modifiers are defined at <a href="http://hl7.org/fhir/R4/search.html#string">http://hl7.org/fhir/R4/search.html#string</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>identifier
organization
status
</code></pre></div></div>

<h6 id="23904129-organizationaffiliation-resource-message-semantics">2:3.90.4.1.2.9 OrganizationAffiliation Resource Message Semantics</h6>

<p>The Directory shall support the following search parameters on the OrganizationAffiliation Resource as defined at <a href="http://hl7.org/fhir/R4/organizationaffiliation.html#search">http://hl7.org/fhir/R4/organizationaffiliation.html#search</a>. String parameter modifiers are defined at <a href="http://hl7.org/fhir/R4/search.html#string">http://hl7.org/fhir/R4/search.html#string</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>active
date
identifier
participating-organization
primary-organization
role
_include=OrganizationAffiliation:endpoint
</code></pre></div></div>

<h5 id="2390413-expected-actions">2:3.90.4.1.3 Expected Actions</h5>

<p>The Directory shall process the query to discover the resources that match the search parameters given, and return a response as per Section 2:3.90.4.2 or an error as per
<a href="http://hl7.org/fhir/R4/search.html#errors">http://hl7.org/fhir/R4/search.html#errors</a>.</p>

<h4 id="239042-find-matching-care-services-response-message">2:3.90.4.2 Find Matching Care Services Response Message</h4>

<h5 id="2390421-trigger-events">2:3.90.4.2.1 Trigger Events</h5>

<p>The Directory sends the Find Matching Care Services Response to the Query Client when results to the query are ready.</p>

<h5 id="2390422-message-semantics">2:3.90.4.2.2 Message Semantics</h5>

<p>The Directory shall support the search response message as defined at <a href="http://hl7.org/fhir/R4/http.html#search">http://hl7.org/fhir/R4/http.html#search</a> on the Care Services Resources.</p>

<p>They shall also support the requirements in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.6-populating-the-expected-response-format">ITI TF-2: Z.6</a>, Populating the Expected Response Format.</p>

<p>All References (Reference.reference element) to Resources defined in this transaction shall be populated with an accessible URL (see <a href="https://www.hl7.org/fhir/references-definitions.html#Reference.reference">https://www.hl7.org/fhir/references-definitions.html#Reference.reference</a>), unless the referenced resource is not available at a URL known to the server.</p>

<p>See the CapabilityStatements for the Directory for additional details:</p>

<ul>
  <li><a href="CapabilityStatement-IHE.mCSD.Directory.html">IHE ITI Mobile Care Services Discovery (mCSD) - Directory</a></li>
  <li><a href="CapabilityStatement-IHE.mCSD.Directory.LocationDistance.html">IHE ITI Mobile Care Services Discovery (mCSD) - Directory Location Distance Option</a></li>
</ul>

<h6 id="23904221-fhir-organization-resource-constraints">2:3.90.4.2.2.1 FHIR Organization Resource Constraints</h6>

<p>A Query Client may query on Organization Resources. A Directory shall return a Bundle of matching Organization Resources. The Organization Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.Organization.html">Organization Profile for mCSD</a>.</p>

<p>A Query Client may query on Organization Resources when working with Facilities. A Directory shall return a Bundle of matching Organization Resources when working with Facilities. The FHIR Organization Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.FacilityOrganization.html">Organization for Facilities Profile for mCSD</a>.</p>

<p>A Query Client may query on Organization Resources when working with Jurisdictions. A Directory shall return a Bundle of matching Organization Resources when working with Jurisdictions. The FHIR Organization Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.JurisdictionOrganization.html">Organization for Jurisdictions Profile for mCSD</a>.</p>

<h6 id="23904222-fhir-location-resource-constraints">2:3.90.4.2.2.2 FHIR Location Resource Constraints</h6>

<p>A Query Client may query on Location Resources. A Directory shall return a Bundle of matching Location Resources. The Location Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.Location.html">Location Profile for mCSD</a>.</p>

<p>When the resource is a Facility, the Location Resource shall be paired with an Organization Resource using the managingOrganization element in Location. A Query Client may query on Location Resources when working with Facilities. A Directory shall return a Bundle of matching Location Resources when working with Facilities. The FHIR Location Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.FacilityLocation.html">Location for Facilities Profile for mCSD</a>.</p>

<p>When the resource is a Jurisdiction, the Location Resource shall be paired with an Organization Resource using the managingOrganization element in Location. A Query Client 
may query on Location Resources when working with Jurisdictions. A Directory shall return a Bundle of matching Location Resources when working with Jurisdictions. The FHIR Location Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.JurisdictionLocation.html">Location for Jurisdictions Profile for mCSD</a>.</p>

<p>When a geographic boundary is available for the Jurisdiction Location, the location-boundary-geojson extension defined at <a href="http://hl7.org/fhir/extension-location-boundary-geojson.html">http://hl7.org/fhir/extension-location-boundary-geojson.html</a> shall be used to store this information.</p>

<p>When supporting the Location Distance Option, the Location Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.LocationDistance.html">Location with Distance Option Profile for mCSD</a>.</p>

<h6 id="23904223-fhir-practitioner-resource-constraints">2:3.90.4.2.2.3 FHIR Practitioner Resource Constraints</h6>

<p>A Query Client may query on Practitioner Resources. A Directory shall return a Bundle of matching Practitioner Resources. The Practitioner Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.Practitioner.html">Practitioner Profile for mCSD</a>.</p>

<h6 id="23904224-fhir-practitionerrole-resource-constraints">2:3.90.4.2.2.4 FHIR PractitionerRole Resource Constraints</h6>

<p>A Query Client may query on PractitionerRole Resources. A Directory shall return a Bundle of matching PractitionerRole Resources. The PractitionerRole Resource shall be further constrained as described in the 
<a href="StructureDefinition-IHE.mCSD.PractitionerRole.html">PractitionerRole Profile for mCSD</a>.</p>

<h6 id="23904225-fhir-healthcareservice-resource-constraints">2:3.90.4.2.2.5 FHIR HealthcareService Resource Constraints</h6>

<p>A Query Client may query on HealthcareService Resources. A Directory shall return a Bundle of matching HealthcareService Resources. The HealthcareService Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.HealthcareService.html">HealthcareService Profile for mCSD</a>.</p>

<h6 id="23904226-fhir-organizationaffiliation-resource-constraints">2:3.90.4.2.2.6 FHIR OrganizationAffiliation Resource Constraints</h6>

<p>A Query Client may query on OrganizationAffiliation Resources. A Directory shall return a Bundle of matching OrganizationAffiliation Resources. The OrganizationAffiliation Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.OrganizationAffiliation.html">OrganizationAffiliation Profile for mCSD</a>.</p>

<p>When the OrganizationAffiliation contains an Endpoint to an IHE document sharing environment, it shall further be constrained as described in the <a href="StructureDefinition-IHE.mCSD.OrganizationAffiliation.DocShare.html">OrganizationAffiliation for Document Sharing Profile for mCSD</a>.</p>

<h6 id="23904227-fhir-endpoint-resource-constraints">2:3.90.4.2.2.7 FHIR Endpoint Resource Constraints</h6>

<p>A Query Client may query on Endpoint Resources. A Directory shall return a Bundle of matching Endpoint Resources. The Endpoint Resource shall be further constrained as described in the <a href="StructureDefinition-IHE.mCSD.Endpoint.html">Endpoint Profile for mCSD</a>.</p>

<p>When the Endpoint is to an IHE document sharing environment, it shall further be constrained as described in the <a href="StructureDefinition-IHE.mCSD.Endpoint.DocShare.html">Endpoint for Document Sharing Profile for mCSD</a>.</p>

<h5 id="2390423-expected-actions">2:3.90.4.2.3 Expected Actions</h5>

<p>The Query Client has received the response and continues with its workflow.</p>

<h4 id="239043-retrieve-care-services-resource-message">2:3.90.4.3 Retrieve Care Services Resource message</h4>
<p>This message represents an HTTP GET from the Query Client to the Directory and provides a mechanism for retrieving a single Care Services Resource with a known resource identifier.</p>

<h5 id="2390431-trigger-events">2:3.90.4.3.1 Trigger Events</h5>
<p>When the Query Client possesses a Care Services Resource identifier (either through query, database lookup, or other mechanism) for which it requires additional or new information, it issues a Retrieve Care Services Resource interaction.</p>

<h5 id="2390432--message-semantics">2:3.90.4.3.2  Message Semantics</h5>
<p>The Retrieve Care Services Resource is conducted by executing an HTTP GET against the Directory’s Care Services Resource URL, providing the resource id of the resource being retrieved. The target is formatted as:</p>

<p><code class="language-plaintext highlighter-rouge">   GET [base]/[resource]/[resourceId]</code></p>

<p>The Directory shall respond to this query by sending a single Care Services Resource instance.</p>

<p>The <code class="language-plaintext highlighter-rouge">resourceId</code> included in the request always represents the unique identifier for the Resource within the scope of the URL. For example, while <code class="language-plaintext highlighter-rouge">http://example1.org/ihe/Practitioner/1</code> and <code class="language-plaintext highlighter-rouge">http://example2.com/ihe/Practitioner/1</code> both contain the same <code class="language-plaintext highlighter-rouge">[resourceId]</code>, they reference two different resource instances.</p>

<p>Note: The use of “http” or “https” in URL does not override requirements to use TLS for security purposes.</p>

<p>See the CapabilityStatements for the Query Client for additional details:</p>

<ul>
  <li><a href="CapabilityStatement-IHE.mCSD.QueryClient.html">IHE ITI Mobile Care Services Discovery (mCSD) - Query Client</a></li>
  <li><a href="CapabilityStatement-IHE.mCSD.QueryClient.LocationDistance.html">IHE ITI Mobile Care Services Discovery (mCSD) - Query Client Location Distance Option</a></li>
</ul>

<h5 id="2390433-expected-actions">2:3.90.4.3.3 Expected Actions</h5>
<p>The Directory shall retrieve the record indicated by the Resource identifier on the HTTP GET supplied by the Query Client. The Directory shall respond to the retrieve request as described by the following cases:</p>

<p><strong>Case 1</strong>: The Directory finds the care services record matching the <code class="language-plaintext highlighter-rouge">resourceId</code> sent in the HTTP request.</p>

<p><code class="language-plaintext highlighter-rouge">HTTP 200</code> (OK) is returned as the HTTP status code.</p>

<p>A Care Services Resource is returned representing the result.</p>

<p><strong>Case 2</strong>: The Directory fails to find the care services record matching the <code class="language-plaintext highlighter-rouge">resourceId</code> sent in the HTTP request.</p>

<p><code class="language-plaintext highlighter-rouge">HTTP 404</code> (Not Found) is returned as the HTTP status code</p>

<p>An <code class="language-plaintext highlighter-rouge">OperationOutcome</code> Resource is returned indicating that the Care Services Resource could not be found, in an issue having:</p>

<table class="grid">
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>severity</td>
      <td>error</td>
    </tr>
    <tr>
      <td>code</td>
      <td>not-found</td>
    </tr>
  </tbody>
</table>

<p>The Directory may return other HTTP status codes to represent specific error conditions. When HTTP error status codes are returned by the Directory, they shall conform to the HTTP standard <a href="https://tools.ietf.org/html/rfc2616">RFC2616</a>. Their use is not further constrained or specified by this transaction.</p>

<h4 id="239044-retrieve-care-services-resource-response-message">2:3.90.4.4 Retrieve Care Services Resource Response message</h4>

<p>The Directory’s response to a successful Retrieve Care Services Resource message shall be an <code class="language-plaintext highlighter-rouge">HTTP 200</code> (OK) Status code with a Care Services Resource, or an appropriate error code.  See the <a href="#2390433-expected-actions">Retrieve Care Services Resource message expected actions</a> for additional details.</p>

<h5 id="2390441-trigger-events">2:3.90.4.4.1 Trigger Events</h5>
<p>The Directory found a record matching the Resource identifier specified by the Query Client.</p>

<h5 id="2390442-message-semantics">2:3.90.4.4.2 Message Semantics</h5>
<p>The Retrieve Care Services Resource response is sent from the Directory to the Query Client as a single Care Services Resource.</p>

<p>See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.6-populating-the-expected-response-format">ITI TF-2: Appendix Z.6</a> for more details on response format handling. See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.7-guidance-on-access-denied-results">ITI TF-2: Appendix Z.7</a> for guidance on Access Denied.</p>

<p>If the Directory is unable to produce a response in the requested format, it shall respond with an <code class="language-plaintext highlighter-rouge">HTTP 400</code> error indicating that it was unable to fulfill the request. The Directory may be capable of servicing requests for response formats not listed, but shall, at minimum, be capable of producing XML and JSON encodings.</p>

<p>See the CapabilityStatements for the Directory for additional details:</p>

<ul>
  <li><a href="CapabilityStatement-IHE.mCSD.Directory.html">IHE ITI Mobile Care Services Discovery (mCSD) - Directory</a></li>
  <li><a href="CapabilityStatement-IHE.mCSD.Directory.LocationDistance.html">IHE ITI Mobile Care Services Discovery (mCSD) - Directory Location Distance Option</a></li>
</ul>

<h6 id="23904421-care-services-resource-definition-in-the-context-of-care-services-resource-response">2:3.90.4.4.2.1 Care Services Resource Definition in the Context of Care Services Resource Response</h6>
<p>The Care Services Resource definition in the context of a retrieve interaction is the FHIR definition of the various Care Services Resources. Table 2:3.90.4.4.2.1-1 lists the resources with where to find the additional constraints.</p>

<p><strong>Table 2:3.90.4.4.2.1-1: Care Services Resource Constraints</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Resource</th>
      <th>Section</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Organization</code></td>
      <td><a href="#23904221-fhir-organization-resource-constraints">2:3.90.4.2.2.1 FHIR Organization Resource Constraints</a></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Location</code></td>
      <td><a href="#23904222-fhir-location-resource-constraints">2:3.90.4.2.2.2 FHIR Location Resource Constraints</a></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Practitioner</code></td>
      <td><a href="#23904223-fhir-practitioner-resource-constraints">2:3.90.4.2.2.3 FHIR Practitioner Resource Constraints</a></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PractitionerRole</code></td>
      <td><a href="#23904224-fhir-practitionerrole-resource-constraints">2:3.90.4.2.2.4 FHIR PractitionerRole Resource Constraints</a></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">HealthcareService</code></td>
      <td><a href="#23904225-fhir-healthcareservice-resource-constraints">2:3.90.4.2.2.5 FHIR HealthcareService Resource Constraints</a></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OrganizationAffiliation</code></td>
      <td><a href="#23904226-fhir-organizationaffiliation-resource-constraints">2:3.90.4.2.2.6 FHIR OrganizationAffiliation Resource Constraints</a></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Endpoint</code></td>
      <td><a href="#23904227-fhir-endpoint-resource-constraints">2:3.90.4.2.2.7 FHIR Endpoint Resource Constraints</a></td>
    </tr>
  </tbody>
</table>

<h3 id="23905-security-considerations">2:3.90.5 Security Considerations</h3>

<p>See <a href="volume-1.html#1465-mcsd-security-considerations">ITI TF-1: 46.5</a> for security considerations for the mCSD Profile.</p>

<p>See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.8-mobile-security-considerations">ITI TF-2: Appendix Z.8</a> for common mobile security considerations.</p>

<h4 id="239051-security-audit-considerations">2:3.90.5.1 Security Audit Considerations</h4>

<p>Note that when grouped with ATNA Secure Node or Secure Application Actor, the same audit message is recorded by both Directory and Query Client. The
difference being the Audit Source element. Both sides record to show consistency
between the message sent by the Directory and the action taken at the Query Client.</p>

<p>The actors involved shall be able to record audit events according to the
<a href="StructureDefinition-IHE.mCSD.Audit.CareServices.Read.html">Audit Event for Find Matching Care Services for Read by the Directory and Query Client</a>
or the <a href="StructureDefinition-IHE.mCSD.Audit.CareServices.Query.html">Audit Event for Find Matching Care Services for Query by the Directory and Query Client</a>.</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="volume-1.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="ITI-91.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2022+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.ihe.net/ihe_domains/it_infrastructure/">IHE IT Infrastructure Technical Committee</a>.  Package ihe.iti.mcsd#4.0.0-comment based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Mar 12, 2025 11:05-0500">2025-03-12</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.mCSD/issues/new/choose">New Issue</a> | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.mCSD/issues">Issues</a>
                
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://profiles.ihe.net/ITI/mCSD/history.html">Version History</a></a> |
                 <a style="color: var(--footer-hyperlink-text-color)" rel="license" href="https://profiles.ihe.net/GeneralIntro/ch-9.html"><img style="border-style: none;" alt="CC0" src="assets/images/cc-by.png" height="17"/></a> |
                <!-- <a style="color: var(--footer-hyperlink-text-color)" href="searchform.html">Search</a> | -->
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://www.ihe.net/resources/public_comment/">Propose a change<img alt="external" style="vertical-align: baseline" src="external.png"/></a>
                 <script type="text/javascript" src=".assets/js/google-analytics.js"> </script>
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

