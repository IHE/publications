{
  "resourceType" : "Basic",
  "id" : "DSUBm-SubscriptionTopic-Folder-Subscription-MinUpdateOpt",
  "meta" : {
    "versionId" : "1"
  },
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid\"><tr><td colspan=\"4\"><b>Resource Triggers</b></td></tr><tr><th><b>Resource</b></th><th><b>Interactions</b></th><th><b>FHIR Path</b></th><th><b>Description</b></th></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>create</td><td>((%current.code.coding.where(system='https://profiles.ihe.net/ITI/MHD/CodeSystem/MHDlistTypes').code='folder'))</td><td><div><p>A Folder type List resource is created.</p>\n</div></td></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>update</td><td>((%current.code.coding.where(system='https://profiles.ihe.net/ITI/MHD/CodeSystem/MHDlistTypes').code='folder')) and ( ((%previous.entry.item).count() &lt; (%current.entry.item).count()) or (((%previous.entry.item).count() &gt; (%current.entry.item).count())) or ((%previous.status != %current.status)) )</td><td><div><p>A Folder type List resource is updated to insert new documents in the Folder, to remove documents from the Folder or to update the status.</p>\n</div></td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Can Filter By</b></td></tr><tr><th><b>Resource</b></th><th><b>Filter Parameter</b></th></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>code</td></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>patient</td></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>patient.identifier</td></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>identifier</td></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>designationType</td></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>status</td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Notification Shapes</b></td></tr><tr><th><b>Resource</b></th><th><b>Includes</b></th></tr><tr><td><a href=\"https://profiles.ihe.net/ITI/MHD/4.2.1/StructureDefinition-IHE.MHD.Minimal.Folder.html\">MHD Folder Minimal</a></td><td>List:subject</td></tr></table></div>"
  },
  "extension" : [{
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.url",
    "valueUri" : "https://profiles.ihe.net/ITI/DSUBm/SubscriptionTopic/DSUBm-SubscriptionTopic-Folder-Subscription-MinUpdateOpt"
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.version",
    "valueString" : "1.0.0"
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.title",
    "valueString" : "SubscriptionTopic for Folder Subscription for Minimal Update Option"
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.status",
    "valueCode" : "active"
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.date",
    "valueDateTime" : "2024-02-29T12:35:37-06:00"
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.publisher",
    "valueString" : "IHE IT Infrastructure Technical Committee"
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.contact",
    "valueContactDetail" : {
      "telecom" : [{
        "system" : "url",
        "value" : "https://www.ihe.net/ihe_domains/it_infrastructure/"
      }]
    }
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.contact",
    "valueContactDetail" : {
      "telecom" : [{
        "system" : "email",
        "value" : "iti@ihe.net"
      }]
    }
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.contact",
    "valueContactDetail" : {
      "name" : "IHE IT Infrastructure Technical Committee",
      "telecom" : [{
        "system" : "email",
        "value" : "iti@ihe.net"
      }]
    }
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.description",
    "valueMarkdown" : "Profile for the resource SubscriptionTopic. The resource describe the topic of a creation of a Folder type List Resource, the update to insert or remove documents in the Folder and the update of the status. \nThis topic SHALL be used in all Folder subscriptions that have a specific patient in the criteria element.\nNote that:\n- the trigger for this topic SHALL be the resourceTrigger (so the eventTrigger SHALL NOT be used)\n- the resourceTrigger.resource element SHALL be a Folder type List resource\n- this resource SHALL be used when the \"Folder Subscription for Minimal Update Option\" is supported\n- the events are the creation of a Folder type List Resource, the update to insert or remove documents in the Folder and the update of the status\n"
  },
  {
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.jurisdiction",
    "valueCodeableConcept" : {
      "coding" : [{
        "system" : "http://unstats.un.org/unsd/methods/m49/m49.htm",
        "code" : "001"
      }]
    }
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "A Folder type List resource is created."
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "supportedInteraction",
      "valueCode" : "create"
    },
    {
      "url" : "fhirPathCriteria",
      "valueString" : "((%current.code.coding.where(system='https://profiles.ihe.net/ITI/MHD/CodeSystem/MHDlistTypes').code='folder'))"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.resourceTrigger"
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "A Folder type List resource is updated to insert new documents in the Folder, to remove documents from the Folder or to update the status."
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "supportedInteraction",
      "valueCode" : "update"
    },
    {
      "url" : "fhirPathCriteria",
      "valueString" : "((%current.code.coding.where(system='https://profiles.ihe.net/ITI/MHD/CodeSystem/MHDlistTypes').code='folder')) and ( ((%previous.entry.item).count() < (%current.entry.item).count()) or (((%previous.entry.item).count() > (%current.entry.item).count())) or ((%previous.status != %current.status)) )"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.resourceTrigger"
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "Filter based on the code of a Folder List Resource. (Fixed Value: folder)"
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "filterParameter",
      "valueString" : "code"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.canFilterBy"
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "Filter based on the patient of a Folder List Resource. (Folder.patientId)"
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "filterParameter",
      "valueString" : "patient"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.canFilterBy"
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "Filter based on the patient of a Folder List Resource. (Folder.patientId)"
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "filterParameter",
      "valueString" : "patient.identifier"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.canFilterBy"
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "Filter based on the identifier of a Folder List Resource. (Folder.entryUUID and Folder.uniqueId)"
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "filterParameter",
      "valueString" : "identifier"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.canFilterBy"
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "Filter based on the designationType of a Folder List Resource. (Folder.codeList)"
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "filterParameter",
      "valueString" : "designationType"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.canFilterBy"
  },
  {
    "extension" : [{
      "url" : "description",
      "valueMarkdown" : "Filter based on the status of a Folder List Resource. (Folder.availabilityStatus)"
    },
    {
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "filterParameter",
      "valueString" : "status"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.canFilterBy"
  },
  {
    "extension" : [{
      "url" : "resource",
      "valueUri" : "https://profiles.ihe.net/ITI/MHD/StructureDefinition/IHE.MHD.Minimal.Folder"
    },
    {
      "url" : "include",
      "valueString" : "List:subject"
    }],
    "url" : "http://hl7.org/fhir/5.0/StructureDefinition/extension-SubscriptionTopic.notificationShape"
  }],
  "code" : {
    "coding" : [{
      "system" : "http://hl7.org/fhir/fhir-types",
      "code" : "SubscriptionTopic"
    }]
  }
}