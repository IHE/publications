<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>2:3.113 Resource Subscription Search [ITI-113] - Document Subscription for Mobile (DSUBm) v1.0.0-comment</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/ihe.css" rel="stylesheet"/>
<link href="assets/css/nonum.css" rel="stylesheet"/>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async> </script> 


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"6"}
    h3,h4,h5,h6{--heading-prefix:"6"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
  <a id="ihe-logo" no-external="true" href="http://profiles.ihe.net">
    <img height="71" alt="Visit the IHE website" src="assets/images/ihe-international.png"/>
  </a>
</div>
<div id="family-nav">
  <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="30" alt="Visit the FHIR website" src="assets/images/fhir-logo.png"/> </a>
</div>
<!--
<div id="hl7-search">
  <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
</div>
-->
<div id="project-nav">
  
  
    <a id="project-logo" no-external="true" href="http://profiles.ihe.net/ITI/index.html"><img height="70" alt="Visit the ITI website" src="assets/images/ITI.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Document Subscription for Mobile (DSUBm)</span>
            <br/>
            <span style="display:inline-block;">1.0.0-comment - ballot



  <img alt="International flag" src="assets/images/001.svg" height="16" title="International"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R5/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">DSUBm Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 1
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="volume-1.html">Introduction</a>
      </li>
      <li>
        <a href="volume-1.html#1541-dsubm-actors-transactions-and-content-modules">Actors and Transactions</a>
      </li>
      <li>
        <a href="volume-1.html#1542-actor-options">Actor Options</a>
      </li>
      <li>
        <a href="volume-1.html#1543-required-actor-groupings">Required Groupings</a>
      </li>
      <li>
        <a href="volume-1.html#1544-dsubm-overview">Overview</a>
      </li>
      <li>
        <a href="volume-1.html#1545-security-considerations">Security Considerations</a>
      </li>
      <li>
        <a href="volume-1.html#1546-cross-profile-considerations">Cross-Profile Considerations</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="ITI-110.html">Resource Subscription [ITI-110]</a>
      </li>
      <li>
        <a href="ITI-111.html">Resource Publish [ITI-111]</a>
      </li>
      <li>
        <a href="ITI-112.html">Resource Notify [ITI-112]</a>
      </li>
      <li>
        <a href="ITI-113.html">Resource Subscription Search [ITI-113]</a>
      </li>
      <li>
        <a href="ITI-114.html">Resource SubscriptionTopic Search [ITI-114]</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Other
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="other.html">Changes to Other IHE Specifications</a>
      </li>
      <li>
        <a href="download.html">Download and Analysis</a>
      </li>
      <li>
        <a href="testplan.html">Test Plan</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>2:3.113 Resource Subscription Search [ITI-113]</b></li>

          <span style="float:right;">

            <a href="ITI-112.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="ITI-114.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the Document Subscription for Mobile (DSUBm) (v1.0.0-comment: Publication Ballot 1) based on <a no-external="true" href="http://hl7.org/fhir/4.3.0">FHIR v4.3.0</a>. .  For a full list of available versions, see the <a no-external="true" href="https://profiles.ihe.net/ITI/DSUBm/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>2:3.113 Resource Subscription Search [ITI-113]</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#231131-scope" id="markdown-toc-231131-scope">2:3.113.1 Scope</a></li>
  <li><a href="#231132-actors-roles" id="markdown-toc-231132-actors-roles">2:3.113.2 Actors Roles</a></li>
  <li><a href="#231133-referenced-standards" id="markdown-toc-231133-referenced-standards">2:3.113.3 Referenced Standards</a></li>
  <li><a href="#231134-interactions" id="markdown-toc-231134-interactions">2:3.113.4 Interactions</a></li>
  <li><a href="#231135-subscription-search-request-message" id="markdown-toc-231135-subscription-search-request-message">2:3.113.5 Subscription Search Request Message</a></li>
  <li><a href="#231136-subscription-search-response-message" id="markdown-toc-231136-subscription-search-response-message">2:3.113.6 Subscription Search Response Message</a></li>
  <li><a href="#231137-subscription-status-search-request-message" id="markdown-toc-231137-subscription-status-search-request-message">2:3.113.7 Subscription Status Search Request Message</a></li>
  <li><a href="#231138-subscription-status-search-response-message" id="markdown-toc-231138-subscription-status-search-response-message">2:3.113.8 Subscription Status Search Response Message</a></li>
  <li><a href="#231139-subscription-events-search-request-message" id="markdown-toc-231139-subscription-events-search-request-message">2:3.113.9 Subscription Events Search Request Message</a></li>
  <li><a href="#2311310-subscription-events-search-response-message" id="markdown-toc-2311310-subscription-events-search-response-message">2:3.113.10 Subscription Events Search Response Message</a></li>
  <li><a href="#23113104-capabilitystatement-resource" id="markdown-toc-23113104-capabilitystatement-resource">2:3.113.10.4 CapabilityStatement Resource</a></li>
  <li><a href="#23113105-security-considerations" id="markdown-toc-23113105-security-considerations">2:3.113.10.5 Security Considerations</a></li>
</ul>

</div>
<p>This section corresponds to the Resource Subscription Search [ITI-113] transaction of the IHE Technical Framework. The Resource Subscription Search [ITI-113] transaction is used by the Resource Notification Subscriber and Resource Notification Broker actors. The Resource Subscription Search [ITI-113] transaction is used to query Subscriptions and get back the results.</p>

<h3 id="231131-scope">2:3.113.1 Scope</h3>

<p>The Resource Subscription Search [ITI-113] transaction passes a Resource Subscription Search message from a Resource Notification Subscriber to a Resource Notification Broker in order to discover Subscriptions, to be aware of Subscriptions status or to be aware of previous events related to Subscriptions.</p>

<h3 id="231132-actors-roles">2:3.113.2 Actors Roles</h3>

<p><strong>Table 2:3.113.2-1: Actor Roles</strong></p>

<table class="grid">
  <thead>
    <tr>
      <th>Actor</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="volume-1.html#154112-resource-notification-subscriber">Resource Notification Subscriber</a></td>
      <td>Sends the query request to the Resource Notification Broker</td>
    </tr>
    <tr>
      <td><a href="volume-1.html#154111-resource-notification-broker">Resource Notification Broker</a></td>
      <td>Receives the query and responds</td>
    </tr>
  </tbody>
</table>

<h3 id="231133-referenced-standards">2:3.113.3 Referenced Standards</h3>

<p><strong>FHIR-R4</strong> <a href="https://www.hl7.org/FHIR/R4">HL7 FHIR Release 4.0.</a></p>

<h3 id="231134-interactions">2:3.113.4 Interactions</h3>

<figure>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="379px" preserveAspectRatio="none" style="width:475px;height:379px;background:#FFFFFF;" version="1.1" viewBox="0 0 475 379" width="475px" zoomAndPan="magnify"><defs /><g><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="361" y="114.3125" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="361" y="219.3672" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="361" y="324.4219" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="115" x2="115" y1="37.6094" y2="372.7734" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="366" x2="366" y1="37.6094" y2="372.7734" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="220" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206" x="12" y="26.5332">Resource Notification Subscriber</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="269" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="276" y="26.5332">Resource Notification Broker</text><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="361" y="114.3125" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="361" y="219.3672" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="361" y="324.4219" /><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="468" x="0" y="68.7852" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="468" y1="68.7852" y2="68.7852" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="468" y1="71.7852" y2="71.7852" /><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="146" x="161" y="57.6094" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="167" y="75.1045">Subscription Search</text><polygon fill="#181818" points="349,110.3125,359,114.3125,349,118.3125,353,114.3125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="115" x2="355" y1="114.3125" y2="114.3125" /><a href="ITI-113.html#231135-subscription-search-request-message" target="_top" title="ITI-113.html#231135-subscription-search-request-message" xlink:actuate="onRequest" xlink:href="ITI-113.html#231135-subscription-search-request-message" xlink:show="new" xlink:title="ITI-113.html#231135-subscription-search-request-message" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="169" x="122" y="109.4561">Subscription Search Request</text></a><polygon fill="#181818" points="126,140.6641,116,144.6641,126,148.6641,122,144.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="365" y1="144.6641" y2="144.6641" /><a href="ITI-113.html#231136-subscription-search-response-message" target="_top" title="ITI-113.html#231136-subscription-search-response-message" xlink:actuate="onRequest" xlink:href="ITI-113.html#231136-subscription-search-response-message" xlink:show="new" xlink:title="ITI-113.html#231136-subscription-search-response-message" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="179" x="132" y="139.8076">Subscription Search Response</text></a><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="468" x="0" y="173.8398" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="468" y1="173.8398" y2="173.8398" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="468" y1="176.8398" y2="176.8398" /><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="189" x="139.5" y="162.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="171" x="145.5" y="180.1592">Subscription Status Search</text><polygon fill="#181818" points="349,215.3672,359,219.3672,349,223.3672,353,219.3672" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="115" x2="355" y1="219.3672" y2="219.3672" /><a href="ITI-113.html#231137-subscription-status-search-request-message" target="_top" title="ITI-113.html#231137-subscription-status-search-request-message" xlink:actuate="onRequest" xlink:href="ITI-113.html#231137-subscription-status-search-request-message" xlink:show="new" xlink:title="ITI-113.html#231137-subscription-status-search-request-message" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="211" x="122" y="214.5107">Subscription Status Search Request</text></a><polygon fill="#181818" points="126,245.7188,116,249.7188,126,253.7188,122,249.7188" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="365" y1="249.7188" y2="249.7188" /><a href="ITI-113.html#231138-subscription-status-search-response-message" target="_top" title="ITI-113.html#231138-subscription-status-search-response-message" xlink:actuate="onRequest" xlink:href="ITI-113.html#231138-subscription-status-search-response-message" xlink:show="new" xlink:title="ITI-113.html#231138-subscription-status-search-response-message" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="221" x="132" y="244.8623">Subscription Status Search Response</text></a><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="468" x="0" y="278.8945" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="468" y1="278.8945" y2="278.8945" /><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="468" y1="281.8945" y2="281.8945" /><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="191" x="138.5" y="267.7188" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="173" x="144.5" y="285.2139">Subscription Events Search</text><polygon fill="#181818" points="349,320.4219,359,324.4219,349,328.4219,353,324.4219" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="115" x2="355" y1="324.4219" y2="324.4219" /><a href="ITI-113.html#231139-subscription-events-search-request-message" target="_top" title="ITI-113.html#231139-subscription-events-search-request-message" xlink:actuate="onRequest" xlink:href="ITI-113.html#231139-subscription-events-search-request-message" xlink:show="new" xlink:title="ITI-113.html#231139-subscription-events-search-request-message" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="212" x="122" y="319.5654">Subscription Events Search Request</text></a><polygon fill="#181818" points="126,350.7734,116,354.7734,126,358.7734,122,354.7734" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="365" y1="354.7734" y2="354.7734" /><a href="ITI-113.html#2311310-subscription-events-search-response-message" target="_top" title="ITI-113.html#2311310-subscription-events-search-response-message" xlink:actuate="onRequest" xlink:href="ITI-113.html#2311310-subscription-events-search-response-message" xlink:show="new" xlink:title="ITI-113.html#2311310-subscription-events-search-response-message" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="222" x="132" y="349.917">Subscription Events Search Response</text></a></g></svg>
<figcaption><b>Figure 2:3.113.3-1: Resource Subscription Search [ITI-113] interactions</b></figcaption>
</figure>
<p><br clear="all" /></p>

<h3 id="231135-subscription-search-request-message">2:3.113.5 Subscription Search Request Message</h3>
<p>The Resource Notification Subscriber Request Message is a parameterized <code class="language-plaintext highlighter-rouge">HTTP GET</code> that queries the Resource Notification Broker for information about Subscriptions.</p>

<h4 id="2311351-trigger-events">2:3.113.5.1 Trigger Events</h4>

<p>A Resource Notification Subscriber sends this message to the Resource Notification Broker when it needs to discover one or more Subscription Resources that are not known.</p>

<h4 id="2311352-message-semantics">2:3.113.5.2 Message Semantics</h4>

<p>The Resource Notification Subscriber sends an <code class="language-plaintext highlighter-rouge">HTTP GET</code> request to the Resource Notification Broker.</p>

<p>This request shall comply with requirements specified in the HL7<sup>®</sup>
FHIR<sup>®</sup> standard <a href="https://hl7.org/fhir/R4B/http.html#search">https://hl7.org/fhir/R4B/http.html#search</a>.</p>

<p>The search target URL follows the FHIR HTTP specification <a href="https://hl7.org/fhir/R4B/http.html">https://hl7.org/fhir/R4B/http.html</a>, addressing the Subscription Resources that the Resource Notification Subscriber is interested to discover.</p>

<p>The Resource Notification Subscriber Request Message can be expressed by addressing the Subscription Resource with different parameters at the URL:</p>

<blockquote>
  <p>GET  [base]/Subscription?[Parameters]</p>
</blockquote>

<p>The Resource Notification Subscriber should support and may supply, and the Resource Notification Broker shall be capable of processing all parameters reported in Table 3.113.5.2-1. All parameter values shall be appropriately encoded per <a href="https://tools.ietf.org/html/rfc3986">RFC3986</a> “percent” encoding rules. Note that percent encoding does restrict the character set to a subset of ASCII characters which is used for encoding all other characters used in the URL. Resource Notification Broker may choose to support additional parameters beyond the subset listed below. Any additional parameters supported shall be supported according to <a href="https://hl7.org/fhir/R4B/subscription.html#search">Search parameters</a> section and also the <a href="https://build.fhir.org/ig/HL7/fhir-subscription-backport-ig/artifacts.html#behavior-search-parameters">search parameter</a> included in the <a href="http://hl7.org/fhir/uv/subscriptions-backport/STU1.1/">Subscription R5 Backport Implementation Guide</a>. Such additional parameters are considered out of scope for this transaction. Any additional parameters not supported should be ignored.</p>

<p>FHIR defines methods of supporting multiple parameter values in an AND and OR relationship. The Resource Notification Broker shall support both AND and OR relationships. See FHIR specification on Composite Search Parameters <a href="https://hl7.org/fhir/R4B/search.html#combining">https://hl7.org/fhir/R4B/search.html#combining</a>.</p>

<p><strong>Table 2:3.113.5.2-1: Subscription Search Request Message Search Parameters</strong></p>

<table class="grid">
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>_id</td>
      <td>string</td>
      <td>The id of the Subscription</td>
    </tr>
    <tr>
      <td>status</td>
      <td>token</td>
      <td>The current state of the subscription</td>
    </tr>
    <tr>
      <td>url</td>
      <td>uri</td>
      <td>The URI that will receive the notifications</td>
    </tr>
    <tr>
      <td>filter-criteria</td>
      <td>string</td>
      <td>This SearchParameter enables query of subscriptions by filter criteria</td>
    </tr>
    <tr>
      <td>topic</td>
      <td>uri</td>
      <td>This SearchParameter enables query of subscriptions by canonical topic-url</td>
    </tr>
  </tbody>
</table>

<p>The Resource Notification Subscriber may provide the optional parameter “_format” to specify the desired MIME-types in the response message. The Resource Notification Broker should accept <code class="language-plaintext highlighter-rouge">application/fhir+xml</code> and <code class="language-plaintext highlighter-rouge">application/fhir+json</code> as _format parameters.  For example, indicating <code class="language-plaintext highlighter-rouge">application/fhir+json</code> could result in the response from the Resource Notification Broker being a json FHIR Bundle with all the content encoded as FHIR resources.</p>

<h5 id="23113521-subscription-search-request-message-examples">2:3.113.5.2.1 Subscription Search Request Message examples</h5>

<p>Search for all active subscriptions with <code class="language-plaintext highlighter-rouge">endpoint=X</code> without knowing the type of subscription:</p>
<blockquote>
  <p>GET  [base]/Subscription?status=active&amp;channel.endpoint=X</p>
</blockquote>

<p>Search for all the subscriptions made for documents produced for a specific patient with <code class="language-plaintext highlighter-rouge">patientId = Y</code>:</p>
<blockquote>
  <p>GET  [base]/Subscription?filter-criteria=documentReference%3Fsubject=Y</p>
</blockquote>

<p>Search for all the subscriptions that are referring to a specific SubscriptionTopic resource with <code class="language-plaintext highlighter-rouge">id=1234</code>:</p>
<blockquote>
  <p>GET  [base]/Subscription?criteria=http://hl7.org/SubscriptionTopic/1234</p>
</blockquote>

<h4 id="2311353-expected-actions">2:3.113.5.3 Expected Actions</h4>

<p>The Resource Notification Broker who received the message shall process the request and respond with a Resource Subscription Search Response Message.</p>

<p>After receiving a Subscription Search request, the Resource Notification Broker shall return a Bundle with the Subscription Resources that matches the query parameters in the request message.</p>

<h3 id="231136-subscription-search-response-message">2:3.113.6 Subscription Search Response Message</h3>

<p>The Resource Notification Broker returns an HTTP status code appropriate to the processing as well as a Bundle containing a list of the matching Subscription resources.</p>

<h4 id="2311361-trigger-events">2:3.113.6.1 Trigger Events</h4>

<p>The Resource Notification Broker completed the processing of the Subscription Search Request Message.</p>

<h4 id="2311362-message-semantics">2:3.113.6.2 Message Semantics</h4>

<p>The response shall adhere to the FHIR Bundle constraints specified in ITI TF-2x: <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.1-resource-bundles">Appendix Z.7</a></p>

<p>Based on the query results, the Resource Notification Broker will either return an error or success. Guidance on handling Access Denied related to the use of 200, 403, and 404 can be found in ITI TF-2x: <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.7-guidance-on-access-denied-results">Appendix Z.7</a>. When the Resource Notification Broker needs to report an error, it shall use HTTP error response codes and should include a FHIR OperationOutcome with more details on the failure. See FHIR https://hl7.org/fhir/R4B/http.html and https://hl7.org/fhir/R4B/operationoutcome.html.</p>

<p>If the Resource Subscription Search message is processed successfully, whether or not any Subscription Resources are found based on the request parameter, the response shall be an <code class="language-plaintext highlighter-rouge">HTTP 200</code> status code. The Resource Subscription Search Response message shall be a Bundle Resource that shall have:</p>

<ul>
  <li>the <code class="language-plaintext highlighter-rouge">Bundle.type</code> element valued <code class="language-plaintext highlighter-rouge">searchset</code></li>
  <li>zero or more entries containing the Subscription Resources;</li>
  <li>zero or one OperationOutcome Resource that contains warnings, if the Resource Subscription Broker is sending warnings.</li>
</ul>

<p>More information about search response can be found at <a href="http://hl7.org/fhir/R4B/http.html#search">http://hl7.org/fhir/R4B/http.html#search</a>.</p>

<h4 id="2311363-expected-actions">2:3.113.6.3 Expected Actions</h4>

<p>The Resource Notification Subscriber shall process the results according to application-defined rules.</p>

<h3 id="231137-subscription-status-search-request-message">2:3.113.7 Subscription Status Search Request Message</h3>

<p>The Subscription Status Search Request Message is a parametrized <code class="language-plaintext highlighter-rouge">HTTP GET</code> that allows to search or retrieve, from the Resource Notification Broker, information about the status of the Subscriptions.</p>

<h4 id="2311371-trigger-events">2:3.113.7.1 Trigger Events</h4>

<p>This message can be used by the Resource Notification Subscriber to be aware of the status of one or more Subscriptions, using the $status operation.</p>

<h4 id="2311372-message-semantics">2:3.113.7.2 Message Semantics</h4>

<p>The Resource Notification Subscriber sends an <code class="language-plaintext highlighter-rouge">HTTP GET</code> request to the Resource Notification Broker.</p>

<p>The Resource Notification Subscriber Request Message shall be a FHIR operation request as defined in FHIR (http://hl7.org/fhir/operations.html) with the $status operation definition and the input parameters in Table 3.113.6.2-1, in order to be aware of the Subscriptions status.</p>

<p>The URL for this operation is one of:</p>

<blockquote>
  <p>GET  [base]/Subscription/$status</p>
</blockquote>

<blockquote>
  <p>GET  [base]/Subscription/[id]/$status</p>
</blockquote>

<p><strong>Table 2:3.113.7.2-1: Subscription Status Search Request Message Parameters</strong></p>

<table class="grid">
  <thead>
    <tr>
      <th>Name</th>
      <th>Cardinality</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>0..*</td>
      <td>id</td>
      <td>At the Instance level, this parameter is ignored. At the Resource level, one or more parameters containing a FHIR id for a Subscription to get status information for. In the absence of any specified ids, the server returns the status for all Subscriptions available to the caller. Multiple values are joined via OR (e.g., “id1” OR “id2”)</td>
    </tr>
    <tr>
      <td>status</td>
      <td>0..*</td>
      <td>code</td>
      <td>At the Instance level, this parameter is ignored. At the Resource level, a Subscription status to filter by (e.g., “active”). In the absence of any specified status values, the server does not filter contents based on the status. Multiple values are joined via OR (e.g., “error” OR “off”)</td>
    </tr>
  </tbody>
</table>

<p>The Resource Notification Subscriber may provide the optional parameter “_format” to specify the desired MIME-types in the response message. The Resource Notification Broker should accept <code class="language-plaintext highlighter-rouge">application/fhir+xml</code> and <code class="language-plaintext highlighter-rouge">application/fhir+json</code> as _format parameters.  For example, indicating <code class="language-plaintext highlighter-rouge">application/fhir+json</code> could result in the response from the Resource Notification Broker being a json FHIR Bundle with all the content encoded as json FHIR resources.</p>

<h4 id="2311373-expected-actions">2:3.113.7.3 Expected Actions</h4>

<p>The Resource Notification Broker who received the message shall process the request and respond with a Resource Subscription Search Response Message.</p>

<p>After receiving a Subscription Status Search Request Message, the Resource Notification Broker shall return a Bundle with the SubscriptionStatus Resources related to the Subscriptions that matched the query parameters in the request message.</p>

<h3 id="231138-subscription-status-search-response-message">2:3.113.8 Subscription Status Search Response Message</h3>

<p>The Resource Notification Broker returns an HTTP status code appropriate to the processing as well as a Bundle containing a list of the matching SubscriptionStatus resources.</p>

<h4 id="2311381-trigger-events">2:3.113.8.1 Trigger Events</h4>

<p>The Resource Notification Broker completed the processing of the Subscription Status Search Request Message.</p>

<h4 id="2311382-message-semantics">2:3.113.8.2 Message Semantics</h4>

<p>The response shall adhere to the FHIR Bundle constraints specified in ITI TF-2x: <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.1-resource-bundles">Appendix Z.7</a></p>

<p>Based on the query results, the Resource Notification Broker will either return an error or success. Guidance on handling Access Denied related to the use of 200, 403, and 404 can be found in ITI TF-2x: <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.7-guidance-on-access-denied-results">Appendix Z.7</a>. When the Resource Notification Broker needs to report an error, it shall use HTTP error response codes and should include a FHIR OperationOutcome with more details on the failure. See FHIR https://hl7.org/fhir/R4B/http.html and https://hl7.org/fhir/R4B/operationoutcome.html.</p>

<p>If the $status operation request is processed successfully the response shall be an <code class="language-plaintext highlighter-rouge">HTTP 200</code> status code. The Resource Subscription Search Response message shall be a Bundle Resource that shall have:</p>

<ul>
  <li><a href="StructureDefinition-IHE.DSUBm.StatusOperation-Bundle.html">SubscriptionStatus Bundle</a>
    <ul>
      <li>the <code class="language-plaintext highlighter-rouge">Bundle.type</code> element valued <code class="language-plaintext highlighter-rouge">searchset</code></li>
      <li>zero or more entries containing the <a href="StructureDefinition-IHE.DSUBm.SubscriptionStatus-StatusOperation.html">SubscriptionStatus</a> Resources for the $status operation;</li>
      <li>zero or one OperationOutcome Resource that contains warnings, if the Resource Subscription Broker is sending warnings.</li>
    </ul>
  </li>
</ul>

<h4 id="2311383-expected-actions">2:3.113.8.3 Expected Actions</h4>

<p>The Resource Notification Subscriber shall process the results according to application-defined rules.</p>

<h3 id="231139-subscription-events-search-request-message">2:3.113.9 Subscription Events Search Request Message</h3>

<p>The Resource Notification Subscriber Request Message is a parametrized <code class="language-plaintext highlighter-rouge">HTTP GET</code> that allows to retrieve, from the Resource Notification Broker, the events about a specific Subscription that have occurred.</p>

<h4 id="2311391-trigger-events">2:3.113.9.1 Trigger Events</h4>

<p>When the Subscription Resource is known, this message can be used by the Resource Notification Subscriber to be aware of previous events related to that Subscription, using the $events operation.</p>

<h4 id="2311392-message-semantics">2:3.113.9.2 Message Semantics</h4>

<p>The Resource Notification Subscriber sends an <code class="language-plaintext highlighter-rouge">HTTP GET</code> request to the Resource Notification Broker.</p>

<p>The Subscription Events Search Request Message shall be a FHIR operation request as defined in FHIR (http://hl7.org/fhir/operations.html) with the $events operation definition and the input parameters in Table 3.113.7.2-1, in order to be aware of previous events related to a Subscription.</p>

<p>The URL for this operation is:</p>

<blockquote>
  <p>GET  [base]/Subscription/[id]/$events</p>
</blockquote>

<p><strong>Table 2:3.113.9.2-1: Subscription Events Search Request Message Parameters</strong></p>

<table class="grid">
  <thead>
    <tr>
      <th>Name</th>
      <th>Cardinality</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>eventsSinceNumber</td>
      <td>0..1</td>
      <td>string</td>
      <td>The starting event number, inclusive of this event (lower bound)</td>
    </tr>
    <tr>
      <td>eventsUntilNumber</td>
      <td>0..1</td>
      <td>string</td>
      <td>The ending event number, inclusive of this event (upper bound)</td>
    </tr>
    <tr>
      <td>content</td>
      <td>0..1</td>
      <td>code</td>
      <td>Requested content style of returned data. Codes from backport-content-value-set (e.g., empty, id-only, full-resource). This is a hint to the server what a client would prefer, and MAY be ignored</td>
    </tr>
  </tbody>
</table>

<p>The Resource Notification Subscriber may provide the optional parameter “_format” to specify the desired MIME-types in the response message. The Resource Notification Broker should accept <code class="language-plaintext highlighter-rouge">application/fhir+xml</code> and <code class="language-plaintext highlighter-rouge">application/fhir+json</code> as _format parameters.  For example, indicating <code class="language-plaintext highlighter-rouge">application/fhir+json</code> could result in the response from the Resource Notification Broker being a json FHIR Bundle with all the content encoded as json FHIR resources.</p>

<h4 id="2311393-expected-actions">2:3.113.9.3 Expected Actions</h4>

<p>The Resource Notification Broker who received the message shall process the request and respond with a Resource Subscription Events Search Response Message.</p>

<p>After receiving a Subscription Events Search Request Message, the Resource Notification Broker shall return a Bundle with the SubscriptionStatus Resource and the previous events related to the Subscription that match the query parameters in the request message. The Resource Notification Broker may use implementation-specific criteria to restrict availability of events (e.g., most recent 10 events, events within the past 30 days, only the events from the last $events operation performed by a Resource Notification Subscriber, etc.).</p>

<h3 id="2311310-subscription-events-search-response-message">2:3.113.10 Subscription Events Search Response Message</h3>

<p>The Resource Notification Broker returns an HTTP status code appropriate to the processing as well as a Bundle containing the events.</p>

<h4 id="23113101-trigger-events">2:3.113.10.1 Trigger Events</h4>

<p>The Resource Notification Broker completed the processing of the Subscription Events Search Request Message.</p>

<h4 id="23113102-message-semantics">2:3.113.10.2 Message Semantics</h4>

<p>The response shall adhere to the FHIR Bundle constraints specified in ITI TF-2x: <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.1-resource-bundles">Appendix Z.7</a></p>

<p>Based on the query results, the Resource Notification Broker will either return an error or success. Guidance on handling Access Denied related to the use of 200, 403, and 404 can be found in ITI TF-2x: <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.7-guidance-on-access-denied-results">Appendix Z.7</a>. When the Resource Notification Broker needs to report an error, it shall use HTTP error response codes and should include a FHIR OperationOutcome with more details on the failure. See FHIR https://hl7.org/fhir/R4B/http.html and https://hl7.org/fhir/R4B/operationoutcome.html.</p>

<p>If the $events operation request is processed successfully the response shall be an <code class="language-plaintext highlighter-rouge">HTTP 200</code> status code. The Resource Subscription Search Response message shall be a Bundle Resource that shall have:</p>

<ul>
  <li><a href="StructureDefinition-IHE.DSUBm.EventsOperation-Bundle.html">SubscriptionEvent Bundle</a>
    <ul>
      <li>the <code class="language-plaintext highlighter-rouge">Bundle.type</code> element valued <code class="language-plaintext highlighter-rouge">history</code></li>
      <li>in the first the first entry the <a href="StructureDefinition-IHE.DSUBm.SubscriptionStatus-EventsOperation.html">SubscriptionStatus</a> for the $events operation;</li>
      <li>zero or more additional entries, with either URLs or resources representing contents, depending on the <code class="language-plaintext highlighter-rouge">content</code> query parameter in the request and the <code class="language-plaintext highlighter-rouge">Subscription.payload.content</code> and the <code class="language-plaintext highlighter-rouge">notificationShape</code> element defined in the Topic of the Subscription.</li>
    </ul>
  </li>
</ul>

<h4 id="23113103-expected-actions">2:3.113.10.3 Expected Actions</h4>

<p>The Resource Notification Subscriber shall process the results according to application-defined rules.</p>

<h3 id="23113104-capabilitystatement-resource">2:3.113.10.4 CapabilityStatement Resource</h3>

<p>The Resource Notification Subscriber implementing this transaction shall provide a CapabilityStatement Resource as described in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.3-capabilitystatement-resource">ITI TF-2x: Appendix Z.3</a> indicating the transaction has been implemented. 
The possible CapabilityStatements for the Resource Notification Subscriber ar listed in Section <a href="volume-1.html#154112-resource-notification-subscriber">1:54.1.1.2 Resource Notification Subscriber</a>.</p>

<p>The Resource Notification Broker implementing this transaction shall provide a CapabilityStatement Resource as described in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.3-capabilitystatement-resource">ITI TF-2x: Appendix Z.3</a> indicating the transaction has been implemented. 
The possible CapabilityStatements for the Resource Notification Broker ar listed in Section <a href="volume-1.html#154111-resource-notification-broker">1:54.1.1.1 Resource Notification Broker</a>.</p>

<h3 id="23113105-security-considerations">2:3.113.10.5 Security Considerations</h3>

<p>See <a href="volume-1.html#1545-security-considerations">DSUBm Security Considerations</a>.</p>

<p>The implementers should be aware that a specific Resource Notification Subscriber may acquire sensitive information if searching for Subscriptions created by other Subscribers. 
The Resource Notification Broker should follow an implementing policy in order to allow or prohibit the search for Subscription resources created by other Subscribers.</p>

<p>It’s highly recommended that the Resource Notification Subscriber should use some form of authentication method when searching for existing Subscription. The Resource Notification Broker should always verify the authentication token used in this transaction before returning the information requested.</p>

<h4 id="231131051-security-audit-considerations">2:3.113.10.5.1 Security Audit Considerations</h4>

<p>The Resource Notification Subscriber, when grouped with <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-9.html">ATNA</a> Secure Node or Secure Application Actor, shall be able to record fundamental AuditEvents for:</p>
<ul>
  <li><a href="https://profiles.ihe.net/ITI/BALP/index.html">BALP</a> <a href="https://profiles.ihe.net/ITI/BALP/1.1.2/StructureDefinition-IHE.BasicAudit.Query.html">Query</a>, when a search interaction is performed;</li>
  <li><a href="https://profiles.ihe.net/ITI/BALP/index.html">BALP</a> <a href="https://profiles.ihe.net/ITI/BALP/1.1.2/StructureDefinition-IHE.BasicAudit.Read.html">Read</a>, when a read interaction is performed.</li>
</ul>

<p>The Resource Notification Broker, when grouped with <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-9.html">ATNA</a> Secure Node or Secure Application Actor, shall be able to record fundamental AuditEvents for:</p>
<ul>
  <li><a href="https://profiles.ihe.net/ITI/BALP/index.html">BALP</a> <a href="https://profiles.ihe.net/ITI/BALP/1.1.2/StructureDefinition-IHE.BasicAudit.Query.html">Query</a>, when a search interaction is performed;</li>
  <li><a href="https://profiles.ihe.net/ITI/BALP/index.html">BALP</a> <a href="https://profiles.ihe.net/ITI/BALP/1.1.2/StructureDefinition-IHE.BasicAudit.Read.html">Read</a>, when a read interaction is performed.</li>
</ul>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="ITI-112.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="ITI-114.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2023+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.ihe.net/ihe_domains/it_infrastructure/">IHE IT Infrastructure Technical Committee</a>.  Package ihe.iti.dsubm#1.0.0-comment based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R5/">FHIR 4.3.0</a>. Generated <span title="Fri, Nov 17, 2023 09:35-0600">2023-11-17</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.DSUBm/issues/new/choose">New Issue</a> | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.DSUBm/issues">Issues</a>
                
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://profiles.ihe.net/ITI/DSUBm/history.html">Version History</a></a> |
                 <a style="color: var(--footer-hyperlink-text-color)" rel="license" href="https://profiles.ihe.net/GeneralIntro/ch-9.html"><img style="border-style: none;" alt="CC0" src="assets/images/cc-by.png" height="17"/></a> |
                <!-- <a style="color: var(--footer-hyperlink-text-color)" href="searchform.html">Search</a> | -->
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://www.ihe.net/resources/public_comment/">Propose a change<img alt="external" style="vertical-align: baseline" src="external.png"/></a>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-HLBNC861DJ');
</script>

          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->


  
    
  


  
    
  



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

