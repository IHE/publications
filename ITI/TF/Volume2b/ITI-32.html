<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta charset="utf-8" />
    <title>IHE_ITI_TF_Rev16-0_Vol2b_FT</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <p>
      <img src="media/image1.jpeg" class="IHE logo" alt="IHE_LOGO_for_tf-docs" />
    </p>
    <p>IHE IT Infrastructure (ITI)</p>
    <p>Technical Framework</p>
    <p>Revision 16.0 – Final Text</p>
    <p>
      <hr />
    </p>
    <h2 xmlns="" id="3.32">3.32  Distribute Document Set on Media [ITI-32]</h2>
    <p xmlns="">
      <span>This section corresponds to</span>
      <span>transaction</span>
      <span />
      <span>[</span>
      <span>ITI-32</span>
      <span>]</span>
      <span>of the IHE IT Infrastructure Technical Framework. Transaction</span>
      <span>[</span>
      <span>ITI-32</span>
      <span>]</span>
      <span>is used by the Portable Media Creator to create the media content and by Portable Media Importer to read the media content.</span>
    </p>
    <h3 xmlns="" id="3.32.1">3.32.1 Scope</h3>
    <p xmlns="">
      <span>In the Distribute Document Set on Media transaction the Portable Media Creator sends information to media reading actors by means of Interchange Media where it stores the information.</span>
    </p>
    <h3 xmlns="" id="3.32.2">3.32.2 Use Case Roles</h3>
    <p xmlns="">
      <img src="media/ak3aq-ow60c.014.png" width="373" height="129" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" />
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Actor:</span>
      <span>Portable Media Creator</span>
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Role:</span>
      <span>Assemble the media content and store it on the media to be distributed.</span>
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Actor:</span>
      <span>Portable Media Importer</span>
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Role:</span>
      <span>Read the Document Submission Set content of distributed media in order to access the document(s) and the relevant metadata and perform import of the documents on the media.</span>
    </p>
    <h3 xmlns="" id="3.32.3">3.32.3 Referenced Standard</h3>
    <p xmlns="">
      <span>ITI TF-3: 4 Metadata used in Document Sharing profiles</span>
    </p>
    <p xmlns="">
      <span>DICOM PS3.10 Media Storage and File Format for Data Interchange (DICOM file format).</span>
      <a href="http://www.w3.org/TR/xhtml1" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; text-decoration:underline; color:#0000ff">http://www.w3.org/TR/xhtml1</span>
      </a>
      <span>.</span>
    </p>
    <p xmlns="">
      <span>DICOM</span>
      <span />
      <span>PS3.12 Media Formats and Physical Media for Data Interchange, Annex F</span>
      <span>–</span>
      <span>- 120mm CD-R media,</span>
      <span />
      <span>Annex R</span>
      <span>–</span>
      <span>- USB Connected Removable Devices, Annex V</span>
      <span>–</span>
      <span>- ZIP File Over Media, and Annex W</span>
      <span>–</span>
      <span>- Email Media.</span>
      <a href="http://dicom.nema.org/" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; text-decoration:underline; color:#0000ff">http://dicom.nema.org/</span>
      </a>
    </p>
    <p xmlns="">
      <span>DICOM PS3.15 Security and System Management Profiles</span>
      <span>, Annex B</span>
      <span>–</span>
      <span>-</span>
      <span />
      <span>Secure Transport Connection Profiles.</span>
      <a href="http://dicom.nema.org/" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; color:#0000ff">http://dicom.nema.org/</span>
      </a>
    </p>
    <p xmlns="">
      <span>XHTML™ 1.0 The Extensible HyperText Markup Language (Second Edition). A Reformulation of HTML 4 in XML 1.0. W3C Recommendation 26 January 2000, revised 1 August 2002.</span>
      <a href="http://www.w3.org/TR/xhtml1" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; text-decoration:underline; color:#0000ff">http://www.w3.org/TR/xhtml1</span>
      </a>
      <span>.</span>
    </p>
    <p xmlns="">
      <span>XHTML™ Basic. W3C Recommendation 19 December 2000.</span>
      <a href="http://www.w3.org/TR/xhtm-basic" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; text-decoration:underline; color:#0000ff">http://www.w3.org/TR/xhtm-basic</span>
      </a>
      <span>.</span>
    </p>
    <p xmlns="">
      <span>MDN: RFC3798 Message Disposition Notification.</span>
      <a href="http://www.rfc-editor.org/rfc/rfc3798.txt" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; text-decoration:underline; color:#0000ff">http://www.rfc-editor.org/rfc/rfc3798.txt</span>
      </a>
    </p>
    <h3 xmlns="" id="3.32.4">3.32.4 Messages</h3>
    <p xmlns="" style="font-size:10pt">
      <img src="media/ak3aq-ow60c.015.png" width="317" height="199" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" />
    </p>
    <p xmlns="">
      <span> </span>
    </p>
    <p xmlns="" style="font-size:11pt">
      <span style="font-family:Arial; font-weight:bold">Figure 3.32.4-1: Interaction Diagram</span>
    </p>
    <h4 xmlns="" id="3.32.4.1">3.32.4.1 Distribute Document Set on Media</h4>
    <p xmlns="">
      <span>This transaction defines the interchange of XDS document submission sets on media. It specifies the requirements for a directory structure, and the physical media where stored.</span>
    </p>
    <p xmlns="">
      <span>The file directory structure restrictions and file organization are specified below. These are based on industry standard file systems with restrictions chosen based on experience with demonstrated interoperability in the field of reliable exchange. These are defined in Part 10 of the DICOM standard and summarized below.</span>
    </p>
    <p xmlns="">
      <span>The media that are supported are:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>CD-R media. The physical media specification used for the storage on CD-R is a restricted subset of the widely used CD-R media. The restrictions were chosen to ensure interoperability and media reliability. The standard directory and file structure can be recorded to the CD-R media by widely available software, but this software must be set to comply with the interoperability restrictions on recording format. This media specification relies on the healthcare experience gained by CD-R media widely used in radiology and cardiology. It is defined by Annex F in Part 12 of the DICOM standard and is also used in the IHE Radiology PDI Profile for the interchange of images,</span>
      </li>
      <li>
        <span>USB Removable Devices. This media specification encompasses a wide range of USB connected flash media, removable storage devices, etc. The standard directory and file structure can be recorded onto any of these media by any system that supports the USB Removable Device type defined by the USB Implementers Forum. This specification is defined in Annex R in Part 12 of the DICOM standard.</span>
      </li>
      <li>
        <span>Email transport of ZIP files. This media specification defines the encoding of the directory and file structure as an ordinary ZIP file (maintaining the directory structure) and attaches that ZIP file to an email message. Some additional constraints are added to the email message header to facilitate recognizing the message. This specification is defined in the annexes to part 12 of the DICOM standard called: ZIP File Media and Email media. The ZIP over Email Response Option enables the Portable Media Importer to send an acknowledgment message to the Portable Media Importer.</span>
      </li>
    </ul>
    <h5 xmlns="" id="3.32.4.1.1">3.32.4.1.1 Trigger Events</h5>
    <p xmlns="">
      <span>The user at the Portable Media Creator wishes to transport information by the creation and transport of interchange media. The Portable Media Creator assembles the Interchange Media content and stores it on the media.</span>
    </p>
    <p xmlns="">
      <span>If the ZIP over Email Response Option is supported, the Portable Media Importer shall detect whether the Import was successful or not.</span>
    </p>
    <h5 xmlns="" id="3.32.4.1.2">3.32.4.1.2 Message Semantics</h5>
    <p xmlns="">
      <span>The message semantics of this transaction are described in terms of content specifications for the media.</span>
    </p>
    <p xmlns="">
      <span>The Portable Media Creator shall be able to include one or multiple Submission Set(s), including document(s) and associated metadata. Additionally</span>
      <span>,</span>
      <span>it shall include a</span>
      <span style="font-family:'Times New Roman'; font-weight:bold">README.TXT</span>
      <span>file and an</span>
      <span style="font-family:'Times New Roman'; font-weight:bold">INDEX.HTM</span>
      <span>and</span>
      <span>associated files for use to display the media content using a simple browser. It may include other files and directories that the Portable Media Importer will ignore.</span>
    </p>
    <h6 xmlns="" id="3.32.4.1.2.1">3.32.4.1.2.1 Media File system and File Naming Restrictions</h6>
    <p xmlns="">
      <span>The following restrictions are needed to ensure broad interoperability:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>Strict ISO 9660 Level 1 compliance for filenames and directories, even on non-CDR media.</span>
      </li>
      <li>
        <span>Strict ISO 9660 Level 1 compliance for recording methods on CDR media. This means no packet writing.</span>
      </li>
      <li>
        <span>Filenames should not be in lower case, nor have lower case equivalent file names encoded as Joliet or Rock Ridge extensions to the ISO 9660 file system.</span>
      </li>
      <li>
        <span>Only file and folder names referenced by the DICOMDIR file are restricted to 8 characters with no extension. Specifically, it is not permitted to name DICOM files based on their SOP Instance UID, since that would exceed the 8 character limit and use the illegal period character, and it is not permitted to add a “.dcm” extension or similar.</span>
      </li>
    </ul>
    <p xmlns="" style="font-size:9pt">
      <span>Note:</span>
      <span style="width:13.75pt; text-indent:0pt; display:inline-block"> </span>
      <span>Refer to RAD TF-3: Appendix E of the IHE Radiology Technical Framework for a reference to common implementation misinterpretations and/or errors that are detrimental to interoperability.</span>
    </p>
    <h6 xmlns="" id="3.32.4.1.2.2">3.32.4.1.2.2 Content Organization Overview</h6>
    <p xmlns="">
      <span> </span>
    </p>
    <p xmlns="">
      <img src="media/ak3aq-ow60c.016.png" width="491" height="183" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" />
    </p>
    <p xmlns="" style="font-size:11pt">
      <span style="font-family:Arial; font-weight:bold">Figure 3.32.4.1-1: General structure of the media</span>
    </p>
    <p xmlns="">
      <span>The media shall contain at the “root” directory level, as shown in the figure above:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>An IHE_XDM directory.</span>
      </li>
      <li>
        <span>Two files for helping to access the content of the media:</span>
        <span style="font-family:'Times New Roman'; font-style:italic">README.TXT</span>
        <span>and</span>
        <span style="font-family:'Times New Roman'; font-style:italic">INDEX.HTM</span>
      </li>
      <li>
        <span>An Autorun file or equivalent shall not be present in the root directory. Executable files may be present, but shall not be configured to start automatically.</span>
      </li>
    </ul>
    <p xmlns="">
      <span>As shown in the figure above, the</span>
      <span style="font-family:'Times New Roman'; font-style:italic">IHE_XDM</span>
      <span>directory shall contain one sub-directory per submission set included on the media.</span>
    </p>
    <p xmlns="">
      <span>There may be other files present on the media for other purposes, (e.g., use in compliance with the IHE Radiology</span>
      <span>Portable Data for Imaging (</span>
      <span>PDI</span>
      <span>)</span>
      <span>Profile). The presence or absence of these files shall not affect performance of this transaction.</span>
      <span>The grouping with PDI actors is described in RAD TF-3 4.47.4.1.2.3.3 for the Portable Media Creator and in RAD TF-3 4.47.4.1.3.4.1 for the Portable Media Importer.</span>
    </p>
    <p xmlns="">
      <span> </span>
    </p>
    <p xmlns="">
      <img src="media/ak3aq-ow60c.017.png" width="455" height="119" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" />
    </p>
    <p xmlns="" style="font-size:11pt">
      <span style="font-family:Arial; font-weight:bold">Figure 3.32.4.1-2: Structure of a submission set directory on the media</span>
    </p>
    <p xmlns="">
      <span>As shown on the figure above, each submission set directory shall contain:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>A</span>
        <span style="font-family:'Times New Roman'; font-style:italic">METADATA.XML</span>
        <span>file containing the XDS Registry metadata, as described in ITI TF-3: 4.3.1.2.2. This shall include the metadata as specified in ITI TF-3: Table 4.3.1-3 Metadata Attribute Optionality. This may include XDSFolder objects, associations, and other metadata contents. There is no relationship between an XDSFolder and a media directory, although some people do call media directories “folders”. The metadata for the submission set shall include unique and different submissionTime.</span>
      </li>
      <li>
        <span>One file for each “simple part” document referenced in the metadata as an XDSDocumentEntry</span>
      </li>
      <li>
        <span>One sub-directory for each “multipart” document referenced in the metadata as an XDSDocumentEntry (see ITI TF-3: Table</span>
        <span>4.2.3.2-1</span>
        <span>, attribute mimeType set to “multipart/related”)</span>
      </li>
      <li>
        <span>Potentially other files and directories that are ignored by the Portable Media Importer</span>
      </li>
    </ul>
    <p xmlns="">
      <span>The “multipart” document shall be structured as one sub-directory containing all the parts as file, including the “start” part corresponding to the main file to be open by the “multipart” document viewer. An example of “multipart” document is shown in Figure 3.32.4.1-3.</span>
    </p>
    <p xmlns="">
      <span> </span>
    </p>
    <p xmlns="">
      <img src="media/ak3aq-ow60c.018.png" width="324" height="64" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" />
    </p>
    <p xmlns="" style="font-size:11pt">
      <span style="font-family:Arial; font-weight:bold">Figure 3.32.4.1-3: Structure on the media of a directory which is functionally equivalent to  “XDS multipart document”</span>
    </p>
    <p xmlns="">
      <span>The URI element of the metadata describing a file that is present on this media shall point to the file containing the document,</span>
      <span>through a relative URI where the base URI is the directory holding the METADATA.XML file that contains the DocumentEntry.URI attribute.</span>
      <span>In</span>
      <span>cases where the files are not located within this media directory for the Submission Set, the relative</span>
      <span>URI</span>
      <span>may begin with “../”.</span>
    </p>
    <p xmlns="">
      <span>In Figure 3.32.4.1-2, the METADATA.XML file of the Submission Set stored in the SUBSET01 directory will contain many XDSDocumentEntry objects having their elements set as follows (see ITI TF-3: Table</span>
      <span>4.1-5</span>
      <span>, URI attribute for details):</span>
    </p>
    <p xmlns="" style="font-size:10pt">
      <span>&lt;ExtrinsicObject id="Document1" mimeType="text/xml"... (with URI set to “DOC00001.XML”)</span>
    </p>
    <p xmlns="" style="font-size:10pt">
      <span>&lt;ExtrinsicObject id="Document2" mimeType="text/xml"... (with URI set to “DOC00002/DOC00002.XML”)</span>
    </p>
    <p xmlns="">
      <span>The file named</span>
      <span style="font-family:'Times New Roman'; font-style:italic">INDEX.HTM</span>
      <span>in the root directory shall be encoded in compliance with the XHTML Basic recommendation from W3C. It may contain a description of the submission sets, including especially:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>Patient ID and demographics</span>
      </li>
      <li>
        <span>Source Facility information</span>
      </li>
    </ul>
    <p xmlns="" style="font-size:9pt">
      <span>Note:</span>
      <span style="width:16pt; text-indent:0pt; display:inline-block"> </span>
      <span>XDM Distribute Document Set on Media</span>
      <span>transaction</span>
      <span>does not require that all the submission sets included in the media are relative to the same patient.</span>
    </p>
    <p xmlns="">
      <span>It may also describe other content which is on the media, including the means to launch any executable that may be present on the media.</span>
    </p>
    <p xmlns="">
      <span>There shall also be a</span>
      <span style="font-family:'Times New Roman'; font-style:italic">README.TXT</span>
      <span>file located in the root directory that shall contain:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>Contact information regarding the Institution that created the media.</span>
      </li>
      <li>
        <span>Information regarding the Application that created the media.</span>
      </li>
    </ul>
    <ul xmlns="" type="disc">
      <li>
        <span>Name of the product application and software version</span>
      </li>
      <li>
        <span>Contact information of the vendor of the application that created the media</span>
      </li>
    </ul>
    <ul xmlns="" type="disc">
      <li>
        <span>General information about the overall organization of the interchange media. This is not intended to be specific to the content stored on this instance of interchange media which</span>
        <span>,</span>
        <span>if necessary</span>
        <span>,</span>
        <span>should be placed in the</span>
        <span style="font-family:'Times New Roman'; font-style:italic">INDEX.HTM</span>
        <span>file.</span>
      </li>
      <li>
        <span>Information regarding the Media Viewer application (if a Media Viewer is contained)</span>
      </li>
    </ul>
    <ul xmlns="" type="disc">
      <li>
        <span>Operating system(s) supported</span>
      </li>
      <li>
        <span>Name of the product application and software version</span>
      </li>
      <li>
        <span>Contact information of vendor that provided the Media Viewer application</span>
      </li>
      <li>
        <span>Disclaimer statement about the intended usage of the application</span>
      </li>
      <li>
        <span>List of minimum requirements</span>
      </li>
      <li>
        <span>Additional information regarding the usage of the application</span>
      </li>
    </ul>
    <p xmlns="">
      <span>Note that generally the</span>
      <span style="font-family:'Times New Roman'; font-style:italic">README.TXT</span>
      <span>file is independent of the clinical content of the media, i.e., the same</span>
      <span style="font-family:'Times New Roman'; font-style:italic">README.TXT</span>
      <span>may be included on all media created by that application at that institution. Experience has shown that this kind of</span>
      <span style="font-family:'Times New Roman'; font-style:italic">README.TXT</span>
      <span>file is very valuable for resolving problems.</span>
    </p>
    <p xmlns="">
      <span>In addition, if the Portable Media Creator implements support for the Web Content Option of the PDI Profile then the</span>
      <span style="font-family:'Times New Roman'; font-style:italic">INDEX.HTM</span>
      <span>file must meet the requirements of the PDI Profile Web Content Option.</span>
    </p>
    <p xmlns="">
      <span>The</span>
      <span style="font-family:'Times New Roman'; font-style:italic">INDEX.HTM</span>
      <span style="font-family:'Times New Roman'; font-weight:bold; font-style:italic" />
      <span>file located in the root directory shall contain:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>An informative header containing:</span>
      </li>
      <li>
        <span>Identification of the institution that created the interchange media</span>
      </li>
      <li>
        <span>Optionally, a disclaimer statement about privacy/security from the institution that created the interchange media</span>
      </li>
      <li>
        <span>a link to an entry point for accessing the web content of the IHE_PDI directory</span>
      </li>
      <li>
        <span>a link to the</span>
        <span style="font-family:'Times New Roman'; font-style:italic">README.TXT</span>
        <span>file</span>
      </li>
      <li>
        <span>a link to additional non-constrained data (if it exists)</span>
      </li>
      <li>
        <span>a manifest which lists the data that can be imported by a Portable Media Importer (i.e., all DICOM content on the media)</span>
      </li>
      <li>
        <span>a manifest which lists any patient-related data contained on the CD that cannot be imported (i.e., additional non-constrained content that doesn’t have an importable DICOM equivalent on the media).</span>
      </li>
      <li>
        <span>a link to a launch point for a DICOM viewer, if present on the interchange media</span>
      </li>
    </ul>
    <h6 xmlns="" id="3.32.4.1.2.3">3.32.4.1.2.3 Response message</h6>
    <p xmlns="">
      <span>If the ZIP over Email Response Option is supported and a response was requested, the Portable Media Importer shall send a response, based on the [MDN] mechanism, depending of the success of the Import operation:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>Success: the MDN “disposition-type” field is set to “displayed”</span>
      </li>
      <li>
        <span>Error: the MDN “disposition-type” field is set to “deleted” and the MDN “disposition-modifier” is set to “Error: xxxx” where “xxxx” is the text detailing the error.</span>
      </li>
    </ul>
    <p xmlns="" style="font-size:9pt">
      <span>Note 1:</span>
      <span style="width:9.25pt; text-indent:0pt; display:inline-block"> </span>
      <span>Older implementations of MDN might use “processed” instead of “display”. The current RFC has removed this option but Portable Media Creator should be prepared to receive it. If they receive it, they have to look in the error field to see whether there is an error.</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span>Note 2:</span>
      <span style="width:9.25pt; text-indent:0pt; display:inline-block"> </span>
      <span>The general mechanism for use of</span>
      <span>Email</span>
      <span>is described in <a href="../Volume2x/ch-20.html#Appendix T"><a href="../Volume2x/ch-20.html#Appendix T">ITI TF-2x: Appendix T</a></a> (Informative)</span>
    </p>
    <h5 xmlns="" id="3.32.4.1.3">3.32.4.1.3 Media Identification</h5>
    <p xmlns="">
      <span>The Portable Media Creator may add a human-readable identification on the outside of the physical medium, reflecting the originating institution, the time of the creation and content of the media. The method of media marking is outside the scope of this transaction.</span>
    </p>
    <p xmlns="">
      <span>If the ZIP over Email Response Option is supported, Portable Media Creator shall be configurable to include in its message header the request for a response:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>“Disposition-Notification-To:”, followed by the email address to which Portable Media Importer shall send the response</span>
      </li>
    </ul>
    <p xmlns="">
      <span>Then, the Portable Media Importer shall acknowledge this operation by sending a MDN response to the email address included in the message.</span>
    </p>
    <p xmlns="">
      <span>And finally, the Portable Media Creator shall consider that the import is successful unless:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>the disposition-modifier contains the word “error” or “failure”, case insensitive.</span>
      </li>
    </ul>
    <p xmlns="">
      <span>Note:</span>
      <span style="width:9.34pt; display:inline-block"> </span>
      <span>This transaction does not specify how errors should be processed because the variety of appropriate responses is too great.</span>
    </p>
    <p xmlns="">
      <span>If the ZIP over Email Option is supported, the subject line of the email shall contain the phrase:</span>
    </p>
    <ul xmlns="" type="disc">
      <li>
        <span>XDM/1.0/DDM</span>
      </li>
    </ul>
    <p xmlns="" style="font-size:9pt">
      <span>Note:</span>
      <span style="width:13.75pt; text-indent:0pt; display:inline-block"> </span>
      <span>In case the same Email complies also with the DICOM Email, it is recommended that the subject contains the phrase: XDM/1.0/DDM+DICOM-ZIP</span>
    </p>
    <h5 xmlns="" id="3.32.4.1.4">3.32.4.1.4 Expected Actions</h5>
    <p xmlns="">
      <span>The Portable Media Importer shall verify the integrity of the media by comparing their size and hash with the value of the corresponding entries in the METADATA.XML file of the relevant submission set directory. Mismatching documents shall be indicated to the user. Media faults shall be indicated to the user.</span>
    </p>
    <p xmlns="">
      <span>If the XDM Portable Media Importer is grouped with a Content Consumer of one or more IHE Content Profiles, that actor is able to perform its processing on the documents it is designed to support.</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span>Note:</span>
      <span style="width:16pt; text-indent:0pt; display:inline-block"> </span>
      <span>This awkward phrasing means that ability to process data on portable media is described by saying that the processing actor is grouped with a Portable Media Importer.</span>
    </p>
    <h6 xmlns="" id="3.32.4.1.4.1">3.32.4.1.4.1 Basic Patient Privacy Enforcement Option</h6>
    <p xmlns="">
      <span>If the Basic Patient Privacy Enforcement Option is implemented:</span>
    </p>
    <ol xmlns="" type="1">
      <li>
        <span>The Portable Media Creator shall populate the confidentialityCode in the document metadata with the list of values that identify the sensitivity classifications that apply to the associated document. All documents submitted shall have confidentiality codes. The confidentiality codes for different documents in the same submission may be different.</span>
      </li>
      <li>
        <span>The Portable Media Creator shall be able to be configured with the Patient Privacy Policies, Patient Privacy Policy Identifiers (OIDs) and associated information necessary to understand and enforce the policies. The details of this are product specific and not specified by IHE.</span>
      </li>
      <li>
        <span>The Portable Media Creator may have user interface or business rule capabilities to determine the appropriate confidentiality codes for each document. The details of this are product specific and not specified by IHE.</span>
      </li>
      <li>
        <span>The Portable Media Importer shall be able to be configured with the Patient Privacy Policies, Patient Privacy Policy Identifiers (OIDs) and associated information necessary to understand and enforce the policies. The meanings of the codes on the media must be provided out of band, e.g., by telephone, fax, or email. The detail of how this is done is product specific and not specified by IHE. If the documents are transferred internally within the organization or to other members of the recipient's affinity domain, appropriate internal confidentiality codes shall be applied.</span>
      </li>
      <li>
        <span>The Portable Media Creator shall be able to publish the consent documents and any applicable digital signatures that apply to the collection of content that it has created on portable media.</span>
      </li>
      <li>
        <span>The Portable Media Importer shall have the ability to coerce the confidentiality code in the metadata associated with the document from the codes used by the Exporter to the codes used by the Importer.</span>
      </li>
    </ol>
    <p xmlns="">
      <span>The Portable Media Importer shall abide by the XDS Affinity Domain Policies represented by the confidentialityCode in the metadata associated with the document. The Portable Media Creator likely will have user access controls or business rule capabilities to determine the details of how confidentiality codes apply to query results. The details of this are product specific and not specified by IHE. These rules shall reduce the query results to only those that are appropriate to the current situation for that actor and user.</span>
    </p>
    <h6 xmlns="" id="3.32.4.1.4.2">3.32.4.1.4.2 Zip over Email</h6>
    <p xmlns="">
      <span>A Portable Media Importer supporting the Zip over Email Option shall support S/MIME (see <a href="../Volume2a/ITI-19.html#3.19.3"><a href="../Volume2a/ITI-19.html#3.19.3">ITI TF-2a: 3.19.3</a></a>) to both decrypt and verify the signature of the message. The Portable Media Importer shall furthermore comply with the security process as defined in the DICOM PS3.15 Annex B.8 (Secure Use of Email Transport)</span>
      <span>.</span>
    </p>
    <h3 xmlns="" id="3.32.5">3.32.5 Security considerations</h3>
    <p xmlns="">
      <span>In the case of physical media, encryption of the CD-R or USB shall not be used.</span>
    </p>
    <p xmlns="">
      <span>If the ZIP over Email Option is supported, the transaction shall be secured by S/MIME (see</span>
      <span>the</span>
      <span>ATNA</span>
      <span>Profile</span>
      <span>) and comply with the security process as defined in the DICOM</span>
      <span>PS3.15 Annex B.8</span>
      <span>(Secure Use of Email</span>
      <span>Transport</span>
      <span>). The security process requires the use of S/MIME to both encrypt and sign the message. The encryption is used to maintain confidentiality during the transport. The signature is used to maintain integrity during transport and indicates that the sender is authorized to send the message.</span>
    </p>
    <p xmlns="">
      <span>The Portable Media Importer shall check the hash value and size as found in the</span>
      <span>Document Sharing</span>
      <span>metadata to detect corruption within the metadata or media. The Portable Media Importer shall notify the user if any errors are detected.</span>
    </p>
    <h4 xmlns="" id="3.32.5.1">3.32.5.1 Audit Record Considerations</h4>
    <p xmlns="">
      <span>The Distribute Document Set on Media Transaction is a PHI-Export for the Portable Media Creator and a PHI-Import for the Portable Media Importer as defined in ITI TF-2a:</span>
      <span>Table 3.20.4.1.1.1-1</span>
      <span>.</span>
    </p>
    <h5 xmlns="" id="3.32.5.1.1">3.32.5.1.1 Portable Media Creator Audit Message</h5>
    <p xmlns="">
      <span>The audit message for a Portable Media Creator shall comply with the specifications in Section 3.41.5.1, with the following exceptions.</span>
    </p>
    <ol xmlns="" type="1">
      <li>
        <span>Event / EventTypeCode shall be ("ITI-32", "IHE Transactions", "Distribute Document Set on Media").</span>
      </li>
    </ol>
    <ol xmlns="" start="2" type="1">
      <li>
        <span>Source / UserID is not specialized.</span>
      </li>
      <li>
        <span>Destination / UserID is not specialized.</span>
      </li>
      <li>
        <span>Destination / MediaIdentifier is required.</span>
      </li>
      <li>
        <span>Destination / MediaIdentifier / MediaType is required. The value shall be taken from CID 405, in DICOM PS3.16.</span>
      </li>
      <li>
        <span>SubmissionSet / ParticipantObjectIDTypeCode shall be ("ITI-32", "IHE Transactions", "Distribute Document Set on Media").</span>
      </li>
    </ol>
    <h5 xmlns="" id="3.32.5.1.2">3.32.5.1.2 Portable Media Importer Audit Message</h5>
    <p xmlns="">
      <span>The audit message for a Portable Media Importer shall comply with the specifications in Section 3.41.5.2, with the following exceptions.</span>
    </p>
    <ol xmlns="" type="1">
      <li>
        <span>Event / EventTypeCode shall be ("ITI-32", "IHE Transactions", "Distribute Document Set on Media").</span>
      </li>
    </ol>
    <ol xmlns="" start="2" type="1">
      <li>
        <span>Source</span>
        <span>/ UserID is not specialized.</span>
      </li>
      <li>
        <span>Source</span>
        <span>/ MediaIdentifier is required.</span>
      </li>
      <li>
        <span>Source</span>
        <span>/ MediaIdentifier / MediaType is required. The value shall be taken from CID 405, in DICOM PS3.16.</span>
      </li>
      <li>
        <span>Destination / UserID is not specialized.</span>
      </li>
      <li>
        <span>SubmissionSet / ParticipantObjectIDTypeCode shall be ("ITI-32", "IHE Transactions", "Distribute Document Set on Media").</span>
      </li>
    </ol>
    <p xmlns="">
      <span> </span>
    </p>
  </body>
</html>
