<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta charset="utf-8" />
    <title>IHE_ITI_TF_Rev16-0_Vol2b_FT</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <p>
      <img src="media/image1.jpeg" class="IHE logo" alt="IHE_LOGO_for_tf-docs" />
    </p>
    <p>IHE IT Infrastructure (ITI)</p>
    <p>Technical Framework</p>
    <p>Revision 16.0 – Final Text</p>
    <p>
      <hr />
    </p>
    <h2 xmlns="" id="3.34">3.34 Retrieve Form [ITI-34]</h2>
    <p xmlns="">This section corresponds to transaction [ITI-34] of the IHE IT Infrastructure Technical Framework. Transaction [ITI-34] is used by the Form Filler and Form Manager or Form Processor Actors.</p>
    <h3 xmlns="" id="3.34.1">3.34.1 Scope</h3>
    <p xmlns="">This transaction involves a Form Filler requesting a form from a Form Manager or Form Processor. The Form Filler has a formID, and possibly additional workflow information, obtained by a means that is outside the scope of this transaction. The Form Filler may also provide a form instance id to reference a previously submitted form. The Form Manager or Form Processor will return a form or URL corresponding to the given formID, and optionally a form instance id, or else it returns an error response. Forms are defined and constrained below by the format options.</p>
    <h3 xmlns="" id="3.34.2">3.34.2 Use Case Roles</h3>
    <img xmlns="" src="media/ak3aq-ow60c.019.png" width="550" height="129" alt="" />
    <p xmlns="">
      <span style="font-weight:bold">Actor:</span>
      <span>Form Filler</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Role:</span>
      <span>A forms display and editing system capable of allowing form fields to be completed.</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Actor:</span>
      <span>Form Manager</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Role:</span>
      <span>A system that provides forms based upon requests that provide specific formIDs, and optionally additional work flow data. . Form data is submitted to a Form Receiver.</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Actor</span>
      <span>: Form Processor</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Role</span>
      <span>: A system that provides forms based upon requests that provide specific formIDs, and optionally additional work flow data. Form data from this actor shall be submitted back to itself.</span>
    </p>
    <h3 xmlns="" id="3.34.3">3.34.3 Referenced Standards</h3>
    <p xmlns="">Implementors of this transaction shall comply with all requirements described in <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>: Web Services for IHE Transactions.</p>
    <p xmlns="">
      <span>RFC1738, Uniform Resource Locators (URL), December 1994,</span>
      <a href="http://www.faqs.org/rfcs/rfc1738.html" style="text-decoration:none">
        <span style="text-decoration:underline">http://www.faqs.org/rfcs/rfc1738.html</span>
      </a>
    </p>
    <p xmlns="">RFC2616 HyperText Transfer Protocol HTTP/1.1</p>
    <p xmlns="">Extensible Markup Language (XML) 1.0 (Second Edition). W3C Recommendation 6 October 2000. http://www.w3.org/TR/REC-xml.</p>
    <p xmlns=""><a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a> Web Services for IHE Transactions</p>
    <p xmlns="">
      <span>XForms 1.1, W3C Working Draft.</span>
      <a href="http://www.w3.org/TR/2004/WD-xforms11-20041115/" style="text-decoration:none">
        <span style="text-decoration:underline">http://www.w3.org/TR/2004/WD-xforms11-20041115/</span>
      </a>
    </p>
    <p xmlns="">XHTML™ 1.0 The Extensible HyperText Markup Language (Second Edition).A Reformulation of HTML 4 in XML 1.0. W3C Recommendation 26 January 2000, revised 1 August 2002. http://www.w3.org/TR/xhtml1.</p>
    <p xmlns="">XHTML™ Basic. W3C Recommendation 19 December 2000. http://www.w3.org/TR/xhtm-basic.</p>
    <p xmlns="">http://www.w3.org/TR/xhtml-basic</p>
    <h3 xmlns="" id="3.34.4">3.34.4 Messages</h3>
    <img xmlns="" src="media/ak3aq-ow60c.020.png" width="533" height="241" alt="" />
    <p xmlns="" class="figureTitle">Figure 3.34.4-1: Interaction Diagram</p>
    <h4 xmlns="" id="3.34.4.1">3.34.4.1 Retrieve Form Request</h4>
    <p xmlns="">Retrieve Form involves a Form Filler requesting a form from a Form Manager or Form Processor. The Form Filler shall supply workflow data and prepopulation data. The Form Filler may also supply a form instance id.</p>
    <p xmlns="">The Retrieve Form Request shall provide an archiveURL value, as a nil value or as a URL pointing to a Form Archiver. See Section 3.34.4.1.2 for details.</p>
    <p xmlns="">The Form Filler requests that Form Filler or Form Processor use context information in the selection and/or creation of the returned form by supplying the prepopData argument with well-formed xml representing the Form Filler context. Specification of the prepopData schema is left to content profiles. This value may be nil.</p>
    <p xmlns="">The Form Filler supplies any additional workflow information to be used in the selection and/or creation of the form using the context element of the workflowData parameter. Specification of this context element is left to content profiles.</p>
    <p xmlns="">The response to a Retrieve Form Request returns the form, or reference to a form, and may return a form instance id.</p>
    <h5 xmlns="" id="3.34.4.1.1">3.34.4.1.1 Trigger Events</h5>
    <p xmlns="">The Form Filler, based upon human decision or application of a rule for automatic operation, requests a form hosted by a Form Manager or Form Processor.</p>
    <h5 xmlns="" id="3.34.4.1.2">3.34.4.1.2 Message Semantics</h5>
    <p xmlns="">Implementors of this transaction shall comply with all requirements described in <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>: Web Services for IHE Transactions. The following parameters are specified for this transaction.</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:120.1pt" class="tableHeader">Parameter Name</td>
        <td style="width:38.05pt" class="tableHeader">Optionality</td>
        <td style="width:115.2pt" class="tableHeader">Description</td>
        <td style="width:134.25pt" class="tableHeader">Value</td>
      </tr>
      <tr>
        <td style="width:120.1pt">prepopData</td>
        <td style="width:38.05pt">R</td>
        <td style="width:115.2pt">The xml context information supplied by a Form Filler for use in pre-populating form fields</td>
        <td style="width:134.25pt">This value shall be nil or a well-formed xml document.</td>
      </tr>
      <tr>
        <td style="width:120.1pt">workflowData</td>
        <td style="width:38.05pt">R</td>
        <td style="width:115.2pt">The xml representation of workflow specific values.</td>
        <td style="width:134.25pt">This value is a well-formed xml document.as defined below.</td>
      </tr>
      <tr>
        <td style="width:120.1pt">formID</td>
        <td style="width:38.05pt">R</td>
        <td style="width:115.2pt">The identifier of a form.</td>
        <td style="width:134.25pt">A string identifying the form</td>
      </tr>
      <tr>
        <td style="width:120.1pt">encodedResponse</td>
        <td style="width:38.05pt">R</td>
        <td style="width:115.2pt">Tells the Form Manager whether or not to return an encoded response</td>
        <td style="width:134.25pt">{true,false}</td>
      </tr>
      <tr>
        <td style="width:120.1pt">responseContentType</td>
        <td style="width:38.05pt">O</td>
        <td style="width:115.2pt">An XML attribute of encodedResponse which specifies the type of expected encoded response</td>
        <td style="width:134.25pt">
          <p>A string whose value is defined by content profiles.</p>
          <p>Shall not be specified when the value of encodedResponse is “false”</p>
        </td>
      </tr>
      <tr>
        <td style="width:120.1pt">archiveURL</td>
        <td style="width:38.05pt">R</td>
        <td style="width:115.2pt">Tells the Form Manager whether or not the Form Filler is exercising the Archive Option</td>
        <td style="width:134.25pt">the URL of any Form Filler identified Form Archiver or the null string</td>
      </tr>
      <tr>
        <td style="width:120.1pt">context</td>
        <td style="width:38.05pt">R</td>
        <td style="width:115.2pt">The xml specifics of workflow context</td>
        <td style="width:134.25pt">Defined by content profiles; may be nil</td>
      </tr>
      <tr>
        <td style="width:120.1pt">instanceID</td>
        <td style="width:38.05pt">R</td>
        <td style="width:115.2pt">An id value of a previously submitted instance of data.</td>
        <td style="width:134.25pt">A string identifying an instance of previously submitted data; may be nil.</td>
      </tr>
    </table>
    <p xmlns="">The contents of the prepopData parameter is defined in a prepopData schema specified by IHE content profiles. When there is no prepopData the attribute xsi:nil shall be set to “true” (see the support materials).</p>
    <p xmlns="">The content of workflowData parameter shall minimally be:</p>
    <p xmlns="" style="font-size:9pt">&lt;workflowData&gt;</p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;formID&gt;a String identifying the form&lt;/formID&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;encodedResponse&gt;false&lt;/encodedResponse&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;archiveURL /&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;context/&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;instanceID/&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">&lt;/workflowData&gt;</p>
    <p xmlns="">The responseContentType attribute may be specified only when the value of the encodedResponse parameter is “true”. The value for responseContentType attribute specifies the encoding of the response from the Form Manager or Form Processor. Acceptable values are defined by content profiles. An example of its use is to specify whether the expected response is an XML form definition or an XHTML form. Below is an example of its use:</p>
    <p xmlns="" style="font-size:9pt">&lt;workflowData&gt;</p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;formID&gt;a String identifying the form&lt;/formID&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;encodedResponse&gt;false&lt;/encodedResponse&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;archiveURL /&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;context/&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>&lt;instanceID/&gt;</span>
    </p>
    <p xmlns="" style="font-size:9pt">&lt;/workflowData&gt;</p>
    <p xmlns="">
      <span>See the schema provided with the support materials (). The workflowData may be extended by IHE content profiles with further definition of the &lt;context&gt; element.</span>
      <a href="ftp://ftp.ihe.net/TF_Implementation_Material/ITI/" style="text-decoration:none">
        <span style="text-decoration:underline">ftp://ftp.ihe.net/TF_Implementation_Material/ITI/</span>
      </a>
    </p>
    <h5 xmlns="" id="3.34.4.1.3">3.34.4.1.3 Expected Actions</h5>
    <p xmlns="">Upon receipt of the Retrieve Form request, the Form Manager or Form Processor shall parse the request and shall return the requested response in the RetrieveFormResponse element, or errors with SOAP Faults. The Form Manager shall return the form or URL based on the values of: a) the encodedResponse; b) the formID; c) any additional workflowData; d) the optionally supplied instanceID.</p>
    <p xmlns="">If encodedResponse is ‘true’, then the response from the Form Manager or Form Processor shall be either a Structured (XML) or Unstructured (non-XML) element. When the encodedResponse parameter is 'true', all anchor addresses that are not fragment identifiers shall be composed of absolute URIs.</p>
    <p xmlns="">If the responseContentType attribute is specified, then the response from the Form Manager or Form Processor shall be a Structured element with appropriate content type, for example, XML form definition or an XHTML form. The Form Manager or Form Processor shall not throw an error if it receives the optional responseContentType attribute.</p>
    <p xmlns="">If encodedResponse is ‘false’, then the response from the Form Manager or Form Processor shall be a URL element that can be used directly by a web browser for retrieval and operation of the form.</p>
    <p xmlns="">The Form Manager or Form Processor may assign and return a value for a form instanceID.</p>
    <p xmlns="">When the Form Filler provides a valid URL in the archiveURL parameter of the request, the Form Manager or Form Processor shall return a form that shall perform an Archive Form transaction upon form submission, in addition to any predefined actions associated with the form submission. As shown in Section 3.36 Archive Form, this additional archival transaction is between Form Filler and Form Archiver Actors.</p>
    <p xmlns="">When the Form Filler supplies data in the prepopData parameter, the Form Manager or Form Processor may use this information to determine the form to be returned and to pre-populate the fields of the form. The exact use of the prepopData, and the structure, is deferred to the publication of an IHE content profile.</p>
    <p xmlns="">The Form Manager or Form Processor shall use the values within the workflowData parameter, as well as the optionally supplied instanceID, to determine the form to be returned and to pre-populate the fields of the form.</p>
    <p xmlns="">The value of the formID has been previously assigned by the Form Manager or Form Processor to identify a form to be returned to the Form Filler using one of the named format options. A Form Manager or Form Processor may support multiple named options, but for each formID there is only one named option that is supported.</p>
    <p xmlns="">The Form Manager or Form Processor shall use the SOAP Faults defined in Table 3.34.4.1.3-1 when appropriate. Form Fillers shall be capable of accepting other values beyond the ones specified here.</p>
    <p xmlns="" class="tableTitle">Table 3.34.4.1.3-1: SOAP Faults</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:187.2pt" class="tableHeader">Description of error</td>
        <td style="width:52.2pt" class="tableHeader">Code</td>
        <td style="width:128.7pt" class="tableHeader">Reason Text</td>
      </tr>
      <tr style="height:11.8pt">
        <td style="width:187.2pt">There is missing information, such as no formID</td>
        <td style="width:52.2pt">Sender</td>
        <td style="width:128.7pt">Required Information Missing</td>
      </tr>
      <tr>
        <td style="width:187.2pt">No form is available</td>
        <td style="width:52.2pt">Sender</td>
        <td style="width:128.7pt">Unknown formID</td>
      </tr>
    </table>
    <p xmlns="">An example of a SOAP Fault is:</p>
    <div xmlns="" style="margin-top:6pt; border:0.75pt solid #000000; clear:both">
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">&lt;env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">       xmlns:xml="http://www.w3.org/XML/1998/namespace"&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">&lt;env:Body&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">  &lt;env:Fault&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">    &lt;env:Code&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">      &lt;env:Value&gt;env:Sender&lt;/env:Value&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">    &lt;/env:Code&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">    &lt;env:Reason&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">      &lt;env:Text xml:lang="en"&gt;Required Information Missing&lt;/env:Text&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">    &lt;/env:Reason&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">  &lt;/env:Fault&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">&lt;/env:Body&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="letter-spacing:-1pt">&lt;/env:Envelope&gt;</span>
      </p>
    </div>
    <h5 xmlns="" id="3.34.4.1.4">3.34.4.1.4 Security Considerations</h5>
    <p xmlns="">As noted in the mitigations section of <a href="../Volume1/ch-17.html#17.5">ITI TF-1: 17.5</a> Security Considerations, endpoints are free to implement TLS as needed for additional privacy and protection. Content profiles, based upon the nature of the data, may require use of ATNA.</p>
    <h4 xmlns="" id="3.34.4.2">3.34.4.2 Retrieve Form Response</h4>
    <h5 xmlns="" id="3.34.4.2.1">3.34.4.2.1 Trigger Events</h5>
    <p xmlns="">This message is triggered by a Form Manager or Form Processor responding to a Retrieve Form request.</p>
    <h5 xmlns="" id="3.34.4.2.2">3.34.4.2.2 Message Semantics</h5>
    <p xmlns="">The form or URL is returned.</p>
    <p xmlns="">The following parameters are specified for the response of this transaction:</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <td style="width:78.95pt" class="tableHeader">Element Name</td>
          <td style="width:57.35pt" class="tableHeader">Optionality</td>
          <td style="width:142.2pt" class="tableHeader">Description</td>
          <td style="width:129.1pt" class="tableHeader">Constraints</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="width:78.95pt">form</td>
          <td style="width:57.35pt">R</td>
          <td style="width:142.2pt">The xml element container for the form. The form element Shall contain one of: {Structured, Unstructured, URL} and may also contain an instanceID.</td>
          <td style="width:129.1pt">An element of type urn:ihe:iti:rfd:2007:formDataType, thus it has only child elements and no value.</td>
        </tr>
        <tr>
          <td style="width:78.95pt">form/Structured</td>
          <td style="width:57.35pt">O [Note 1]</td>
          <td style="width:142.2pt">The xml element container for the return of encoded, structured form content.</td>
          <td style="width:129.1pt">
            <p>
              <span>xs:anyThis element may be further constrained by content profiles.</span>
              <br />
              <br />
            </p>
            <p>May only be present when the Form Request has encodedResponse value of true.</p>
          </td>
        </tr>
        <tr>
          <td style="width:78.95pt">form/Unstructured</td>
          <td style="width:57.35pt">O [Note 1]</td>
          <td style="width:142.2pt">The xml element container for the return of encoded, unstructured, base64 encoded form content.</td>
          <td style="width:129.1pt">
            <p>
              <span>xs:base64BinaryThis element may be further constrained by content profiles.</span>
              <br />
              <br />
            </p>
            <p>May only be present when the Form Request has encodedResponse value of true.</p>
          </td>
        </tr>
        <tr>
          <td style="width:78.95pt">form/URL</td>
          <td style="width:57.35pt">O [Note 2]</td>
          <td style="width:142.2pt">The xml element container for the return of a pointer to the form.</td>
          <td style="width:129.1pt">
            <p>xs:anyURI</p>
            <p>Required when the Form Request has encodedResponse value of false.</p>
          </td>
        </tr>
        <tr>
          <td style="width:78.95pt">form/instanceID</td>
          <td style="width:57.35pt">O</td>
          <td style="width:142.2pt">The xml element containing the value of a form instance</td>
          <td style="width:129.1pt">xs:string</td>
        </tr>
        <tr>
          <td style="width:78.95pt">contentType</td>
          <td style="width:57.35pt">R</td>
          <td style="width:142.2pt">Has no meaning when the Form Request encodedResponse value is false.</td>
          <td style="width:129.1pt">
            <p>xs:string</p>
            <p>Required; may be nil.</p>
            <p>The value may be constrained by content profiles.</p>
          </td>
        </tr>
        <tr>
          <td style="width:78.95pt">responseCode</td>
          <td style="width:57.35pt">R</td>
          <td style="width:142.2pt">Not defined.</td>
          <td style="width:129.1pt">
            <p>xs:string</p>
            <p>Required; may be nil</p>
            <p>The value may be constrained by content profiles.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p xmlns="" style="font-size:9pt">
      <span>Note 1</span>
      <span style="font-weight:bold">:</span>
      <span>When the Form Request has encodedResponse value of true, then one of the two fields is required, and the URL field is forbidden.</span>
    </p>
    <p xmlns="" style="font-size:9pt">Note 2: When the Form Request has encodedResponse value of false, then the URL field is required, and Structured and Unstructured are forbidden.</p>
    <h5 xmlns="" id="3.34.4.2.3">3.34.4.2.3 Expected Actions</h5>
    <p xmlns="">The Form Filler shall retrieve from the URLvalue returned if the Retrieve Form encodedResponse value was false.</p>
    <p xmlns="">Regardless of the Retrieve Form encodedResponse value, the Form Filler may fill any form fields needed for form submission, and may display the form for user interaction.</p>
    <h6 xmlns="" id="3.34.4.2.3.1">3.34.4.2.3.1 XHTML Handling</h6>
    <p xmlns="">A Form Manager or Form Processor shall return a form. If the form is returned as a URL, because encodedResponse is false on the request, the form shall be formatted as XHTML using XHTML Basic and W3C HTML Compatibility Guidelines provided in the Appendix C of the W3C XHTML 1.0 Recommendation. If the form is returned as Structured content, it shall be capable of being transformed into XHTML. In all cases, the returned form shall support the Submit and all required Archive transactions.</p>
    <h6 xmlns="" id="3.34.4.2.3.2">3.34.4.2.3.2 XForm Option</h6>
    <p xmlns="">A Form Manager or Form Processor that supports the XForms Option shall additionally be capable of returning a form, whether returned as the response or referenced by a returned URL, that conforms to XForms 1.1. The host language for the XForm shall be XHTML Basic according to the W3C HTML Compatibility Guidelines provided in the Appendix C of the W3C XHTML 1.0 Recommendation. The returned form shall support the Submit and all required Archive transactions.</p>
    <h3 xmlns="" id="3.34.5">3.34.5 Protocol Requirements</h3>
    <p xmlns="">The Retrieve Form request and response shall be transmitted using Synchronous Web Services Exchange, according to the requirements specified in <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>.</p>
    <p xmlns="">The Retrieve Form transaction shall use SOAP 1.2.</p>
    <p xmlns="" style="font-size:11pt">
      <span style="font-weight:bold">WSDL Namespace Definitions</span>
    </p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:89.1pt">ihe</td>
        <td style="width:299.7pt">urn:ihe:iti:rfd:2007</td>
      </tr>
      <tr>
        <td style="width:89.1pt">soap12</td>
        <td style="width:299.7pt">http://schemas.xmlsoap.org/wsdl/soap12/</td>
      </tr>
      <tr>
        <td style="width:89.1pt">wsaw</td>
        <td style="width:299.7pt">http://www.w3.org/2005/08/addressing</td>
      </tr>
      <tr>
        <td style="width:89.1pt">xsd</td>
        <td style="width:299.7pt">http://www.w3.org/2001/XMLSchema</td>
      </tr>
    </table>
    <p xmlns="">These are the requirements for the Retrieve Form transaction presented in the order in which they would appear in the WSDL definition:</p>
    <ul xmlns="">
      <li class="bullet-list1">The following types shall be imported (xds:import) in the /definitions/types section:</li>
    </ul>
    <ul xmlns="">
      <li class="bullet-list2">Namespace=”urn:ihe:iti:rfd:2007”, schema=”RFD.xsd”</li>
    </ul>
    <ul xmlns="">
      <li class="bullet-list1">The /definitions/message/part/@element attribute of the Retrieve Form Request message shall be defined as: “ihe:RetrieveFormRequest”</li>
      <li class="bullet-list1">The /definitions/message/part/@element attribute of the Retrieve Form Response message shall be defined as: “ihe:RetrieveFormResponse”</li>
      <li class="bullet-list1">The /definitions/portType/operation/input/@wsaw:Action attribute for the Retrieve Form Request message shall be defined as “urn:ihe:iti:2007:RetrieveForm”</li>
      <li class="bullet-list1">The /definitions/portType/operation/output/@wsaw:Action attribute for the Retrieve Form Response message shall be defined as: “urn:ihe:iti:2007:RetrieveFormResponse”</li>
      <li class="bullet-list1">The /definitions/binding/operation/soap12:operation/@soapActionRequired attribute shall be defined as “false”</li>
    </ul>
    <p xmlns="">These are the requirements that affect the wire format of the SOAP message. The other WSDL properties are only used within the WSDL definition and do not affect interoperability. Full sample request and response messages are in Section 3.34.5.1 Sample SOAP Messages.</p>
    <p xmlns="">An informative WSDL for the Form Manager and a full XML Schema Document for the RFD types is available online on the IHE FTP site. See <a href="../Volume2x/ch-23.html#Appendix W">ITI TF-2x: Appendix W</a>.</p>
    <h4 xmlns="" id="3.34.5.1">3.34.5.1 Sample SOAP Messages</h4>
    <p xmlns="">The samples in the following two sections show a typical SOAP request and its relative SOAP response. The sample messages also show the WS-Addressing headers &lt;Action/&gt;,</p>
    <p xmlns="">&lt;MessageID/&gt;, .; these WS-Addressing headers are populated according to <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>: Web Services for IHE Transactions. Some of the body of the SOAP message is omitted for brevity.</p>
    <h5 xmlns="" id="3.34.5.1.1">3.34.5.1.1 Sample Retrieve Form SOAP Request</h5>
    <div xmlns="" style="border:0.75pt solid #000000; clear:both">
      <p style="font-size:10pt">
        <span>&lt;soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;soap:Header&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span> </span>
        <span style="width:6pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span>&lt;wsa:To&gt;http://localhost:4040/axis2/services/someservice&lt;/wsa:To&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>    &lt;wsa:MessageID&gt;urn:uuid:76A2C3D9BCD3AECFF31217932910053&lt;/wsa:MessageID&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>    &lt;wsa:Action soap:mustUnderstand="1"&gt;urn:ihe:iti: 2007:RetrieveForm&lt;/wsa:Action&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;/soap:Header&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;soap:Body&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span>&lt;RetrieveFormRequest xmlns="urn:ihe:iti:rfd:2007"&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span>&lt;prepopData&gt;...some xml content...&lt;/prepopdata&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span>&lt;workflowData&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;formID&gt;1&lt;/formID&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;encodedResponse&gt;false&lt;/encodedResponse&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;archiveURL /&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;context /&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;instanceID /&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span>&lt;/workflowData&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span>&lt;/RetrieveFormRequest&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;/soap:Body&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span>&lt;/soap:Envelope&gt;</span>
      </p>
    </div>
    <h5 xmlns="" id="3.34.5.1.2">3.34.5.1.2 Sample Retrieve Form SOAP Response</h5>
    <div xmlns="" style="border:0.75pt solid #000000; clear:both">
      <p style="font-size:10pt">
        <span style="font-size:9pt">&lt;</span>
        <span>soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;soap:Header&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span>       </span>
        <span style="width:23.99pt;display:inline-block"> </span>
        <span>&lt;wsa:To&gt;http://localhost:4040/axis2/services/someservice&lt;/wsa:To&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>        &lt;wsa:MessageID&gt;urn:uuid:76A2C3D9BCD3AECFF31217932910053&lt;/wsa:MessageID&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>        &lt;wsa:Action soap:mustUnderstand="1"&gt;urn:ihe:iti: 2007:RetrieveFormResponse&lt;/wsa:Action&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;/soap:Header&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;soap:Body&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span>&lt;RetrieveFormResponse xmlns="urn:ihe:iti:rfd:2007"&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span>&lt;form&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;URL&gt;http://somehost/xxx/services/someForm&lt;/URL&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;instanceID&gt;1.2.3.4.5&lt;/instanceID&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:36pt"> </span>
        <span>&lt;/form&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span>&lt;contentType /&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:27.35pt"> </span>
        <span>&lt;responseCode /&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span style="width:8.65pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:18pt"> </span>
        <span>&lt;/RetrieveFormResponse&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span style="width:9.35pt;display:inline-block;-aw-tabstop-align:left;-aw-tabstop-pos:9.35pt"> </span>
        <span>&lt;/soap:Body&gt;</span>
      </p>
      <p style="font-size:10pt">
        <span>&lt;/soap:Envelope&gt;</span>
      </p>
    </div>
  </body>
</html>
