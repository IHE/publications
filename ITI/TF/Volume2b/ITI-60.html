<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta charset="utf-8" />
    <title>IHE_ITI_TF_Rev16-0_Vol2b_FT</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <p>
      <img src="media/image1.jpeg" class="IHE logo" alt="IHE_LOGO_for_tf-docs" />
    </p>
    <p>IHE IT Infrastructure (ITI)</p>
    <p>Technical Framework</p>
    <p>Revision 16.0 – Final Text</p>
    <p>
      <hr />
    </p>
    <h2 xmlns="" id="3.60">3.60 Retrieve Multiple Value Sets [ITI-60]</h2>
    <p xmlns="">This section corresponds to transaction [ITI-60] of the IHE IT Infrastructure Technical Framework. The Value Set Consumer and Value Set Repository Actors use transaction [ITI-60].</p>
    <h3 xmlns="" id="3.60.1">3.60.1 Scope</h3>
    <p xmlns="">This transaction is used by the Value Set Consumer to retrieve Value Sets from the Value Set Repository.</p>
    <h3 xmlns="" id="3.60.2">3.60.2 Use case roles</h3>
    <img xmlns="" src="media/ak3aq-ow60c.069.png" width="449" height="145" alt="" />
    <p xmlns="" class="figureTitle">Figure 3.60.2-1: Use Case Roles</p>
    <p xmlns="">
      <span style="font-weight:bold">Actors:</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Actor:</span>
      <span style="width:2.69pt;display:inline-block"> </span>
      <span>Value Set Consumer</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Role:</span>
      <span style="width:8.68pt;display:inline-block"> </span>
      <span>Requests all Value Sets that match request parameters</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Actor:</span>
      <span style="width:2.69pt;display:inline-block"> </span>
      <span>Value Set Repository</span>
    </p>
    <p xmlns="">
      <span style="font-weight:bold">Role:</span>
      <span style="width:8.68pt;display:inline-block"> </span>
      <span>Provides matching Value Sets and associated metadata</span>
    </p>
    <h3 xmlns="" id="3.60.3">3.60.3 Referenced Standards</h3>
    <p xmlns="">The referenced standards are:</p>
    <p xmlns="" class="tableTitle">Table 3.60.3-1: Referenced Standards</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:89.8pt">Appendix V</td>
        <td style="width:368.8pt">
          <p><a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a> Web Services for IHE Transactions</p>
          <p>Contains references to all Web Services standards and requirements of use</p>
        </td>
      </tr>
      <tr>
        <td style="width:89.8pt">HL7 v3 Data Type XML ITS</td>
        <td style="width:368.8pt">HL7 Version 3 Standard: XML Implementation Technology Specifications – Data Types, R1</td>
      </tr>
      <tr>
        <td style="width:89.8pt">HTTP 1.1</td>
        <td style="width:368.8pt">IETF RFC2616: Hypertext Transfer Protocol – HTTP 1.1</td>
      </tr>
      <tr>
        <td style="width:89.8pt">POSIX 1003.2</td>
        <td style="width:368.8pt">IEEE Std 1003.2 IEEE Standard for Information Technology — Portable Operating System Interface (POSIX®) — Part 2: Shell and Utilities — Amendment 1: Batch Environment -Description</td>
      </tr>
    </table>
    <h3 xmlns="" id="3.60.4">3.60.4 Messages</h3>
    <img xmlns="" src="media/ak3aq-ow60c.070.png" width="373" height="191" alt="" />
    <p xmlns="" class="figureTitle">Figure 3.60.4-1: Interaction Diagram</p>
    <h4 xmlns="" id="3.60.4.1">3.60.4.1 Retrieve Multiple Value Sets Request</h4>
    <h5 xmlns="" id="3.60.4.1.1">3.60.4.1.1 Trigger Events</h5>
    <p xmlns="">The Value Set Consumer wants to retrieve value sets and has one or more element values to be matched in the metadata that describes value sets. This could be from pre-configuration or user input. The value sets that match these element values are needed for processing by the Value Set Consumer. The Value Set Consumer sends a Retrieve Multiple Value Sets Request to the Value Set Repository. Table 3.60.4.1.1-1 summarizes the metadata elements. See the schema for precise encoding details.</p>
    <p xmlns="" class="tableTitle">Table 3.60.4.1.1-1: Metadata Summary</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <td style="width:107.1pt" class="tableHeader">Metadata Element</td>
          <td style="width:169.2pt" class="tableHeader">Description</td>
          <td style="width:70.2pt" class="tableHeader">Mandatory within Metadata returned</td>
          <td style="width:52.2pt" class="tableHeader">Usable as Selection Criterion</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="width:107.1pt">id</td>
          <td style="width:169.2pt">This is the unique identifier of the value set</td>
          <td style="width:70.2pt">Mandatory</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">displayName</td>
          <td style="width:169.2pt">This is the name of the value set</td>
          <td style="width:70.2pt">Mandatory</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Source</td>
          <td style="width:169.2pt">This is the source of the value set, identifying the originator or publisher of the information</td>
          <td style="width:70.2pt">Mandatory</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Purpose</td>
          <td style="width:169.2pt">Brief description about the general purpose of the value set</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Definition</td>
          <td style="width:169.2pt">A text definition describing how concepts in the value set were selected</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Source URI</td>
          <td style="width:169.2pt">Most sources also have a URL or document URI that provides further details regarding the value set.</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">N</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Version</td>
          <td style="width:169.2pt">A string identifying the specific version of the value set.</td>
          <td style="width:70.2pt">Mandatory</td>
          <td style="width:52.2pt">N</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Status</td>
          <td style="width:169.2pt">Active, Inactive, local extensions</td>
          <td style="width:70.2pt">Mandatory</td>
          <td style="width:52.2pt">N</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Type</td>
          <td style="width:169.2pt">
            <p>This describes the type of the value set. It shall be:</p>
            <ul type="disc" style="margin:0pt; padding-left:0pt">
              <li style="margin:2pt 3.6pt 2pt 30.74pt;padding-left:8.86pt">
                <span>Intensional,</span>
              </li>
              <li style="margin:2pt 3.6pt 2pt 30.74pt;padding-left:8.86pt">
                <span>Extensional, or</span>
              </li>
              <li style="margin:2pt 3.6pt 2pt 30.74pt;padding-left:8.86pt">
                <span>Expanded</span>
              </li>
            </ul>
            <p>Note: This is the type of the value set in the repository. The ConceptList that will also be returned is the current expansion of the value set.</p>
          </td>
          <td style="width:70.2pt">Mandatory</td>
          <td style="width:52.2pt">N</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Binding</td>
          <td style="width:169.2pt">Shall be “Static” or “Dynamic”</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">N</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Effective Date</td>
          <td style="width:169.2pt">The date when the value set is expected to be effective</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Expiration Date</td>
          <td style="width:169.2pt">The date when the value set is no longer expected to be used</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Creation Date</td>
          <td style="width:169.2pt">The date of creation of the value set</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Revision Date</td>
          <td style="width:169.2pt">The date of revision of the value set</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">Y</td>
        </tr>
        <tr>
          <td style="width:107.1pt">Group</td>
          <td style="width:169.2pt">The identifiers and keywords of the groups that include this value set. A group may also have an OID assigned.</td>
          <td style="width:70.2pt">Optional</td>
          <td style="width:52.2pt">Y</td>
        </tr>
      </tbody>
    </table>
    <h5 xmlns="" id="3.60.4.1.2">3.60.4.1.2 Message Semantics</h5>
    <p xmlns="">The Retrieve Multiple Value Sets Request shall specify retrieval selection parameters as shown in the Table 3.60.4.1.2-1. It requests retrieval of all concept lists that have metadata matching the parameters used. At least one request parameter shall be provided.</p>
    <p xmlns="" class="tableTitle">Table 3.60.4.1.2-1: The Request Parameters in the RetrieveMultipleValueSets Request</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <td style="width:92.7pt" class="tableHeader">Parameter</td>
          <td style="width:56.7pt" class="tableHeader">Parameter Format</td>
          <td style="width:65.7pt" class="tableHeader">Metadata Element</td>
          <td style="width:43.2pt" class="tableHeader">Match Type</td>
          <td style="width:56.7pt" class="tableHeader">Match Rules</td>
          <td style="width:83.7pt" class="tableHeader">Note</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="width:92.7pt">id</td>
          <td style="width:56.7pt">OID</td>
          <td style="width:65.7pt">id</td>
          <td style="width:43.2pt">OID</td>
          <td style="width:56.7pt">equals</td>
          <td style="width:83.7pt" />
        </tr>
        <tr>
          <td style="width:92.7pt">DisplayNameContains</td>
          <td style="width:56.7pt">string</td>
          <td style="width:65.7pt">Name</td>
          <td style="width:43.2pt">Regex</td>
          <td style="width:56.7pt">regex</td>
          <td style="width:83.7pt">POSIX rules</td>
        </tr>
        <tr>
          <td style="width:92.7pt">SourceContains</td>
          <td style="width:56.7pt">string</td>
          <td style="width:65.7pt">Source</td>
          <td style="width:43.2pt">Regex</td>
          <td style="width:56.7pt">regex</td>
          <td style="width:83.7pt">POSIX rules</td>
        </tr>
        <tr>
          <td style="width:92.7pt">PurposeContains</td>
          <td style="width:56.7pt">string</td>
          <td style="width:65.7pt">Purpose</td>
          <td style="width:43.2pt">Regex</td>
          <td style="width:56.7pt">regex</td>
          <td style="width:83.7pt">POSIX rules</td>
        </tr>
        <tr>
          <td style="width:92.7pt">DefinitionContains</td>
          <td style="width:56.7pt">string</td>
          <td style="width:65.7pt">Definition</td>
          <td style="width:43.2pt">Regex</td>
          <td style="width:56.7pt">regex</td>
          <td style="width:83.7pt">POSIX rules</td>
        </tr>
        <tr>
          <td style="width:92.7pt">GroupContains</td>
          <td style="width:56.7pt">string</td>
          <td style="width:65.7pt">Group</td>
          <td style="width:43.2pt">Regex</td>
          <td style="width:56.7pt">regex</td>
          <td style="width:83.7pt">POSIX rules</td>
        </tr>
        <tr>
          <td style="width:92.7pt">GroupOID</td>
          <td style="width:56.7pt">OID</td>
          <td style="width:65.7pt">Group</td>
          <td style="width:43.2pt">OID</td>
          <td style="width:56.7pt">equals</td>
          <td style="width:83.7pt">Equality match for OID attribute of a Group element</td>
        </tr>
        <tr>
          <td style="width:92.7pt">EffectiveDateBefore</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">EffectiveDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Before or equal</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">EffectiveDateAfter</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">EffectiveDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Equal or after</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">ExpirationDateBefore</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">ExpirationDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Before or equal</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">ExpirationDateAfter</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">ExpirationDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Equal or after</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">CreationDateBefore</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">CreationDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Before or equal</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">CreationDateAfter</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">CreationDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Equal or after</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">RevisionDateBefore</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">RevisionDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Before or equal</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">RevisionDateAfter</td>
          <td style="width:56.7pt">http-date</td>
          <td style="width:65.7pt">RevisionDate</td>
          <td style="width:43.2pt">date</td>
          <td style="width:56.7pt">Equal or after</td>
          <td style="width:83.7pt">Date comparison to the day</td>
        </tr>
        <tr>
          <td style="width:92.7pt">Format</td>
          <td style="width:56.7pt">String</td>
          <td style="width:65.7pt">n/a</td>
          <td style="width:43.2pt">n/a</td>
          <td style="width:56.7pt">n/a</td>
          <td style="width:83.7pt">This specifies the format for the returned information. Shall be “CE-List” if present.</td>
        </tr>
      </tbody>
    </table>
    <p xmlns="" id="3.60.4.1.3">3.60.4.1.3 Expected Actions</p>
    <p xmlns="">The Value Set Repository shall perform matching in accordance with the rules in Table 3.60.4.1.2-1.</p>
    <ul xmlns="" type="disc" style="margin:0pt; padding-left:0pt">
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>Regex matches shall compare the contents of the referenced metadata field with the regex using the POSIX matching rules. If the regex matches the field, the value set matches.</span>
      </li>
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>OID matching compares only for equal OIDs, ignoring leading zeroes.</span>
      </li>
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>Date comparisons convert the argument into a date, and compare it with the dates in the metadata using a date comparison. Equality means the same day.</span>
      </li>
    </ul>
    <p xmlns="">Any value set that matches all of the request parameters shall be included in the response.</p>
    <p xmlns="" style="font-size:9pt">
      <span>Note:</span>
      <span style="width:16pt;text-indent:0pt;display:inline-block"> </span>
      <span>Multiple queries will sometimes be needed. Rather than specify a complex query mechanism, the Retrieve Multiple Value Sets request expects the client or user to locally eliminate any extra value sets and make additional queries. Value sets are relatively small and compress very well, so these extras are not a significant communications burden. Performing the final steps of selecting the value sets based on having the full metadata present locally allows a much richer and potentially interactive selection process. It also allows a simpler and more robust server.</span>
    </p>
    <h4 xmlns="" id="3.60.4.2">3.60.4.2 Retrieve Multiple Value Sets Response</h4>
    <h5 xmlns="" id="3.60.4.2.1">3.60.4.2.1 Trigger Events</h5>
    <p xmlns="">This message will be triggered by completion of matching for a Retrieve Multiple Value Sets Request Message.</p>
    <h5 xmlns="" id="3.60.4.2.2">3.60.4.2.2 Message Semantics</h5>
    <p xmlns="">The response shall be a Retrieve Multiple Value Sets Response as specified in the XML schema defining RetrieveMultipleValueSetsResponse which can be accessed on the IHE FTP site, see <a href="../Volume2x/ch-23.html#Appendix W">ITI TF-2x: Appendix W</a>. The RetrieveMultipleValueSetsResponse element shall have one DescribedValueSet element for each matching value set found. If no matching elements are found, it shall be empty.</p>
    <p xmlns="">Each DescribedValueSet element contains:</p>
    <ul xmlns="" type="disc" style="margin:0pt; padding-left:0pt">
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">An id</span>
        <span>attribute, a mandatory OID, the OID for this value set</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">A displayName</span>
        <span>attribute, a mandatory string, the name of this value set</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">Source</span>
        <span>, an optional string, the source organization for this value set</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">SourceURI</span>
        <span>, an optional URI, a URI providing more description of this value set,</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">Purpose</span>
        <span>, an optional string, a description of the intended use of this value set</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">Definition</span>
        <span>, an optional string, a definition of the value set provided by the source</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">A version</span>
        <span>attribute, a mandatory string, a version in the format used by the source,</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">Status</span>
        <span>, an optional string, the status at time of retrieval (e.g., Active or Inactive)</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">Type,</span>
        <span>a mandatory string that indicates whether this is an intensional, extensional, or expanded value set.</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">Binding,</span>
        <span>an optional string, either static or dynamic</span>
        <span style="font-weight:bold">.</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">EffectiveDate</span>
        <span>, an optional XML-date, the initial effective date for this value set</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">ExpirationDate</span>
        <span>, an optional XML-date, the intended expiration date for this value set</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">CreationDate</span>
        <span>, an optional XML-date, the creation date of this value set,</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span style="font-weight:bold">RevisionDate</span>
        <span>, an optional XML-date, the revision date of this value set,</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>Zero or more</span>
        <span style="font-weight:bold">Group</span>
        <span>elements, where each</span>
        <span style="font-weight:bold">Group</span>
        <span>element has</span>
      </li>
    </ul>
    <ul xmlns="" type="disc" style="margin:0pt; padding-left:0pt">
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>an optional</span>
        <span style="font-weight:bold">id</span>
        <span>attribute containing the OID for the group.</span>
      </li>
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>An optional</span>
        <span style="font-weight:bold">displayName</span>
        <span>attribute</span>
        <span style="font-weight:bold">,</span>
        <span>containing the name for the group,</span>
      </li>
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>An optional</span>
        <span style="font-weight:bold">sourceOrganization</span>
        <span>attribute</span>
        <span style="font-weight:bold">,</span>
        <span>containing the name of the organization that defined the group.</span>
      </li>
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>Zero or more</span>
        <span style="font-weight:bold">Keyword</span>
        <span>elements that contain keywords associated with the group.</span>
      </li>
    </ul>
    <ul xmlns="" type="disc" style="margin:0pt; padding-left:0pt">
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>One</span>
        <span style="font-weight:bold">ConceptList</span>
        <span>, that contains</span>
      </li>
    </ul>
    <ul xmlns="" type="disc" style="margin:0pt; padding-left:0pt">
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>One or more</span>
        <span style="font-weight:bold">Concept</span>
        <span>, encoded using the HL7 CE datatype. These are the codes that are members of the expanded form of the value set.</span>
      </li>
      <li style="margin-top:6pt;margin-left:46.52pt;padding-left:7.48pt">
        <span>With an optional attribute</span>
        <span style="font-weight:bold">xml:lang</span>
        <span>to indicate the language for the displayname for these concepts.</span>
      </li>
    </ul>
    <p xmlns="">The ConceptList element and structure is the same in both the [ITI-48] and [ITI-60] transactions. The Identifier OID in the [ITI-60] response is the OID used in the [ITI-48] transaction when the value set is an expanded value set. It will not match in other cases.</p>
    <p xmlns="">A sample RetrieveMultipleValueSetsResponse is shown below:</p>
    <p xmlns="" style="font-size:9pt">
      <span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;RetrieveMultipleValueSetsResponse xmlns="urn:ihe:iti:svs:2008" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:ihe:iti:svs:2008:SVS.xsd"&gt;    &lt;DescribedValueSet id="1.2.3" displayName="placeholder" version="version1"&gt;            &lt;ConceptList xml:lang="en-US"&gt;                &lt;Concept code="code1" codeSystem="2.3.4" codeSystemName="codeSystemName1" codeSystemVersion="codeSystemVersion1" displayName="displayName1"&gt;                    &lt;/Concept&gt;                &lt;Concept code="code7" codeSystem="2.3.4" codeSystemName="codeSystemName1" codeSystemVersion="codeSystemVersion1" displayName="displayName7"&gt;                    &lt;/Concept&gt;         &lt;/ConceptList&gt;         &lt;Source&gt;Codingsource&lt;/Source&gt;</span>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
    </p>
    <p xmlns="" style="font-size:9pt">
      <span>         &lt;SourceURI&gt;http://www.codingsource.com/placeholder&lt;/SourceURI&gt;         &lt;Purpose&gt;Purpose0&lt;/Purpose&gt;         &lt;Definition&gt;Definition0&lt;/Definition&gt;         &lt;Type&gt;Expanded&lt;/Type&gt;         &lt;Binding&gt;Static&lt;/Binding&gt;         &lt;Status&gt;Status0&lt;/Status&gt;         &lt;EffectiveDate&gt;2006-05-04&lt;/EffectiveDate&gt;         &lt;ExpirationDate&gt;2011-09-04&lt;/ExpirationDate&gt;         &lt;CreationDate&gt;2006-05-04&lt;/CreationDate&gt;         &lt;RevisionDate&gt;2006-05-04&lt;/RevisionDate&gt;             &lt;Group id="2.4.5" sourceOrganization="sourceOrganization1" displayName="displayName15"&gt;                 &lt;Keyword&gt;Keyword0&lt;/Keyword&gt;                 &lt;Keyword&gt;Keyword1&lt;/Keyword&gt;             &lt;/Group&gt;             &lt;Group id="2.4.54" sourceOrganization="sourceOrganization3" displayName="displayName17"&gt;                 &lt;Keyword&gt;Keyword2&lt;/Keyword&gt;                 &lt;Keyword&gt;Keyword3&lt;/Keyword&gt;             &lt;/Group&gt;    &lt;/DescribedValueSet&gt;&lt;/RetrieveMultipleValueSetsResponse&gt;</span>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
    </p>
    <h3 xmlns="" id="3.60.5">3.60.5 Protocol Requirements</h3>
    <p xmlns="">The protocol for the Retrieve Value Set transaction describes two bindings. The first is based on SOAP 1.2, and the second is an HTTP binding. The relevant XML namespace definitions can be seen in Table 3.48.5-1 WSDL Namespace Definitions.</p>
    <p xmlns="" class="tableTitle">Table 3.60.5-1: WSDL Namespace Definitions</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:89.1pt">soap12</td>
        <td style="width:300.2pt">http://schemas.xmlsoap.org/wsdl/soap12/</td>
      </tr>
      <tr>
        <td style="width:89.1pt">wsaw</td>
        <td style="width:300.2pt">http://www.w3.org/2006/05/addressing/wsdl/</td>
      </tr>
      <tr>
        <td style="width:89.1pt">xsd</td>
        <td style="width:300.2pt">
          <p>
            <a href="http://www.w3.org/2001/XMLSchema" style="text-decoration:none">
              <span style="text-decoration:underline">http://www.w3.org/2001/XMLSchema</span>
            </a>
          </p>
        </td>
      </tr>
      <tr>
        <td style="width:89.1pt">ihe</td>
        <td style="width:300.2pt">urn:ihe:iti:svs:2008</td>
      </tr>
    </table>
    <h4 xmlns="" id="3.60.5.1">3.60.5.1 SOAP Binding</h4>
    <p xmlns="">Value Set Consumers which support the SOAP Binding Option shall follow the rules for Web Services transactions outlined in <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>. These are the requirements for the RetrieveMultipleValueSets transaction presented in the order in which they would appear in the WSDL definition:</p>
    <p xmlns="">The following types shall be imported (xsd:import) in the /definitions/types section:</p>
    <p xmlns="">namespace="urn:ihe:iti:svs:2008", schema="SVS.xsd"</p>
    <p xmlns="">
      <span>The /definitions/message/part/@element attribute of the Retrieve Value Set Request message shall be defined as “</span>
      <span style="background-color:#ffffff">ihe:RetrieveMultipleValueSetsRequest</span>
      <span>”</span>
    </p>
    <p xmlns="">
      <span>The /definitions/message/part/@element attribute of the Retrieve Value Set Response message shall be defined as “</span>
      <span style="background-color:#ffffff">ihe:RetrieveMultipleValueSet</span>
      <span>sResponse”</span>
    </p>
    <p xmlns="">
      <span>The /definitions/portType/operation/input/@wsaw:Action attribute for the Retrieve Multiple Value Sets Request message shall be defined as “</span>
      <span style="background-color:#ffffff">urn:ihe:iti:2010:</span>
      <span>RetrieveMultipleValue</span>
      <span style="background-color:#ffffff">Sets</span>
      <span>”</span>
    </p>
    <p xmlns="">
      <span>The /definitions/portType/operation/output/@wsaw:Action attribute for the Retrieve Value Set Response message shall be defined as “</span>
      <span style="background-color:#ffffff">urn:ihe:iti:2010:</span>
      <span>RetrieveMultipleValue</span>
      <span style="background-color:#ffffff">Sets</span>
      <span>Response”</span>
    </p>
    <p xmlns="">The /definitions/binding/operation/soap12:operation/@soapActionRequired attribute shall be defined as “false”</p>
    <p xmlns="">These are the requirements that affect the wire format of the SOAP message. The other WSDL properties are only used within the WSDL definition and do not affect interoperability.</p>
    <p xmlns="">Within the request message payload the &lt;ihe:RetrieveMultipleValueSetsRequest/&gt; element is defined as:</p>
    <ul xmlns="" type="disc" style="margin:0pt; padding-left:0pt">
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@id element that contains the ID of the requested Value Set within the Value Set Repository. The Value Set ID shall be formatted as an ISO OID.</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@DisplayNameContains element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@SourceContains element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@PurposeContains element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@DefinitionContains element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@GroupContains element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@GroupOID element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@EffectiveDateBefore element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@EffectiveDateAfter element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@ExpirationDateBefore element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@ExpirationDateAfter element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@CreationDateBefore element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@CreationDateAfter element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@RevisionDateBefore element</span>
      </li>
      <li style="margin-top:6pt;margin-left:28.52pt;padding-left:7.48pt">
        <span>An optional /ihe:RetrieveMultipleValueSetsRequest@RevisionDateAfter element</span>
      </li>
    </ul>
    <p xmlns="">Value Set Repositories shall include within the response message payload for the SOAP Binding Option the &lt;ihe:RetrieveMultipleValueSetsResponse/&gt; element which is described above in Section 3.60.4.2.2.</p>
    <h4 xmlns="" id="3.60.5.2">3.60.5.2 HTTP Binding</h4>
    <p xmlns="">Value Set Consumers which support the HTTP Binding Option shall use the GET method as defined in IETF RFC2616 for the Retrieve Value Set Request. Each parameter to be used for selection shall be encoded as an HTTP Get parameter.</p>
    <p xmlns="">A sample URL for the HTTP binding for a query to retrieve all value sets for a reporting purpose, with either “stroke” or “JCAHO” in the value set name looks as follows:</p>
    <p xmlns="" style="font-size:9pt">
      <span style="width:36pt;display:inline-block"> </span>
      <span>https://example.com/RetrieveMultipleValueSets?DisplayNameContains=”stroke|JCAHO”&amp;PurposeContains=”report”</span>
    </p>
    <p xmlns="">Value Set Repositories shall format the response to the HTTP GET operation as an HTTP response message as defined in RFC2616.</p>
    <p xmlns="">The Content-Type field of the HTTP header shall be “text/xml” (see Section 14.4 of IETF RFC2616).</p>
    <p xmlns="">The content of the HTTP response message shall be an XML encoded RetrieveMultipleValueSetsResponse, as described in Section 3.60.4.2.2.</p>
    <p xmlns="">
      <a name="_Toc262492443">
        <span>The Value Set Repository shall return an error code in case there are invalid request parameters. It shall return an HTTP status code of 404, with an HTTP Warning header containing warn-code of 111, and warn-text of “INV: Invalid search parameters”. See</span>
        <span>S</span>
        <span>ections 10.4.5 and 14.46 of IETF RFC2616 for more information. A search with valid request parameters that finds no matching value sets is not an error. It will return an empty QueryRetrievedValueSets</span>
      </a>
    </p>
    <h3 xmlns="" id="3.60.6">3.60.6 Security Requirements</h3>
    <p xmlns="">The value sets do not contain personal information. In some cases, the value sets are created by standards organizations with the intention that they be or publicly shared. In other cases, there may be licensing or other proprietary restrictions on their disclosure. These licenses or restrictions are at the organizational level, not at the level of individual users. This greatly reduces the security needs and eliminates privacy concerns.</p>
    <p xmlns="">For further security considerations please consult <a href="../Volume1/ch-44.html#Appendix G">ITI TF-1: Appendix G</a>.</p>
    <p xmlns="">Audit trails shall be configurable to record access to a selected list of Value Sets. In most cases, there is no need to audit the value set request activity, but there may be some exceptional cases where auditing will be needed. See Section 3.48.6.1 for audit record recommendations in those cases.</p>
    <p xmlns="">This profile does not attempt to establish rules for managing security on proprietary value sets with licensing or access restrictions.</p>
  </body>
</html>
