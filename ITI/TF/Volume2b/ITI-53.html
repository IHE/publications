<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta charset="utf-8" />
    <title>IHE_ITI_TF_Rev16-0_Vol2b_FT</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <p>
      <img src="media/image1.jpeg" class="IHE logo" alt="IHE_LOGO_for_tf-docs" />
    </p>
    <p>IHE IT Infrastructure (ITI)</p>
    <p>Technical Framework - Volume2b</p>
    <p>Revision 16.0 – Final Text</p>
    <p>
      <hr />
    </p>
    <h2 class="list-paragraph" id="3.53">3.53 Document Metadata Notify [ITI-53]</h2>
    <p>This section corresponds to transaction [ITI-53] of the IHE IT Infrastructure Technical Framework. Transaction [ITI-53] is used by the Document Metadata Notification Recipient and the Document Metadata Notification Broker Actors.</p>
    <h3 class="list-paragraph" id="3.53.1">3.53.1 Scope</h3>
    <p>This transaction delivers a notification from the Document Metadata Notification Broker to the Document Metadata Notification Recipient about an event which matches an existing subscription.</p>
    <h3 class="list-paragraph" id="3.53.2">3.53.2 Use Case Roles</h3>
    <p>
      <img src=".//media/image54.png" style="width:4.8in;height:2.07708in" alt="dsub_ucr2" />
    </p>
    <p>Actor: Document Metadata Notification Broker</p>
    <p>Role: Sends notifications to subscribed Document Metadata Notification Recipients based on received Publish transactions</p>
    <p>Actor: Document Metadata Notification Recipient</p>
    <p>Role: Receives and processes notifications about events matching a set of filter expressions.</p>
    <h3 class="list-paragraph" id="3.53.3">3.53.3 Referenced Standards</h3>
    <ul>
      <li>
        <p>
          <a href="http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=wsn">OASIS Web Services Notification Family of Standards</a>
        </p>
      </li>
      <li>
        <p>
          <a href="http://docs.oasis-open.org/wsn/wsn-ws_base_notification-1.3-spec-os.pdf">WS-BaseNotification 1.3 OASIS Standard</a>
        </p>
      </li>
      <li>
        <p>
          <a href="http://docs.oasis-open.org/wsn/wsn-ws_brokered_notification-1.3-spec-os.pdf">WS-BrokeredNotification 1.3 OASIS Standard</a>
        </p>
      </li>
      <li>
        <p>
          <a href="http://docs.oasis-open.org/wsn/wsn-ws_topics-1.3-spec-os.pdf">WS-Topics 1.3 OASIS Standard</a>
        </p>
      </li>
      <li>
        <p><a href="../Volume2b/ITI-43.html#3.43.4.2.2">ITI TF-2b: 3.43.4.2.2</a></p>
      </li>
      <li>
        <p><a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a></p>
      </li>
    </ul>
    <h3 class="list-paragraph" id="3.53.4">3.53.4 Messages</h3>
    <p>
      <img src=".//media/image55.png" style="width:3.93819in;height:2.62292in" alt="DNotify_ID" />
    </p>
    <p id="Figure 3.53.4-1">Figure 3.53.4-1: Document Metadata Notify Sequence</p>
    <h4 class="list-paragraph" id="3.53.4.1">3.53.4.1 Notify Message</h4>
    <h5 class="list-paragraph" id="3.53.4.1.1">3.53.4.1.1 Trigger</h5>
    <p>When an event occurs where the topics of the event match the filter requirements of one or more existing subscriptions, the Document Metadata Notification Broker will trigger a Notification message to the corresponding Document Metadata Notification Recipient. The description of matching subscriptions to events can be found in Section 3.52.5.2.</p>
    <h5 class="list-paragraph" id="3.53.4.1.2">3.53.4.1.2 Message Semantics</h5>
    <p>The Notify message shall comply with the requirements in the WS-BaseNotification standard. Note that the value of the WS-Addressing Action element is prescribed in the standard, and differs from the requirements of <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>.</p>
    <p>
      The Notify message convey in the
      <em>wsnt:Notify/wsnt:NotificationMessage/wsnt:Message</em>
      the event that matched with a subscription. Depending on the event which triggered the notification, there may be one or more Document Entry Objects, Folder Objects, or SubmissionSet Objects whose metadata matches the filter conditions of any particular subscription. This transaction defines the following structures for conveying a Notify message:
    </p>
    <p>
      A Full Notification, which shall be sent if the subscription request included the topic ihe:FullDocumentEntry (see Section 3.52.5.1). In this case, the notification shall consist of parts of the payload of a Register Document Set-b Transaction as defined in Section 3.42.4.1. The
      <em>&lt;lcm:SubmitObjectsRequest&gt;</em>
      element is the only child of the
      <em>wsnt:Notify/wsnt:NotificationMessage/wsnt:Message</em>
      element in this message. The
      <em>&lt;rim:RegistryObjectList&gt;</em>
      element shall be the only child of the
      <em>&lt;lcm:SubmitObjectsRequest&gt;</em>
      element. Only
      <em>&lt;rim:ExtrinsicObject&gt;</em>
      elements representing Document Entries shall be sent within the
      <em>&lt;rim:RegistryObjectList&gt;</em>
      element.
    </p>
    <p>
      A Minimal Notification, which shall be sent if the subscription request included the topic ihe:MinimalDocumentEntry. In this case, the notification shall consist of parts of the payload of a Register Document Set-b transaction as defined in Section 3.42.4.1. The
      <em>&lt;lcm:SubmitObjectsRequest&gt;</em>
      element is the only child of the
      <em>wsnt:Notify/wsnt:NotificationMessage/wsnt:Message</em>
      element in this message. The
      <em>&lt;rim:RegistryObjectList&gt;</em>
      element shall be the only child of the
      <em>&lt;lcm:SubmitObjectsRequest&gt;</em>
      element. Only
      <em>&lt;rim:ObjectRef&gt;</em>
      elements representing Document Entries shall be sent within the
      <em>&lt;rim:RegistryObjectList&gt;</em>
      element.
    </p>
    <p>
      A submissionSet Notification, which shall be sent if the subscription request included the topic ihe:SubmissionSetMetadata. In this case the response consists of parts of the payload of a Register Document Set-b Transaction as defined in Section 3.42.4.1. The
      <em>&lt;lcm:SubmitObjectsRequest&gt;</em>
      element is the only child of the
      <em>wsnt:Notify/wsnt:NotificationMessage/wsnt:Message</em>
      element in this message. The
      <em>&lt;rim:RegistryObjectList&gt;</em>
      element shall be the only child of the
      <em>&lt;lcm:SubmitObjectsRequest&gt;</em>
      element. Only one
      <em>&lt;rim:RegistryPackage&gt;</em>
      element representing the submissionSet object shall be sent within the
      <em>&lt;rim:RegistryObjectList&gt;</em>
      element and shall be characterized by classification scheme: classificationScheme="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" (that represents an object of submissionSet type).
    </p>
    <p>
      There shall be a single
      <em>wsnt:Notify/wsnt:NotificationMessage/wsnt:Message</em>
      element in this transaction. If multiple objects need to be represented in a single notification, the WS-BaseNotification standard allows this to be done.
    </p>
    <h5 class="list-paragraph" id="3.53.4.1.3">3.53.4.1.3 Expected Actions</h5>
    <p>The Document Metadata Notification Recipient shall accept the Notify message. The Notify message shall be processed according to the configuration and business logic of the actor. Possibilities include conveying the notification information to other systems and/or users.</p>
    <p>The Document Metadata Notification Broker may send the filter conditions of the subscription, and/or the address (either a logical identifier or a service address url) of the Notification Broker that produces the notification. Both of these alternatives increase certain security risks, their use should be determined by local policy for security and confidentiality.</p>
    <h5 class="list-paragraph" id="3.53.4.1.4">3.53.4.1.4 Examples</h5>
    <h6 class="list-paragraph" id="3.53.4.1.4.1">3.53.4.1.4.1 Full Notification Example (ihe:FullDocumentEntry)</h6>
    <p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</p>
    <p>&lt;s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope"</p>
    <p>xmlns:a="http://www.w3.org/2005/08/addressing"</p>
    <p>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</p>
    <p>xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"</p>
    <p>xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0"</p>
    <p>xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"</p>
    <p>xsi:schemaLocation="http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2005/08/addressing http://www.w3.org/2005/08/addressing/ws-addr.xsd http://docs.oasis-open.org/wsn/b-2 http://docs.oasis-open.org/wsn/b-2.xsd urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0 ../schema/ebRS/rim.xsd" urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0 ../schema/ebRS/lcm.xsd"&gt;</p>
    <p>&lt;s:Header&gt;</p>
    <p>&lt;a:Action&gt;http://docs.oasis-open.org/wsn/bw-2/NotificationConsumer/Notify&lt;/a:Action&gt;</p>
    <p>&lt;a:MessageID&gt;382dcdca-8e87-9fdf-8446-48fd83bca93b&lt;/a:MessageID&gt;</p>
    <p>&lt;a:To&gt;https://NotificationRecipientServer/xdsBnotification&lt;/a:To&gt;</p>
    <p>&lt;/s:Header&gt;</p>
    <p>&lt;s:Body&gt;</p>
    <p>&lt;wsnt:Notify&gt;</p>
    <p>&lt;wsnt:NotificationMessage&gt;</p>
    <p>&lt;wsnt:SubscriptionReference&gt;</p>
    <p>&lt;a:Address&gt;https://NotificationBrokerServer/Subscription/382dcdc7-8e84-9fdc-8443-48fd83bca938&lt;/a:Address&gt;</p>
    <p>&lt;/wsnt:SubscriptionReference&gt;</p>
    <p>&lt;wsnt:Topic Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple"&gt;ihe:FullDocumentEntry&lt;/wsnt:Topic&gt;</p>
    <p>&lt;wsnt:ProducerReference&gt;</p>
    <p>&lt;a:Address&gt;https://ProducerReference&lt;/a:Address&gt;</p>
    <p>&lt;/wsnt:ProducerReference&gt;</p>
    <p>&lt;wsnt:Message&gt;</p>
    <p>&lt;lcm:SubmitObjectsRequest&gt;</p>
    <p>&lt;rim:RegistryObjectList&gt;</p>
    <p>&lt;rim:ExtrinsicObject id="Document01" mimeType="text/xml" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1"&gt;</p>
    <p>...</p>
    <p>&lt;rim:Classification classificationScheme="urn:uuid:2c6b8cb7-8b2a-4051-b291-b1ae6a575ef4" classifiedObject="Document01" nodeRepresentation="44950"&gt;</p>
    <p>&lt;rim:Name&gt;</p>
    <p>&lt;rim:LocalizedString value="Appendectomy"/&gt;</p>
    <p>&lt;/rim:Name&gt;</p>
    <p>&lt;rim:Slot name="codingScheme"&gt;</p>
    <p>&lt;rim:ValueList&gt;</p>
    <p>&lt;rim:Value&gt;CPT codes&lt;/rim:Value&gt;</p>
    <p>&lt;/rim:ValueList&gt;</p>
    <p>&lt;/rim:Slot&gt;</p>
    <p>&lt;/rim:Classification&gt;</p>
    <p>...</p>
    <p>&lt;rim:ExternalIdentifier id="ei01" registryObject="Document01" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" value="'st3498702^^^&amp;amp;1.3.6.1.4.1.21367.2005.3.7&amp;amp;ISO'"&gt;</p>
    <p>&lt;rim:Name&gt;</p>
    <p>&lt;rim:LocalizedString value="XDSDocumentEntry.patientId"/&gt;</p>
    <p>&lt;/rim:Name&gt;</p>
    <p>&lt;/rim:ExternalIdentifier&gt;</p>
    <p>...</p>
    <p>&lt;rim:ExtrinsicObject&gt;</p>
    <p>&lt;/rim:RegistryObjectList&gt;</p>
    <p>&lt;/lcm:SubmitObjectsRequest&gt;</p>
    <p>&lt;/wsnt:Message&gt;</p>
    <p>&lt;/wsnt:NotificationMessage&gt;</p>
    <p>&lt;/wsnt:Notify&gt;</p>
    <p>&lt;/s:Body&gt;</p>
    <p>&lt;/s:Envelope&gt;</p>
    <h6 class="list-paragraph" id="3.53.4.1.4.2">3.53.4.1.4.2 Minimal Notification Example (ihe:MinimalDocumentEntry)</h6>
    <p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</p>
    <p>&lt;s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope"</p>
    <p>xmlns:a="http://www.w3.org/2005/08/addressing"</p>
    <p>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</p>
    <p>xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"</p>
    <p>xmlns:xds="urn:ihe:iti:xds-b:2007"</p>
    <p>xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"</p>
    <p>xsi:schemaLocation="http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2005/08/addressing http://www.w3.org/2005/08/addressing/ws-addr.xsd http://docs.oasis-open.org/wsn/b-2 http://docs.oasis-open.org/wsn/b-2.xsd urn:ihe:iti:xds-b:2007 ../../schema/IHE/XDS.b_DocumentRepository.xsd urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0 ../../schema/ebRS/rim.xsd"&gt;</p>
    <p>&lt;s:Header&gt;</p>
    <p>&lt;a:Action&gt;http://docs.oasis-open.org/wsn/bw-2/NotificationConsumer/Notify&lt;/a:Action&gt;</p>
    <p>&lt;a:MessageID&gt;382dcdca-8e87-9fdf-8446-48fd83bca93b&lt;/a:MessageID&gt;</p>
    <p>&lt;a:To&gt;https://NotificationRecipientServer/xdsBnotification&lt;/a:To&gt;</p>
    <p>&lt;/s:Header&gt;</p>
    <p>&lt;s:Body&gt;</p>
    <p>&lt;wsnt:Notify&gt;</p>
    <p>&lt;wsnt:NotificationMessage&gt;</p>
    <p>&lt;wsnt:SubscriptionReference&gt;</p>
    <p>&lt;a:Address&gt;https://NotificationBrokerServer/Subscription/382dcdc7-8e84-9fdc-8443-48fd83bca938&lt;/a:Address&gt;</p>
    <p>&lt;/wsnt:SubscriptionReference&gt;</p>
    <p>&lt;wsnt:Topic Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple"&gt;ihe:MinimalDocumentEntry&lt;/wsnt:Topic&gt;</p>
    <p>&lt;wsnt:ProducerReference&gt;</p>
    <p>&lt;a:Address&gt;https://ProducerReference&lt;/a:Address&gt;</p>
    <p>&lt;/wsnt:ProducerReference&gt;</p>
    <p>&lt;wsnt:Message&gt;</p>
    <p>&lt;lcm:SubmitObjectsRequest&gt;</p>
    <p>&lt;rim:RegistryObjectList&gt;</p>
    <p>&lt;rim:ObjectRef id="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" /&gt;</p>
    <p>&lt;/rim:RegistryObjectList&gt;</p>
    <p>&lt;/lcm:SubmitObjectsRequest&gt;</p>
    <p>&lt;/wsnt:Message&gt;</p>
    <p>&lt;/wsnt:NotificationMessage&gt;</p>
    <p>&lt;/wsnt:Notify&gt;</p>
    <p>&lt;/s:Body&gt;</p>
    <p>&lt;/s:Envelope&gt;</p>
    <h6 class="list-paragraph" id="3.53.4.1.4.3">3.53.4.1.4.3 SubmissionSet Notification Example (ihe:SubmissionSetMetadata)</h6>
    <p>
      &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      <br />
      &lt;s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope"
      <br />
      xmlns:a="http://www.w3.org/2005/08/addressing"
      <br />
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      <br />
      xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
      <br />
      xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0"
      <br />
      xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
      <br />
      xsi:schemaLocation="http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2005/08/addressing http://www.w3.org/2005/08/addressing/ws-addr.xsd http://docs.oasis-open.org/wsn/b-2 http://docs.oasis-open.org/wsn/b-2.xsd urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0 ../schema/ebRS/rim.xsd" urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0 ../schema/ebRS/lcm.xsd"&gt;
      <br />
      &lt;s:Header&gt;
      <br />
      &lt;a:Action&gt;http://docs.oasis-open.org/wsn/bw-2/NotificationConsumer/Notify&lt;/a:Action&gt;
      <br />
      &lt;a:MessageID&gt;382dcdca-8e87-9fdf-8446-48fd83bca93b&lt;/a:MessageID&gt;
      <br />
      &lt;a:To&gt;https://NotificationRecipientServer/xdsBnotification&lt;/a:To&gt;
      <br />
      &lt;/s:Header&gt;
      <br />
      &lt;s:Body&gt;
      <br />
      &lt;wsnt:Notify&gt;
      <br />
      &lt;wsnt:NotificationMessage&gt;
      <br />
      &lt;wsnt:SubscriptionReference&gt;
      <br />
      &lt;a:Address&gt;https://NotificationBrokerServer/Subscription/382dcdc7-8e84-9fdc-8443-48fd83bca938&lt;/a:Address&gt;
      <br />
      &lt;/wsnt:SubscriptionReference&gt;
      <br />
      &lt;wsnt:Topic Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple"
      <br />
      &gt;ihe:SubmissionSetMetadata&lt;/wsnt:Topic&gt;
      <br />
      &lt;wsnt:ProducerReference&gt;
      <br />
      &lt;a:Address&gt;https://ProducerReference&lt;/a:Address&gt;
      <br />
      &lt;/wsnt:ProducerReference&gt;
      <br />
      &lt;wsnt:Message&gt;
      <br />
      &lt;lcm:SubmitObjectsRequest
      <br />
      xsi:schemaLocation="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0 ../../schema/ebRS/lcm.xsd"
      <br />
      xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0"
      <br />
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      <br />
      xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
      <br />
      xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0"&gt;
      <br />
      &lt;rim:RegistryObjectList&gt;
      <br />
      &lt;rim:RegistryPackage id="SubmissionSet01"&gt;
      <br />
      <br />
      &lt;!-- here all the SubmissionSet metadata --&gt;
      <br />
      <br />
      &lt;/rim:RegistryPackage&gt;
      <br />
      &lt;rim:Classification id="cl10" classifiedObject="SubmissionSet01"
      <br />
      classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd"/&gt;
      <br />
      &lt;/rim:RegistryObjectList&gt;
      <br />
      &lt;/lcm:SubmitObjectsRequest&gt;
      <br />
      &lt;/wsnt:Message&gt;
      <br />
      &lt;/wsnt:NotificationMessage&gt;
      <br />
      &lt;/wsnt:Notify&gt;
      <br />
      &lt;/s:Body&gt;
      <br />
      &lt;/s:Envelope&gt;
    </p>
    <h3 class="list-paragraph" id="3.53.5">3.53.5 Security Considerations</h3>
    <p>
      The risk assessment for the Document Metadata Notify transaction is described in the risk assessment spreadsheet for the Document Metadata Subscription Profile, which is available from IHE at
      <a href="http://wiki.ihe.net/images/4/46/DSUB_risk_assesment.xls">http://wiki.ihe.net/images/4/46/DSUB_risk_assesment.xls</a>
      . The derived mitigations are as follows:
    </p>
    <p>Document Metadata Notification Broker and Document Metadata Notification Recipients shall be grouped with a Secure Node or Secure Application in the Audit Trail and Node Authentication (ATNA) Profile.</p>
    <p>The use of encrypted TLS is recommended when the transmission is not otherwise secured (e.g., transmission over a secure network)</p>
    <p>Additionally, it is recommended that the Document Metadata Notify transaction be associated with a SAML assertion outlining authorizations to the notification content so that the Document Metadata Notification Recipient will be able to enforce these authorizations (for example, see the Cross-Enterprise User Assertion (XUA) Profile <a href="../Volume1/ch-13.html#13">ITI TF-1:13</a>). This recommendation is highly dependent on an XDS Affinity Domain managing roles for its users correctly as most of the authorizations will be based on roles.</p>
    <h4 class="list-paragraph" id="3.53.5.1">3.53.5.1 Audit Record Considerations</h4>
    <p>The Document Metadata Notify transaction is an Export event, as defined in ITI TF-2a: Table 3.20.4.1.1.1-1. The actors involved in the transaction shall create audit data in conformance with DICOM Part 15 “Data Export”/”Data Import”, with the following exceptions.</p>
    <h5 class="list-paragraph" id="3.53.5.1.1">3.53.5.1.1 Document Metadata Notification Recipient audit message:</h5>
    <table>
      <tbody>
        <tr class="odd">
          <td />
          <td>Field Name</td>
          <td>Opt</td>
          <td>Value Constraints</td>
        </tr>
        <tr class="even">
          <td>
            <p>Event</p>
            <p>
              AuditMessage/
              <br />
              EventIdentification
            </p>
          </td>
          <td>EventID</td>
          <td>M</td>
          <td>EV(110107, DCM, “Import”)</td>
        </tr>
        <tr class="odd">
          <td />
          <td>EventActionCode</td>
          <td>M</td>
          <td>“C” (Create)</td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>EventDateTime</em>
          </td>
          <td>
            <em>M</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>EventOutcomeIndicator</em>
          </td>
          <td>
            <em>M</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>EventTypeCode</td>
          <td>M</td>
          <td>EV(“ITI-53”, “IHE Transactions”, “Document Metadata Notify”)</td>
        </tr>
        <tr class="odd">
          <td>Source (Document Metadata Notification Broker) (1)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="even">
          <td>Destination (Document Metadata Notification Recipient) (1)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="odd">
          <td>Human Requestor (0..n)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="even">
          <td>Audit Source (Document Metadata Notification Recipient) (1)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="odd">
          <td>Patient (0..1)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="even">
          <td>DocumentEntry/SubmissionSet (1..n)</td>
          <td />
          <td />
          <td />
        </tr>
      </tbody>
    </table>
    <p>Where:</p>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Source</p>
            <p>
              AuditMessage/
              <br />
              ActiveParticipant
            </p>
          </td>
          <td>UserID</td>
          <td>M</td>
          <td>When WS-Addressing is used: &lt;From/&gt;</td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>AlternativeUserID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>UserName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>UserIsRequestor</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>RoleIDCode</td>
          <td>M</td>
          <td>EV(110153, DCM, “Source”)</td>
        </tr>
        <tr class="even">
          <td />
          <td>NetworkAccessPointTypeCode</td>
          <td>
            <em>M</em>
          </td>
          <td>“1” for machine (DNS) name, “2” for IP address</td>
        </tr>
        <tr class="odd">
          <td />
          <td>NetworkAccessPointID</td>
          <td>
            <em>M</em>
          </td>
          <td>The machine name or IP address</td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Destination</p>
            <p>
              AuditMessage/
              <br />
              ActiveParticipant
            </p>
          </td>
          <td>
            <em>UserID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>AlternativeUserID</td>
          <td>M</td>
          <td>the process ID as used within the local operating system in the local system logs.</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>UserName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>UserIsRequestor</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>RoleIDCode</td>
          <td>M</td>
          <td>EV(110152, DCM, “Destination”)</td>
        </tr>
        <tr class="even">
          <td />
          <td>NetworkAccessPointTypeCode</td>
          <td>
            <em>M</em>
          </td>
          <td>“1” for machine (DNS) name, “2” for IP address</td>
        </tr>
        <tr class="odd">
          <td />
          <td>NetworkAccessPointID</td>
          <td>
            <em>M</em>
          </td>
          <td>The machine name or IP address</td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Human Requestor (if known)</p>
            <p>
              AuditMessage/
              <br />
              ActiveParticipant
            </p>
          </td>
          <td>UserID</td>
          <td>M</td>
          <td>Identity of the human that initiated the transaction.</td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>AlternativeUserID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>UserName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>UserIsRequestor</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>RoleIDCode</td>
          <td>U</td>
          <td>Access Control role(s) the user holds that allows this transaction.</td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>NetworkAccessPointTypeCode</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>NetworkAccessPointID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Audit Source</p>
            <p>
              AuditMessage/
              <br />
              AuditSourceIdentification
            </p>
          </td>
          <td>
            <em>AuditSourceID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>AuditEnterpriseSiteID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>AuditSourceTypeCode</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Patient</p>
            <p>(if-known)</p>
            <p>
              (AuditMessage/
              <br />
              ParticipantObjectIdentification)
            </p>
          </td>
          <td>ParticipantObjectTypeCode</td>
          <td>M</td>
          <td>“1” (Person)</td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectTypeCodeRole</td>
          <td>M</td>
          <td>“1” (Patient)</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectDataLifeCycle</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>ParticipantObjectIDTypeCode</em>
          </td>
          <td>
            <em>M</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectSensitivity</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectID</td>
          <td>M</td>
          <td>The patient ID in HL7 CX format.</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>ParticipantObjectQuery</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectDetail</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>DocumentEntry</p>
            <p>SubmissionSet</p>
            <p>
              (AuditMessage/
              <br />
              ParticipantObjectIdentification)
            </p>
          </td>
          <td>ParticipantObjectTypeCode</td>
          <td>M</td>
          <td>“2” (system object)</td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectTypeCodeRole</td>
          <td>M</td>
          <td>“3” (report)</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectDataLifeCycle</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectIDTypeCode</td>
          <td>M</td>
          <td>
            <p>The Document Metadata Notification Recipient shall include one of the following values, depending on the specific object in the message:</p>
            <p>EV("urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1”, “IHE XDS Metadata”, “document entry object type”)</p>
            <p>EV(“urn:uuid:34268e47-fdf5-41a6-ba33-82133c465248”, “IHE XDS Metadata”, “on-demand document entry object type”)</p>
            <p>EV(“urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd”, “IHE XDS Metadata”, ”submission set classification node”)</p>
            <p>If the specific object type cannot be determined the Document Metadata Notification Recipient shall use: EV(“urn:ihe:iti:2017:ObjectRef”, “IHE XDS Metadata”, “registry object reference”)</p>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectSensitivity</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectID</td>
          <td>
            <em>M</em>
          </td>
          <td>The value of the object's EntryUUID attribute.</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>ParticipantObjectQuery</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectDetail</em>
          </td>
          <td>
            <em>C</em>
          </td>
          <td>
            <p>
              <em>This element is required, if known:</em>
            </p>
            <p>
              <em>Type: “urn:ihe:iti:xca:2010:homeCommunityId” (literal string)</em>
            </p>
            <p>
              <em>Value: value of the homeCommunityId</em>
            </p>
          </td>
        </tr>
      </tbody>
    </table>
    <h5 class="list-paragraph" id="3.53.5.1.2">3.53.5.1.2 Document Metadata Notification Broker audit message:</h5>
    <table>
      <tbody>
        <tr class="odd">
          <td />
          <td>Field Name</td>
          <td>Opt</td>
          <td>Value Constraints</td>
        </tr>
        <tr class="even">
          <td>
            <p>Event</p>
            <p>
              AuditMessage/
              <br />
              EventIdentification
            </p>
          </td>
          <td>EventID</td>
          <td>M</td>
          <td>EV(110106, DCM, “Export”)</td>
        </tr>
        <tr class="odd">
          <td />
          <td>EventActionCode</td>
          <td>M</td>
          <td>“R” (Read)</td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>EventDateTime</em>
          </td>
          <td>
            <em>M</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>EventOutcomeIndicator</em>
          </td>
          <td>
            <em>M</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>EventTypeCode</td>
          <td>M</td>
          <td>EV(“ITI-53”, “IHE Transactions”, “Document Metadata Notify”)</td>
        </tr>
        <tr class="odd">
          <td>Source (Document Metadata Notification Broker) (1)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="even">
          <td>Destination (Document Metadata Notification Recipient) (1)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="odd">
          <td>Audit Source (Document Metadata Notification Broker) (1)</td>
          <td />
          <td />
          <td />
        </tr>
        <tr class="even">
          <td>DocumentEntry/SubmissionSet (1..n)</td>
          <td />
          <td />
          <td />
        </tr>
      </tbody>
    </table>
    <p>Where:</p>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Source</p>
            <p>
              AuditMessage/
              <br />
              ActiveParticipant
            </p>
          </td>
          <td>UserID</td>
          <td>M</td>
          <td>When WS-Addressing is used: &lt;From/&gt;</td>
        </tr>
        <tr class="even">
          <td />
          <td>AlternativeUserID</td>
          <td>M</td>
          <td>the process ID as used within the local operating system in the local system logs.</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>UserName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>UserIsRequestor</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>RoleIDCode</td>
          <td>M</td>
          <td>EV(110153, DCM, “Source”)</td>
        </tr>
        <tr class="even">
          <td />
          <td>NetworkAccessPointTypeCode</td>
          <td>
            <em>M</em>
          </td>
          <td>“1” for machine (DNS) name, “2” for IP address</td>
        </tr>
        <tr class="odd">
          <td />
          <td>NetworkAccessPointID</td>
          <td>
            <em>M</em>
          </td>
          <td>The machine name or IP address</td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Destination</p>
            <p>
              AuditMessage/
              <br />
              ActiveParticipant
            </p>
          </td>
          <td>
            <em>UserID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>AlternativeUserID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>UserName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>UserIsRequestor</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>RoleIDCode</td>
          <td>M</td>
          <td>EV(110152, DCM, “Destination”)</td>
        </tr>
        <tr class="even">
          <td />
          <td>NetworkAccessPointTypeCode</td>
          <td>
            <em>M</em>
          </td>
          <td>“1” for machine (DNS) name, “2” for IP address</td>
        </tr>
        <tr class="odd">
          <td />
          <td>NetworkAccessPointID</td>
          <td>
            <em>M</em>
          </td>
          <td>The machine name or IP address</td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>Audit Source</p>
            <p>
              AuditMessage/
              <br />
              AuditSourceIdentification
            </p>
          </td>
          <td>
            <em>AuditSourceID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>AuditEnterpriseSiteID</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>AuditSourceTypeCode</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
      </tbody>
    </table>
    <table>
      <tbody>
        <tr class="odd">
          <td>
            <p>DocumentEntry SubmissionSet</p>
            <p>
              (AuditMessage/
              <br />
              ParticipantObjectIdentification)
            </p>
          </td>
          <td>ParticipantObjectTypeCode</td>
          <td>M</td>
          <td>“2” (system object)</td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectTypeCodeRole</td>
          <td>M</td>
          <td>“3” (report)</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectDataLifeCycle</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectIDTypeCode</td>
          <td>M</td>
          <td>
            <p>The Document Metadata Notification Broker shall include one of the following values, depending on the specific object in the message:</p>
            <p>EV("urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1”, “IHE XDS Metadata”, “document entry object type”)</p>
            <p>EV(“urn:uuid:34268e47-fdf5-41a6-ba33-82133c465248”, “IHE XDS Metadata”, “on-demand document entry object type”)</p>
            <p>EV(urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd”, “IHE XDS Metadata”, ”submission set classification node”)</p>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectSensitivity</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>ParticipantObjectID</td>
          <td>M</td>
          <td>The value of the object's EntryUUID attribute.</td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectName</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="even">
          <td />
          <td>
            <em>ParticipantObjectQuery</em>
          </td>
          <td>
            <em>U</em>
          </td>
          <td>
            <em>not specialized</em>
          </td>
        </tr>
        <tr class="odd">
          <td />
          <td>
            <em>ParticipantObjectDetail</em>
          </td>
          <td>C</td>
          <td>
            <p>
              <em>This element is required, if known:</em>
            </p>
            <p>
              <em>Type: “urn:ihe:iti:xca:2010:homeCommunityId” (literal string)</em>
            </p>
            <p>
              <em>Value: value of the homeCommunityId</em>
            </p>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
