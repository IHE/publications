<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta charset="utf-8" />
    <title>IHE_ITI_TF_Rev16-0_Vol2b_FT</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <p>
      <img src="media/image1.jpeg" class="IHE logo" alt="IHE_LOGO_for_tf-docs" />
    </p>
    <p>IHE IT Infrastructure (ITI)</p>
    <p>Technical Framework</p>
    <p>Revision 16.0 – Final Text</p>
    <p>
      <hr />
    </p>
    <h2 xmlns="" id="3.41">3.41Provide and Register Document Set-b [ITI-41]</h2>
    <p xmlns="">This section corresponds to transaction [ITI-41] of the IHE Technical Framework. Provide and Register Document Set-b is used to transmit a set of documents and associated metadata. The documents and metadata might be stored for later retrieval or processed in some other way depending on the actor and workflow using the transaction.</p>
    <h3 xmlns="" id="3.41.1">3.41.1 Scope</h3>
    <p xmlns="">The Provide and Register Document Set-b transaction passes a Document Submission Request (see <a href="../Volume3/ch-1.2.html#4.2.1.5">ITI TF-3: 4.2.1.5</a>) from a Content Sender to a Content Receiver.</p>
    <h3 xmlns="" id="3.41.2">3.41.2 Actor Roles</h3>
    <p xmlns="">The Roles in this transaction are defined in the following table and may be played by the actors shown here:</p>
    <p xmlns="" class="tableTitle">Table 3.41.2-1: Actor Roles</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:79.4pt">Role:</td>
        <td style="width:376.4pt">
          <p>
            <span style="font-weight:bold">Content Sender</span>
            <span>: A system that submits documents and associated metadata to a Content Receiver.</span>
          </p>
        </td>
      </tr>
      <tr>
        <td style="width:79.4pt">Actor(s):</td>
        <td style="width:376.4pt">
          <p>The following actors may play the role of Content Sender:</p>
          <p>Document Source, Metadata-Limited Document Source</p>
        </td>
      </tr>
      <tr>
        <td style="width:79.4pt">Role:</td>
        <td style="width:376.4pt">
          <p>
            <span style="font-weight:bold">Content Receiver</span>
            <span>: A system that receives a set of documents and associated metadata.</span>
          </p>
        </td>
      </tr>
      <tr>
        <td style="width:79.4pt">Actor(s):</td>
        <td style="width:376.4pt">
          <p>The following actors may play the role of Content Receiver:</p>
          <p>Document Repository, Document Recipient</p>
        </td>
      </tr>
    </table>
    <p xmlns="">Transaction text specifies behavior for each Role. The behavior of specific Actors may also be specified when it goes beyond that of the general Role.</p>
    <h3 xmlns="" id="3.41.3">3.41.3 Referenced Standards</h3>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:60.2pt">ebRIM</td>
        <td style="width:385.7pt">
          <p>OASIS/ebXML Registry Information Model v3.0</p>
          <p>This model defines the types of metadata and content that can be stored in an ebXML Registry, a basis for and subset of Document Sharing metadata.</p>
        </td>
      </tr>
      <tr>
        <td style="width:60.2pt">ebRS</td>
        <td style="width:385.7pt">
          <p>OASIS/ebXML Registry Services Specifications v3.0</p>
          <p>This defines the services and protocols for an ebXML Registry, used as the basis for the XDS Document Registry</p>
        </td>
      </tr>
      <tr>
        <td style="width:60.2pt">MTOM</td>
        <td style="width:385.7pt">
          <p>
            <span>SOAP Message Transmission Optimization Mechanism</span>
            <a href="http://www.w3.org/TR/soap12-mtom/" style="text-decoration:none">
              <span style="text-decoration:underline">http://www.w3.org/TR/soap12-mtom/</span>
            </a>
          </p>
          <p>This is a method for optimizing the transmission and/or wire format of SOAP messages.</p>
        </td>
      </tr>
      <tr>
        <td style="width:60.2pt">XOP</td>
        <td style="width:385.7pt">
          <p>
            <span>XML-binary Optimized Packaging</span>
            <a href="http://www.w3.org/TR/2005/REC-xop10-20050125/" style="text-decoration:none">
              <span style="text-decoration:underline">http://www.w3.org/TR/2005/REC-xop10-20050125/</span>
            </a>
          </p>
          <p>This is a means of more efficiently of converting an XML Infoset with certain types of content into a stream of bytes for transmission.</p>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="width:456.7pt">
          <p>See <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a> for other referenced standards for SOAP encoding.</p>
          <p>See <a href="../Volume3/ch-1.2.html#4.2">ITI TF-3: 4.2</a> for other referenced standards for metadata element encoding.</p>
        </td>
      </tr>
    </table>
    <h3 xmlns="" id="3.41.4">3.41.4 Messages</h3>
    <img xmlns="" src="media/ak3aq-ow60c.033.png" width="525" height="202" alt="" />
    <p xmlns="" class="figureTitle">Figure 3.41.4-1: Interaction Diagram</p>
    <h4 xmlns="" id="3.41.4.1">3.41.4.1 Provide and Register Document Set-b Request</h4>
    <p xmlns="">The Provide and Register Document Set-b Request message is used to send patient specific healthcare information as a set of documents and associated metadata. Metadata enables the receiver to process the content of the message programmatically, without needing to understand the format or contents of the documents. For more details about metadata in the context of Document Sharing, see ITI TF-3: 4.</p>
    <p xmlns="">A Content Sender sends documents and associated metadata to a Content Receiver.</p>
    <h5 xmlns="" id="3.41.4.1.1">3.41.4.1.1 Trigger Events</h5>
    <p xmlns="">The Content Sender, based on a human decision or the application of a certain rule of automatic operation, wants to submit document-related information to a Content Receiver.</p>
    <h5 xmlns="" id="3.41.4.1.2">3.41.4.1.2 Message Semantics</h5>
    <p xmlns="">The Provide and Register Document Set-b Request message shall use SOAP 1.2 and MTOM with XOP encoding (labeled MTOM/XOP in this specification). Implementors of this transaction shall comply with all requirements described in: <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>: Web Services for IHE Transactions.</p>
    <p xmlns="">The use of MTOM/XOP is governed by the following rules:</p>
    <ul xmlns="">
      <li class="bullet-list1">The Content Sender shall generate the Provide and Register Document Set-b Request message in MTOM/XOP format.</li>
      <li class="bullet-list1">The Content Receiver shall accept documents in a Provide and Register Document Set-b Request message in MTOM/XOP format.</li>
    </ul>
    <p xmlns="">The Provide and Register Document Set-b request message shall contain a Submission Request, as defined in <a href="../Volume3/ch-1.1.html#4.1.4">ITI TF-3: 4.1.4</a>, and may contain documents. See <a href="../Volume3/ch-1.2.html#4.2.1.4">ITI TF-3: 4.2.1.4</a> for a description of the ebRS/ebRIM representation of a Submission Request. The metadata requirements for this Submission Request are defined in <a href="../Volume3/ch-1.3.html#4.3.1">ITI TF-3: 4.3.1</a>. The Submission Request shall contain exactly one DocumentEntry object for each Document contained in the request message, and vice versa.</p>
    <p xmlns="">If the associationType is RPLC, XFRM_RPLC, or IsSnapshotOf, the targetObject of the Relationship Association in the Submission Request shall be a DocumentEntry already in the Document Registry. All DocumentEntry objects in this Submission Request shall be Stable DocumentEntry objects and, therefore, will not be On-Demand DocumentEntry objects. Associations included in the Submission Request may reference On-Demand DocumentEntry objects that have been registered previously.</p>
    <p xmlns="">The sections in <a href="../Volume3/ch-1.1.html#4.1">ITI TF-3: 4.1</a> specify the mapping of XDS concepts to ebRS and ebRIM semantics and document metadata. A full example of document metadata submission can be found in <a href="../Volume2x/ch-23.html#Appendix W">ITI TF-2x: Appendix W</a>.</p>
    <p xmlns="">XML namespace prefixes used in text and examples below are for informational purposes only and are documented in <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>, Table V.2.4-1.</p>
    <p xmlns="">The requirements for the request message are:</p>
    <ul xmlns="">
      <li class="bullet-list1">the &lt;wsa:Action&gt; SOAP element shall contain the value urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-b</li>
      <li class="bullet-list1">the &lt;soap12:Body&gt; shall contain one &lt;xds:ProvideAndRegisterDocumentSetRequest&gt; element</li>
      <li class="bullet-list1">the &lt;xds:ProvideAndRegisterDocumentSetRequest&gt; element shall contain:</li>
    </ul>
    <ul xmlns="">
      <li class="bullet-list2">one &lt;lcm:SubmitObjectsRequest&gt; element representing the Submission Request (see <a href="../Volume3/ch-1.2.html#4.2.1.4">ITI TF-3: 4.2.1.4</a> for details of expressing a Submission Request).</li>
      <li class="bullet-list2">one &lt;xds:Document&gt; element for each &lt;rim:ExtrinsicObject&gt; contained in the &lt;lcm:SubmitObjectsRequest&gt;</li>
    </ul>
    <ul xmlns="">
      <li class="bullet-list1">the &lt;xds:Document&gt; element shall:</li>
    </ul>
    <ul xmlns="">
      <li class="bullet-list2">have an @id attribute whose value matches the value of the corresponding rim:ExtrinsicObject/@id</li>
      <li class="bullet-list2">contain the document using the xsi:base64Binary data type (Note: This is the logical representation of the document in the XML. The wire format may be different; see ITI TF-2x: Appendix V.8)</li>
    </ul>
    <p xmlns="">A full XML Schema Document for the XDS types is available online on the IHE FTP site, see <a href="../Volume2x/ch-23.html#Appendix W">ITI TF-2x: Appendix W</a>.</p>
    <p xmlns="">Below is an example of the SOAP Body for a Provide and Register Document Set-b Request message</p>
    <div xmlns="" style="border:0.75pt solid #000000; clear:both">
      <p style="font-size:9pt">
        <span>     &lt;soap12:Body&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>        &lt;xds:ProvideAndRegisterDocumentSetRequest&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>            &lt;lcm:SubmitObjectsRequest&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>                &lt;!-- Submission Request contents – See <a href="../Volume3/ch-1.2.html#4.2.1.4">ITI TF-3: 4.2.1.4</a> --&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>                &lt;rim:RegistryObjectList&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>                 &lt;!-- Registry Metadata goes here --&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>                &lt;/rim:RegistryObjectList&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>            &lt;/lcm:SubmitObjectsRequest&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>            &lt;xds:Document id="Document01"&gt;SGVyZSBpcyBteSBkb2N1bWVudA==&lt;/xds:Document&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>        &lt;/xds:ProvideAndRegisterDocumentSetRequest&gt;</span>
      </p>
      <p style="font-size:9pt">
        <span>     &lt;/soap12:Body&gt;</span>
      </p>
    </div>
    <h6 xmlns="" id="3.41.4.1.2.1">3.41.4.1.2.1 XDS Document Source Options</h6>
    <p xmlns="">The XDS Document Source may choose to support options which are listed in ITI TF-1: Table 10.2-1b and described in the sections that follow it.</p>
    <p xmlns="">If the XDS Document Source supports the Document Replacement Option, it shall be able to generate replace semantics as defined in <a href="../Volume3/ch-1.2.html#4.2.2.2.3">ITI TF-3: 4.2.2.2.3</a>.</p>
    <p xmlns="">If the XDS Document Source supports the Document Addendum Option, it shall be able to generate append semantics as defined in <a href="../Volume3/ch-1.2.html#4.2.2.2.1">ITI TF-3: 4.2.2.2.1</a>.</p>
    <p xmlns="">If the XDS Document Source supports the Document Transformation Option, it shall be able to generate transformation semantics as defined in <a href="../Volume3/ch-1.2.html#4.2.2.2.2">ITI TF-3: 4.2.2.2.2</a>.</p>
    <p xmlns="">If the XDS Document Source supports the Folder Management Option, it shall be able to generate folder semantics as defined in <a href="../Volume3/ch-1.2.html#4.2.1.3">ITI TF-3: 4.2.1.3</a> and <a href="../Volume3/ch-1.2.html#4.2.2.1.5">ITI TF-3: 4.2.2.1.5</a>.</p>
    <p xmlns="">If the XDS Document Source supports the Asynchronous Web Services Exchange Option, it shall be able to generate a WS-Addressing based Asynchronous Web Services request as defined in ITI TF-2x: Appendix V.3.</p>
    <p xmlns="">Refer to <a href="../Volume1/ch-10.html#10.2.9">ITI TF-1: 10.2.9</a> for support of the Basic Patient Privacy Enforcement Option.</p>
    <h5 xmlns="" id="3.41.4.1.3">3.41.4.1.3 Expected Actions</h5>
    <p xmlns="">Upon receipt of a Provide and Register Document Set-b request, the Content Receiver shall process the request.</p>
    <p xmlns="">If a failure is detected during processing, the Content Receiver shall return an error response to the Content Sender, thus terminating this transaction; otherwise, the Content Receiver shall return a success response to the Content Sender. The various exception conditions and possible error or warning messages are given in the ebRS standard and in <a href="../Volume3/ch-1.2.html#4.2.4">ITI TF-3: 4.2.4</a> Success and Error Reporting.</p>
    <p xmlns="">The Content Receiver shall be capable of accepting submissions containing multiple documents.</p>
    <p xmlns="" style="font-size:9pt">Note: The Content Sender may submit single documents or multiple documents depending on its needs.</p>
    <p xmlns="">A Content Receiver shall verify the received metadata as follows. For each DocumentEntry, the Content Receiver shall:</p>
    <ul xmlns="">
      <li class="bullet-list1">Verify the hash attribute, if present. If a received hash value differs from the calculated hash of the received document, the Content Receiver shall reject the submission and return an XDSRepositoryMetadataError error.</li>
      <li class="bullet-list1">Verify the size attribute, if present. If a received size value differs from the octet count of the received document, the Content Receiver shall reject the submission and return an XDSRepositoryMetadataError error.</li>
    </ul>
    <p xmlns="">Also, for the SubmissionSet, the Content Receiver may:</p>
    <ul xmlns="">
      <li class="bullet-list1">Validate the sourceId. If the submission is not from a permitted Content Sender, the submission may be rejected and an error returned.</li>
    </ul>
    <h6 xmlns="" id="3.41.4.1.3.1">3.41.4.1.3.1 Document Recipient Expected Actions</h6>
    <p xmlns="">In addition to the Expected Actions of all Content Receivers (described in the beginning of Section 3.41.4.1.3), a Document Recipient shall meet the following requirements.</p>
    <p xmlns="">A Document Recipient shall be able to interpret a submission without any context, such as knowledge of a prior submission.</p>
    <p xmlns="">The Document Recipient may validate the presence of metadata attributes. If the Document Recipient declares the Accepts Limited Metadata Option and the limitedMetadata attribute is present, such validation shall not exceed the requirements in the column labeled “XDR MS” (XDR Metadata-Limited Document Source) of ITI TF-3: Table 4.3.1-3. Otherwise, such validation shall not exceed the requirements in the column labeled “XDR DS” (XDR Document Source) of ITI TF-3: Table 4.3.1-3.</p>
    <p xmlns="">The following shall not cause rejection of a submission:</p>
    <ul xmlns="">
      <li class="bullet-list1">The submitted metadata includes Folders, and the Document Recipient cannot process the Folder-specific content. The response shall contain a PartialFolderContentNotProcessed warning and a textual description that Folder Content was not processed.</li>
      <li class="bullet-list1">The submitted metadata includes document relationships, and the Document Recipient cannot process the relationship-specific content. For each unsupported association, the response shall contain a warning and textual description that the relationship semantics were not processed. The specific warning depends on the relationship: PartialAppendContentNotProcessed, PartialReplaceContentNotProcessed, PartialTransformContentNotProcessed, PartialTransformReplaceContentNotProcessed, or for the associationTypes, PartialRelationshipContentNotProcessed.</li>
    </ul>
    <p xmlns="">The received documents may be processed further according to the capabilities of the system. These capabilities are not specified by IHE.</p>
    <h6 xmlns="" id="3.41.4.1.3.2">3.41.4.1.3.2 Document Repository Expected Actions</h6>
    <p xmlns="">In addition to the Expected Actions of all Content Receivers (described at the beginning of Section 3.41.4.1.3), a Document Repository shall meet the following requirements.</p>
    <p xmlns="">On receipt of a Provide and Register Document Set-b [ITI-41] request, the Document Repository shall, in order:</p>
    <ol xmlns="">
      <li class="numbered-list1">Validate and update select received metadata, as detailed below.</li>
    </ol>
    <ol xmlns="" start="2">
      <li class="numbered-list1">Make any received documents available for retrieval via the Retrieve Document Set [ITI-43] transaction.</li>
      <li class="numbered-list1">Convey the updated metadata to the Document Registry via a Register Document Set-b [ITI-42] request.</li>
      <li class="numbered-list1">Issue a Provide and Register Document Set-b [ITI-41] response.</li>
    </ol>
    <p xmlns="">If any error is encountered during processing of this request, either at the Document Repository or reported by the Document Registry, the Document Repository may revert any changes to the Document Repository data store. The Document Repository shall then terminate processing the transaction, and return an error response.</p>
    <p xmlns="">Before issuing the Register Document Set-b [ITI-42] transaction, the Document Repository shall update the received metadata as follows. For each received DocumentEntry, the Document Repository shall:</p>
    <ul xmlns="">
      <li class="bullet-list1">Add or replace the repositoryUniqueId attribute. The emitted value shall identify the Document Repository for retrieval of the received document.</li>
      <li class="bullet-list1">Add a hash attribute if not present. The emitted value shall be the SHA1 hash of the received document.</li>
      <li class="bullet-list1">Add a size attribute if not present. The emitted value shall be the octet count of the received document.</li>
    </ul>
    <p xmlns="">The Document Repository may add additional fields.</p>
    <p xmlns="">For each received DocumentEntry, the Document Repository may validate the uniqueId attribute. The submission may be rejected and an error returned if the uniqueId attribute matches a document within the Document Repository and the sizes or hashes of the two documents differ. The specific error returned depends on which attribute differed (XDSNonIdenticalSize or XDSNonIdenticalHash). The Document Repository shall not generate an error related to duplication if the uniqueId attribute matches a document within the Document Repository and the sizes and hashes of the two documents are the same. (The document may still be rejected by the Document Registry; see Section 3.42.4.1.4.)</p>
    <p xmlns="">Except as outlined above (and in Section 3.41.4.1.3 Content Receiver Expect Actions), the Document Repository shall not validate the presence or content of received metadata attributes.</p>
    <p xmlns="">The Document Repository shall ensure that received documents are available for retrieval via the Retrieve Document Set [ITI-43] transaction. If the document’s uniqueId is not already known to the Document Repository, the Document Repository shall:</p>
    <ul xmlns="">
      <li class="bullet-list1">Store the received document octet stream</li>
      <li class="bullet-list1">Store the received DocumentEntry mimeType and uniqueId, and associate them with the received document octet stream.</li>
    </ul>
    <p xmlns="">Making the document retrievable before registering is necessary since a Document Registry may validate storage of a document before issuing the Register Document Set-b response; or, a Document Consumer may attempt to retrieve a document before the Register Document Set-b response is received.</p>
    <p xmlns="">The Document Repository shall issue a Register Document Set-b [ITI-42] request to the Document Registry with the (updated) received metadata. If the Register Document Set-b [ITI-42] response includes any errors or warnings, the Document Repository shall include all such errors and warnings in the Provide and Register Document Set-b [ITI-41] response.</p>
    <h4 xmlns="" id="3.41.4.2">3.41.4.2 Provide and Register Document Set-b Response</h4>
    <p xmlns="">The Content Receiver shall send a Provide and Register Document Set-b Response message when the processing of a Provide and Register Document Set-b Request is complete.</p>
    <h5 xmlns="" id="3.41.4.2.1">3.41.4.2.1 Trigger Events</h5>
    <p xmlns="">The request message has been received and processed by the Content Receiver</p>
    <h6 xmlns="" id="3.41.4.2.1.1">3.41.4.2.1.1 Document Repository Trigger Events</h6>
    <p xmlns="">The Document Repository shall send the Provide and Register Document Set-b Response after receipt of the response to the corresponding Register Document Set-b [ITI-42] transaction from the Document Registry.</p>
    <ul xmlns="">
      <li class="bullet-list1">If the response to the Register Document Set-b [ITI-42] transaction indicates success, then the Document Repository shall send a successful response message.</li>
      <li class="bullet-list1">If the response to the Register Document Set-b [ITI-42] transaction indicates failure, then the Document Repository shall send a failure response message.</li>
    </ul>
    <h5 xmlns="" id="3.41.4.2.2">3.41.4.2.2 Message Semantics</h5>
    <p xmlns="">The Provide and Register Document Set-b Response message shall use SOAP 1.2 and MTOM with XOP encoding (labeled MTOM/XOP in this specification). Implementors of this transaction shall comply with all requirements described in: <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>: Web Services for IHE Transactions.</p>
    <p xmlns="">The use of MTOM/XOP is governed by the following rules:</p>
    <ul xmlns="">
      <li class="bullet-list1">The Content Receiver shall generate the Provide and Register Document Set-b Response message in MTOM/XOP format, even though there is no base64Binary content included.</li>
      <li class="bullet-list1">The Content Sender shall accept the Provide and Register Document Set-b Response message in MTOM/XOP format.</li>
    </ul>
    <p xmlns="">The Provide and Register Document Set-b Response message shall carry the status of the requested operation. The response message may carry warning messages. If the requested operation fails, the response message shall carry at least one error message. The conditions of failure and possible warning and error messages are given in the ebRS standard and detailed in <a href="../Volume3/ch-1.2.html#4.2.4">ITI TF-3: 4.2.4</a> Error Reporting. This transaction does not support a partial success response.</p>
    <p xmlns="">XML namespace prefixes used in text and in examples below are for informational purposes only and are documented in <a href="../Volume2x/ch-22.html#Appendix V">ITI TF-2x: Appendix V</a>, Table 2.4-1.</p>
    <p xmlns="">The requirements for the response message are:</p>
    <ul xmlns="">
      <li class="bullet-list1">the &lt;wsa:Action&gt; SOAP header shall contain the value urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-bResponse</li>
      <li class="bullet-list1">the &lt;soap12:Body&gt; soap element shall contain one &lt;rs:RegistryResponse&gt; element</li>
    </ul>
    <p xmlns="">See <a href="../Volume3/ch-1.2.html#4.2.4.1">ITI TF-3: 4.2.4.1</a> for examples of response messages.</p>
    <h6 xmlns="" id="3.41.4.2.2.1">3.41.4.2.2.1 XDS Document Repository Message Semantics</h6>
    <p xmlns="">If the XDS Document Repository supports the Asynchronous Web Services Exchange Option (WS-Addressing based) and it receives a WS-Addressing based Asynchronous Web Services request, it shall respond as defined in ITI TF-2x: Appendix V.3.</p>
    <h5 xmlns="" id="3.41.4.2.3">3.41.4.2.3 Expected Actions</h5>
    <p xmlns="">The Content Sender should examine the status and messages returned and take appropriate action.</p>
    <h3 xmlns="" id="3.41.5">3.41.5 Security Considerations</h3>
    <p xmlns="">Relevant XDS Affinity Domain security considerations are discussed in the XDS Security Considerations Section (see <a href="../Volume1/ch-10.html#10.7">ITI TF-1: 10.7</a>).</p>
    <h4 xmlns="" id="3.41.5.1">3.41.5.1 Audit Record Considerations</h4>
    <p xmlns="">The Provide and Register Document Set-b transaction is either a PHI-Import event or a PHI-Export event, depending on actor, as defined in ITI TF-2a: Table 3.20.4.1.1.1-1, with the following exceptions.</p>
    <h5 xmlns="" id="3.41.5.1.1">3.41.5.1.1 Document Source Audit Message</h5>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:62.1pt">
          <div />
        </td>
        <td style="width:119.7pt" class="tableHeader">Field Name</td>
        <td style="width:25.2pt" class="tableHeader">Opt</td>
        <td style="width:233.1pt" class="tableHeader">Value Constraints</td>
      </tr>
      <tr>
        <td rowspan="5" style="width:62.1pt">
          <p>Event</p>
          <p>
            <span style="font-weight:bold">AuditMessage/EventIdentification</span>
            <br />
          </p>
        </td>
        <td style="width:119.7pt">EventID</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">EV(110106, DCM, “Export”)</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventActionCode</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">“R” (Read)</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventDateTime</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventOutcomeIndicator</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventTypeCode</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">EV(“ITI-41”, “IHE Transactions”, “Provide and Register Document Set-b”)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Source (Document Source) (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Human Requestor (0..n)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Destination (Document Repository) (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Audit Source (Document Source) (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Patient (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">SubmissionSet (1)</td>
      </tr>
    </table>
    <p xmlns="">Where:</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="7" style="width:66.6pt">
          <p>Source</p>
          <p>
            <span style="font-weight:bold">AuditMessage/ActiveParticipant</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">UserID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">If Asynchronous Web Services Exchange is being used, the content of the &lt;wsa:ReplyTo/&gt; element. Otherwise, not specialized.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">AlternativeUserID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">the process ID as used within the local operating system in the local system logs.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserIsRequestor</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">RoleIDCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">EV(110153, DCM, “Source”)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” for machine (DNS) name, “2” for IP address</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The machine name or IP address.</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="7" style="width:66.6pt">
          <p>Human Requestor (if known)</p>
          <p>
            <span style="font-weight:bold">AuditMessage/ActiveParticipant</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">UserID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">Identity of the human that initiated the transaction.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">AlternativeUserID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserIsRequestor</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">RoleIDCode</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">Access Control role(s) the user holds that allows this transaction.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointTypeCode</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="7" style="width:66.6pt">
          <p>Destination</p>
          <p>
            <span style="font-weight:bold">AuditMessage/ActiveParticipant</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">UserID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">SOAP endpoint URI.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">AlternativeUserID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserIsRequestor</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“false”</td>
      </tr>
      <tr>
        <td style="width:115.2pt">RoleIDCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">EV(110152, DCM, “Destination”)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” for machine (DNS) name, “2” for IP address</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The machine name or IP address.</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="3" style="width:65.75pt">
          <p>Audit Source</p>
          <p>AuditMessage</p>
          <p>AuditSourceIdentification</p>
        </td>
        <td style="width:116.05pt">AuditSourceID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:233.1pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:116.05pt">AuditEnterpriseSiteID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:233.1pt">not specialized</td>
      </tr>
      <tr style="height:13pt">
        <td style="width:116.05pt">AuditSourceTypeCode</td>
        <td style="width:20.7pt">U</td>
        <td style="width:233.1pt">not specialized</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="9" style="width:66.6pt">
          <p>Patient</p>
          <p>
            <span style="font-weight:bold">(AuditMessage/ParticipantObjectIdentification)</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">ParticipantObjectTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” (Person)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectTypeCodeRole</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” (Patient)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDataLifeCycle</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectIDTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectSensitivity</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The patient ID in HL7 CX format.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectQuery</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDetail</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="9" style="width:66.6pt">
          <p>Submission Set</p>
          <p>
            <span style="font-weight:bold">(AuditMessage/ParticipantObjectIdentification)</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">ParticipantObjectTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“2” (System)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectTypeCodeRole</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“20” (job)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDataLifeCycle</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectIDTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">EV(“urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd”, “IHE XDS Metadata”, “submission set classificationNode”)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectSensitivity</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The submissionSet unique ID</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectQuery</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDetail</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
    </table>
    <h5 xmlns="" id="3.41.5.1.2">3.41.5.1.2 Document Repository or Document Recipient audit message:</h5>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td style="width:62.1pt">
          <div />
        </td>
        <td style="width:119.7pt">Field Name</td>
        <td style="width:25.2pt">Opt</td>
        <td style="width:233.1pt">Value Constraints</td>
      </tr>
      <tr>
        <td rowspan="5" style="width:62.1pt">
          <p>Event</p>
          <p>
            <span style="font-weight:bold">AuditMessage/EventIdentification</span>
            <br />
          </p>
        </td>
        <td style="width:119.7pt">EventID</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">EV(110107, DCM, “Import”)</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventActionCode</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">“C” (Create)</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventDateTime</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventOutcomeIndicator</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:119.7pt">EventTypeCode</td>
        <td style="width:25.2pt">M</td>
        <td style="width:233.1pt">EV(“ITI-41”, “IHE Transactions”, “Provide and Register Document Set-b”)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Source (Document Source) (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Destination (Document Repository or Document Recipient) (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Audit Source (Document Repository or Document Recipient) (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">Patient (1)</td>
      </tr>
      <tr>
        <td colspan="4" style="width:472.5pt">SubmissionSet (1)</td>
      </tr>
    </table>
    <p xmlns="">Where:</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="7" style="width:66.6pt">
          <p>Source</p>
          <p>
            <span style="font-weight:bold">AuditMessage/ActiveParticipant</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">UserID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">If Asynchronous Web Services Exchange is being used, the content of the &lt;wsa:ReplyTo/&gt; element. Otherwise, not specialized.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">AlternativeUserID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserIsRequestor</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">RoleIDCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">EV(110153, DCM, “Source”)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” for machine (DNS) name, “2” for IP address</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The machine name or IP address.</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="7" style="width:66.6pt">
          <p>Destination</p>
          <p>
            <span style="font-weight:bold">AuditMessage/ActiveParticipant</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">UserID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">SOAP endpoint URI</td>
      </tr>
      <tr>
        <td style="width:115.2pt">AlternativeUserID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">the process ID as used within the local operating system in the local system logs.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">UserIsRequestor</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“false”</td>
      </tr>
      <tr>
        <td style="width:115.2pt">RoleIDCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">EV(110152, DCM, “Destination”)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” for machine (DNS) name, “2” for IP address</td>
      </tr>
      <tr>
        <td style="width:115.2pt">NetworkAccessPointID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The machine name or IP address.</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="3" style="width:75.6pt">
          <p>Audit Source</p>
          <p>
            <span style="font-weight:bold">AuditMessage/AuditSourceIdentification</span>
            <br />
          </p>
        </td>
        <td style="width:106.2pt">AuditSourceID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:106.2pt">AuditEnterpriseSiteID</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:106.2pt">AuditSourceTypeCode</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="9" style="width:66.6pt">
          <p>Patient</p>
          <p>
            <span style="font-weight:bold">(AuditMessage/ParticipantObjectIdentification)</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">ParticipantObjectTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” (Person)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectTypeCodeRole</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“1” (Patient)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDataLifeCycle</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectIDTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectSensitivity</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The patient ID in HL7 CX format.</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectQuery</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDetail</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
    </table>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <tr>
        <td rowspan="9" style="width:66.6pt">
          <p>Submission Set</p>
          <p>
            <span style="font-weight:bold">(AuditMessage/ParticipantObjectIdentification)</span>
            <br />
          </p>
        </td>
        <td style="width:115.2pt">ParticipantObjectTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“2” (System)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectTypeCodeRole</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">“20” (job)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDataLifeCycle</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectIDTypeCode</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">EV(“urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd”, “IHE XDS Metadata”, “submission set classificationNode”)</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectSensitivity</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectID</td>
        <td style="width:20.7pt">M</td>
        <td style="width:237.6pt">The submissionSet unique ID</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectName</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectQuery</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
      <tr>
        <td style="width:115.2pt">ParticipantObjectDetail</td>
        <td style="width:20.7pt">U</td>
        <td style="width:237.6pt">not specialized</td>
      </tr>
    </table>
  </body>
</html>
