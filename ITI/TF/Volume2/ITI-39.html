<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta xmlns="" charset="utf-8" />
    <title xmlns="">IHE ITI TF Rev17 Vol2b</title>
    <link xmlns="" rel="stylesheet" href="../css/styles.css" />
  </head>
  <body xmlns="">
    <header>
      <p>
        <img src="http://profiles.ihe.net/IHE_INTERNATIONAL.png" class="IHE logo" alt="IHE logo" />
      </p>
      <p>IHE IT Infrastructure (ITI) Technical Framework, Volume 2</p>
      <p>Revision 17.0 – Final Text</p>
      <p>
        <hr />
      </p>
    </header>
    <main>
      <h2 id="3.39">3.39 Cross Gateway Retrieve [ITI-39]</h2>
      <p>This section corresponds to transaction [ITI-39] of the IHE Technical Framework. Transaction [ITI-39] is used by the Initiating Gateway and Responding Gateway Actors.</p>
      <h3 id="3.39.1">3.39.1 Scope</h3>
      <p>The scope of the Cross Gateway Retrieve transaction is semantically the same as the Retrieve Document Set [ITI-43] transaction. Differences from the Retrieve Document Set transactions are:</p>
      <ul>
        <li class="bullet-list1">The Cross Gateway Retrieve is between an Initiating Gateway and a Responding Gateway.</li>
        <li class="bullet-list1">The ‘homeCommunityId’ parameter is required. This means that the homeCommunityId parameter which is optional on the Retrieve Document Set transaction is required by this transaction.</li>
        <li class="bullet-list1">Responding Gateways shall support the Asynchronous Web Services Exchange Option on the Cross Gateway Retrieve. Support for this function is required in order to enable use of Asynchronous Web Services Exchange in any cross-community interaction. Without this support an Initiating Gateway would require unique configuration, per Responding Gateway, to know if Asynchronous Web Services Exchange was supported. It is expected that Asynchronous Web Services Exchange will be desired by the majority of communities.</li>
        <li class="bullet-list1">
          Asynchronous Web Services Exchange is an option on the Initiating Gateway, see
          <a href="../Volume1/ch-18.html#18.2.2">ITI TF-1: 18.2.2</a>
          .
        </li>
      </ul>
      <h3 id="3.39.2">3.39.2 Use Case Roles</h3>
      <img src="media/ai8zh-w242m.029.png" width="373" height="131" alt="" />
      <p style="font-size:11pt">
        <a name="_Toc168463565">Figure 3.39.2-1: Use Case Roles</a>
      </p>
      <p>
        <span style="font-weight:bold">Actor:</span>
        <span>Initiating Gateway</span>
      </p>
      <p>
        <span style="font-weight:bold">Role:</span>
        <span>To formulate a Cross Gateway Retrieve in response to Retrieve Document Set transactions or other internal interaction.</span>
      </p>
      <p>
        <span style="font-weight:bold">Actor:</span>
        <span>Responding Gateway</span>
      </p>
      <p>
        <span style="font-weight:bold">Role:</span>
        <span>To return the documents requested.</span>
      </p>
      <h3 id="3.39.3">3.39.3 Referenced Standard</h3>
      <p>
        Implementors of this transaction shall comply with all requirements described in
        <a href="../Volume2/ch-V.html#Appendix V">ITI TF-2x: Appendix V</a>
        Web Services for IHE Transactions.
      </p>
      <p>
        <span>ebRIM</span>
        <span style="width:2pt;display:inline-block"> </span>
        <span style="width:36pt;display:inline-block"> </span>
        <span>OASIS/ebXML Registry Information Model v3.0</span>
      </p>
      <p>
        <span>ebRS</span>
        <span style="width:10pt;display:inline-block"> </span>
        <span style="width:36pt;display:inline-block"> </span>
        <span>OASIS/ebXML Registry Services Specifications v3.0</span>
      </p>
      <p>
        <span>ITI TF-3:4</span>
        <span style="width:20.34pt;display:inline-block"> </span>
        <span>Metadata used in Document Sharing profiles</span>
      </p>
      <p>
        <span>MTOM</span>
        <span style="width:34.66pt;display:inline-block"> </span>
        <span>SOAP Message Transmission Optimization Mechanism</span>
        <a href="http://www.w3.org/TR/soap12-mtom/">http://www.w3.org/TR/soap12-mtom/</a>
      </p>
      <h3 id="3.39.4">3.39.4 Messages</h3>
      <img src="media/ai8zh-w242m.030.png" width="427" height="244" alt="" />
      <p class="figureTitle">Figure 3.39.4-1: Interaction Diagram</p>
      <h4 id="3.39.4.1">3.39.4.1 Cross Gateway Retrieve Request</h4>
      <p>
        The Cross Gateway Retrieve Request uses the same syntax and standards as the Retrieve Document Set Request. See Section
        <a href="../Volume2/ITI-43.html#3.43.4.1">ITI TF-2b: 3.43.4.1</a>
        .
      </p>
      <h5 id="3.39.4.1.1">3.39.4.1.1 Trigger Events</h5>
      <p>This message is initiated by the Initiating Gateway to retrieve a set of documents from another community represented by a Responding Gateway. The Initiating Gateway may be responding to a Retrieve Document Set transaction or may use a proprietary mechanism for triggering the Cross Gateway Retrieve.</p>
      <h5 id="3.39.4.1.2">3.39.4.1.2 Message Semantics</h5>
      <p>The message semantics for Cross Gateway Retrieve are the same as Retrieve Document Set (s Section 3.43.4.1.2). The Initiating Gateway shall specify the homeCommunityId parameter within the Retrieve Document Set. The homeCommunityId shall contain the value that identifies the community associated with the Responding Gateway.</p>
      <p>Initiating Gateways which support the On-Demand Documents Option shall be capable of retrieving an On-Demand Document Entry either through internal mechanisms or, when the XDS Affinity Domain Option is also declared, through interaction with an XDS Document Consumer which supports the On-Demand Documents Option.</p>
      <p>Responding Gateways which support the On-Demand Documents Option shall be able to respond to retrieval of an On-Demand Document Entry either through internal mechanisms or, when grouped with a Document Consumer, through interaction with appropriate XDS actors which support On-Demand Documents. Responding Gateways which support the Persistence of Retrieved Documents Option shall specify the NewRepositoryUniqueId element indicating the document is available for later retrieval and be able to return exactly the same document in all future retrieve requests for the document identified by NewDocumentUniqueId.</p>
      <h5 id="3.39.4.1.3">3.39.4.1.3 Expected Actions</h5>
      <p>Actors supporting this transaction shall support the Expected Actions described in the Section 3.43.4.1.3.</p>
      <p>The Responding Gateway shall determine the local system or systems which hold the documents requested and interact with those systems. The Responding Gateway may use a Retrieve Document Set transaction or other internally defined interaction, to retrieve the document or documents. If more than one system is contacted the Responding Gateway shall consolidate the results from the multiple systems into one response to the Initiating Gateway. If both successes and failures are received the Responding Gateway may choose to use PartialSuccess status to reflect both failure and success. The Responding Gateway may alternatively choose to suppress the failures and report only successes.</p>
      <p>If the Responding Gateway returns any Registry Error elements, the Responding Gateway shall include in the location attribute all the requirements stated in Section 3.43 plus the homeCommunityId of the Responding Gateway.</p>
      <p>If the XDS Affinity Domain Option is supported, the Initiating Gateway shall, if needed, consolidate results from multiple Responding Gateways. This includes reflecting in the consolidated results returned to the originating Retrieve Document Set [ITI-43] all successes and failures received from Responding Gateways. If both successes and failures are received from Responding Gateways, the Initiating Gateway shall return both DocumentResponse and RegistryErrorList elements in one response and specify PartialSuccess status.</p>
      <h6 id="3.39.4.1.3.1">3.39.4.1.3.1 Compatibility of Options</h6>
      <p>If the Initiating Gateway does not support the On-Demand Document Option, it will never send a Cross Gateway Retrieve request for an On-Demand Document. In this case, none of the attributes specific to On-Demand Documents will be included in the response.</p>
      <p>If the Initiating Gateway does support the On-Demand Document Option, it will only direct Cross Gateway Retrieve requests for On-Demand Documents to responders which have returned an On-Demand Document Entry in a Cross Gateway Query response. Thus there are no compatibility concerns with this transaction.</p>
      <h4 id="3.39.4.2">3.39.4.2 Cross Gateway Retrieve Response</h4>
      <h5 id="3.39.4.2.1">3.39.4.2.1 Trigger Events</h5>
      <p>This message will be triggered by a Cross Gateway Retrieve Message.</p>
      <h5 id="3.39.4.2.2">3.39.4.2.2 Message Semantics</h5>
      <p>The message semantics for Cross Gateway Retrieve are the same as Retrieve Document Set. See Section 3.43.4.2.2.</p>
      <h5 id="3.39.4.2.3">3.39.4.2.3 Expected Actions</h5>
      <p>Actors supporting this transaction shall support the Expected Actions described in Section 3.43.4.2.3.</p>
      <h3 id="3.39.5">3.39.5 Protocol Requirements</h3>
      <p>The Cross Gateway Retrieve request and response will be transmitted using Synchronous or WS-Addressing based Asynchronous Web Services Exchange, according to the requirements specified in ITI TF-2x: Appendix V.3. The protocol requirements are identical to the Retrieve Document Set except as noted below.</p>
      <p>
        XML namespace prefixes are for informational purposes only and are documented in
        <a href="../Volume2/ch-V.html#Appendix V">ITI TF-2x: Appendix V</a>
        , Table V.2.4-1.
      </p>
      <p>
        <span style="font-weight:bold">Responding Gateway:</span>
        <span>These are the requirements for the Cross Gateway Retrieve transaction presented in the order in which they would appear in the Responding Gateway WSDL definition:</span>
      </p>
      <ul>
        <li class="bullet-list1">The following types shall be imported (xsd:import) in the /definitions/types section:</li>
      </ul>
      <ul>
        <li class="bullet-list2">namespace="urn:ihe:iti:xds-b:2007", schema="IHEXDS.xsd"</li>
      </ul>
      <ul>
        <li class="bullet-list1">
          <span>The /definitions/message/part/@element attribute of the Cross Gateway Retrieve Request message shall be defined as “</span>
          <span style="background-color:#ffffff">ihe:RetrieveDocumentSetRequest</span>
          <span>”</span>
        </li>
        <li class="bullet-list1">
          <span>The /definitions/message/part/@element attribute of the</span>
          <span style="background-color:#ffffff">Cross Gateway</span>
          <span>Retrieve Response message shall be defined as “</span>
          <span style="background-color:#ffffff">ihe:RetrieveDocumentSet</span>
          <span>Response”</span>
        </li>
      </ul>
      <ul>
        <li class="bullet-list1">Refer to Table 3.39.5-2 below for additional attribute requirements</li>
      </ul>
      <p class="tableTitle">Table 3.39.5-2: Requirements for portType and Binding attributes</p>
      <table cellspacing="0" cellpadding="0">
        <tr>
          <td class="tableHeader">Attribute</td>
          <td class="tableHeader">Value</td>
        </tr>
        <tr>
          <td>/definitions/portType/operation@name</td>
          <td>RespondingGateway_CrossGatewayRetrieve</td>
        </tr>
        <tr>
          <td>/definitions/portType/operation/input/@wsaw:Action</td>
          <td>urn:ihe:iti:2007:CrossGatewayRetrieve</td>
        </tr>
        <tr>
          <td>/definitions/portType/operation/output/@wsaw:Action</td>
          <td>urn:ihe:iti:2007:CrossGatewayRetrieveResponse</td>
        </tr>
        <tr>
          <td>/definitions/binding/operation/wsoap12:operation/@soapActionRequired</td>
          <td>false</td>
        </tr>
      </table>
      <p>
        <span>These are the requirements that affect the wire format of the SOAP message. The other WSDL properties are only used within the WSDL definition and do not affect interoperability. Full sample request and response messages are in Section</span>
        <a href="#_Ref167821063">3.43.5.1 Sample SOAP Messages</a>
        <span>.</span>
      </p>
      <p>
        For informative WSDL for the Responding Gateway, see
        <a href="../Volume2/ch-W.html#Appendix W">ITI TF-2x: Appendix W</a>
        .
      </p>
      <p>The &lt;ihe:RetrieveDocumentSetRequest/&gt; element is defined in Section 3.43.5. When used within the Cross Gateway Retrieve the &lt;ihe:HomeCommunityId/&gt; element is required.</p>
      <p>The &lt;ihe:RetrieveDocumentSetResponse/&gt; element is defined in Section 3.43.5.</p>
      <h4 id="3.39.5.1">3.39.5.1 Sample SOAP Messages</h4>
      <p>The samples in the following two sections show a typical SOAP request and its relative SOAP response. The sample messages also show the WS-Addressing headers &lt;Action/&gt;, &lt;MessageID/&gt;, &lt;ReplyTo/&gt;…; these WS-Addressing headers are populated according to the W3C WS-Addressing standard. The body of the SOAP message is omitted for brevity; in a real scenario the empty element will be populated with the appropriate metadata.</p>
      <p>
        Samples presented in this section are also available online: see
        <a href="../Volume2/ch-W.html#Appendix W">ITI TF-2x: Appendix W</a>
        .
      </p>
      <h5 id="3.39.5.1.1">3.39.5.1.1 Sample Cross Gateway Retrieve SOAP Request</h5>
      <h6 id="3.39.5.1.1.1">3.39.5.1.1.1 Synchronous Web Services Exchange</h6>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;s:Envelope</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">xmlns:s="http://www.w3.org/2003/05/soap-envelope"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">xmlns:a="http://www.w3.org/2005/08/addressing"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:Action s:mustUnderstand="1"&gt;urn:ihe:iti:2007:</span>
        <span>CrossGatewayRetrieve</span>
        <span style="background-color:#ffffff">&lt;/a:Action&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:MessageID&gt;urn:uuid:0fbfdced-6c01-4d09-a110-2201afedaa02&lt;/a:MessageID&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:ReplyTo&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;a:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:Address&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;/a:ReplyTo&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:To s:mustUnderstand="1"&gt;http://localhost:2647/XcaService/IHEXCAGateway.svc&lt;/a:To&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;RetrieveDocumentSetRequest xmlns="urn:ihe:iti:xds-b:2007"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.4&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...1000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2300&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.5&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...2000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2301&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;/RetrieveDocumentSetRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;/s:Envelope&gt;</span>
      </p>
      <h6 id="3.39.5.1.1.2">3.39.5.1.1.2 Asynchronous Web Services Exchange</h6>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;s:Envelope</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">xmlns:s="http://www.w3.org/2003/05/soap-envelope"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">xmlns:a="http://www.w3.org/2005/08/addressing"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:Action s:mustUnderstand="1"&gt;urn:ihe:iti:2007:</span>
        <span>CrossGatewayRetrieve</span>
        <span style="background-color:#ffffff">&lt;/a:Action&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:MessageID&gt;urn:uuid:0fbfdced-6c01-4d09-a110-2201afedaa02&lt;/a:MessageID&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:ReplyTo&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;a:Address&gt;</span>
        <span>http://192.168.2.4:9080/XcaService/InitiatingGatewayReceiver.svc</span>
      </p>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;/a:Address&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;/a:ReplyTo&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:To s:mustUnderstand="1"&gt;http://localhost:2647/XcaService/RespondingGatewayReceiver.svc&lt;/a:To&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;RetrieveDocumentSetRequest xmlns="urn:ihe:iti:xds-b:2007"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.4&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...1000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2300&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.5&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...2000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2301&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;/RetrieveDocumentSetRequest&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;/s:Envelope&gt;</span>
      </p>
      <h5 id="3.39.5.1.2">3.39.5.1.2 Sample Cross Gateway Retrieve SOAP Response</h5>
      <h6 id="3.39.5.1.2.1">3.39.5.1.2.1 Synchronous Web Services Exchange</h6>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:Action s:mustUnderstand="1"&gt;</span>
        <span>urn:ihe:iti:2007:CrossGatewayRetrieveResponse</span>
        <span style="background-color:#ffffff">&lt;/a:Action&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:RelatesTo&gt;urn:uuid:0fbfdced-6c01-4d09-a110-2201afedaa02&lt;/a:RelatesTo&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;RetrieveDocumentSetResponse</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns="urn:ihe:iti:xds-b:2007"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;rs:RegistryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success"/&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.4&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...1000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2300&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;mimeType&gt;text/xml&lt;/mimeType&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;Document&gt;UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi&lt;/Document&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.5&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...2000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2301&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;mimeType&gt;text/xml&lt;/mimeType&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;Document&gt;UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi&lt;/Document&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;/RetrieveDocumentSetResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;/s:Envelope&gt;</span>
      </p>
      <h6 id="3.39.5.1.2.2">3.39.5.1.2.2 Asynchronous Web Services Exchange</h6>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:Action s:mustUnderstand="1"&gt;</span>
        <span>urn:ihe:iti:2007:CrossGatewayRetrieveResponse</span>
        <span style="background-color:#ffffff">&lt;/a:Action&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;a:MessageID&gt;urn:uuid:D6C21225-8E7B-454E-9750-821622C099DB&lt;/</span>
        <span>a</span>
        <span style="background-color:#ffffff">:MessageID&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:RelatesTo&gt;urn:uuid:0fbfdced-6c01-4d09-a110-2201afedaa02&lt;/a:RelatesTo&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;a:To s:mustUnderstand="1"&gt;http://localhost:2647/XcaService/InitiatingGatewayReceiver.svc&lt;/a:To&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Header&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;RetrieveDocumentSetResponse</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns="urn:ihe:iti:xds-b:2007"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0"&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;rs:RegistryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success"/&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.4&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...1000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2300&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;mimeType&gt;text/xml&lt;/mimeType&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;Document&gt;UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi&lt;/Document&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;HomeCommunityId&gt;urn:oid:1.2.3.5&lt;/HomeCommunityId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;RepositoryUniqueId&gt;1.3.6.1.4...2000&lt;/RepositoryUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span>&lt;DocumentUniqueId&gt;1.3.6.1.4...2301&lt;/DocumentUniqueId&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;mimeType&gt;text/xml&lt;/mimeType&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">    </span>
        <span style="background-color:#ffffff">&lt;Document&gt;UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi&lt;/Document&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">   </span>
        <span style="background-color:#ffffff">&lt;/DocumentResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block">  </span>
        <span style="background-color:#ffffff">&lt;/RetrieveDocumentSetResponse&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="width:36pt;display:inline-block"> </span>
        <span style="background-color:#ffffff">&lt;/s:Body&gt;</span>
      </p>
      <p style="font-size:8pt">
        <span style="background-color:#ffffff">&lt;/s:Envelope&gt;</span>
      </p>
      <h3 id="3.39.6">3.39.6 Security Considerations</h3>
      <p>Both the Initiating Gateway and Responding Gateway shall audit the Cross Gateway Retrieve. The audit entries shall be equivalent to the entries required for the Retrieve Document Set.</p>
      <p>The Initiating Gateway:</p>
      <ul>
        <li class="bullet-list1">If receiving a Retrieve Document Set transaction from a Document Consumer, shall audit as if it were a Document Repository (see Section 3.43.6).</li>
        <li class="bullet-list1">In addition, shall audit the Cross Gateway Retrieve as if it were a Document Consumer except that for EventTypeCode the Initiating Gateway shall specify EV(“ITI-39”, “IHE Transactions”, and “Cross Gateway Retrieve”) (see Section 3.43.6).</li>
        <li class="bullet-list1">In addition, if interacting with a local Document Repository, shall audit as if it were a Document Consumer (see Section 3.43.6). One audit record shall be created for each Document Repository contacted.</li>
      </ul>
      <p>The Responding Gateway:</p>
      <ul>
        <li class="bullet-list1">Shall audit the Cross Gateway Retrieve as if it were a Document Repository except that for EventTypeCode the Responding Gateway shall specify EV(“ITI-39”, “IHE Transactions”, “Cross Gateway Retrieve”) (see Section 3.43.6).</li>
        <li class="bullet-list1">In addition, if interacting with a local Document Repository, shall audit as if it were a Document Consumer (see Section 3.43.6). One audit record shall be created for each Document Repository contacted.</li>
      </ul>
    </main>
    <footer>
      <p>
        <hr />
      </p>
      <p class="copyright">Copyright © 2020: IHE International, Inc.</p>
    </footer>
  </body>
</html>
