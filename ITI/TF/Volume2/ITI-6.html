<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta xmlns="" charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title xmlns="">IHE ITI TF Vol2</title>
    <link xmlns="" rel="stylesheet" href="../../../css/styles.css" />
    <script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async> </script> 
</head>
  <body xmlns="">
    <header>
        <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
          <button class="menu-icon" type="button" data-toggle="responsive-menu"></button>
          <div class="title-bar-title">IHE ITI Technical Framework</div>
        </div>
        <div class="top-bar" id="responsive-menu">
          <div class="top-bar-left">
            <img src="../../../IHE_INTERNATIONAL.png" class="IHE logo hide-for-small-only" alt="IHE logo" />
            <ul id="tf-small-menu" class="menu vertical show-for-small-only">
              <li><a class="ihe-purple" href="https://ihe.net" target="_blank">About IHE</a></li>
              <li class="menu-text">Sections
                <ul id="tf-small-menu-list" class="nested vertical menu">
                </ul>
              </li>
            </ul>
          </div>
          <div class="top-bar-right hide-for-small-only">
            <ul class="menu">
              <li class="menu-text tf-version">IHE IT Infrastructure (ITI) Technical Framework, Volume <span id="volumeNo"></span><br />Revision 19.0, June 17, 2022 – Final Text</li>
            </ul>
              <ul class="menu align-right">
                    <li><input id="ihe-search-field" type="search" placeholder="Search"></li>
                    <li><button id="ihe-search-button" type="button" class="button search">Search</button></li>
                </ul>
            </div>
        </div>
         </header>
    <div class="navigation">
      <nav aria-label="You are here:" role="navigation">
        <ul class="breadcrumbs">
        </ul>
      </nav>
    </div>
    <div class="scroll-top-wrapper">
      <span class="scroll-top-inner">
        <i class="size-icon-lg fi-arrow-up"></i>
      </span>
    </div>
    <div class="grid-container fluid">
      <div class="grid-x grid-margin-x align-center">
        <div class="cell medium-11">
          <div class="callout disclaimer warning text-center">              
          The Final Text ITI Technical Framework is published here in HTML format and is no longer published as PDF. Trial Implementation supplements are available from the <a href=https://profiles.ihe.net/ITI/TF/Volume1/index.html>Volume 1 Table of Contents</a>.
          </div>
        </div>
      </div>
      <main>
        <div class="grid-x grid-margin-x align-center">
          <div class="hide-for-small-only cell medium-2 large-2" data-sticky-container>
            <div id="section-menu" class="sticky" data-sticky data-anchor="main-top">
            </div>
          </div>
          <div id="main-top" class="cell medium-10 large-10">
      <h2 id="3.6">3.6 Change Context [ITI-6]</h2>
      <p>This section corresponds to transaction [ITI-6] of the IHE IT Infrastructure Technical Framework. Transaction [ITI-6] is used by the Context Participant and Context Manager Actors.</p>
      <h3 id="3.6.1">3.6.1 Scope</h3>
      <p>This transaction allows for an application supporting the Context Participant to change the values for one or more context subjects, forcing other Context Participant Actors to synchronize based on the new context values.</p>
      <p>
        <span>The Change Context Transaction is composed of multiple methods as defined by the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard</span>
        <span>. There are two key characteristics to this transaction. The first is that the transaction has multiple phases consisting of instigating the change, surveying the other participants, and finally publishing the decision as to whether the context changed or not. The second characteristic is that the context change involves a specific subject. For the Patient Context Participant the subject being changed is the patient subject. For the Client Authentication Agent the subject being changed is the user subject. Applications that implement only the Patient Context Participant shall not expect the user subject to be set in context.</span>
      </p>
      <p>
        <span>The semantics of the methods used are defined in the documents</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Component Technology Mapping: ActiveX</span>
        <span>or</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Component Technology Mapping: Web</span>
        <span>, in conjunction with the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Subject Data Definitions</span>
        <span>document. The Context Participant can choose the technology implementation it wishes to implement. The Context Manager must support both technology implementations in order to accommodate whichever implementation a participant ends up choosing.</span>
      </p>
      <p>
        In the case where Patient Context Participant Actors use identifiers from different patient identifier domains the Context Manager shall be grouped with the Patient Identifier Cross-reference Consumer and the corresponding PIX Query transaction as defined in Section 3.9 to retrieve all identifiers the patient is known by. The IHE Context Manager encompasses more than a CCOW context manager function. See
        <a href="../Volume2/ch-D.html#Appendix D">ITI TF-2: Appendix D</a>
        for a complete discussion of the grouping of these two actors.
      </p>
      <p>
        <span>The CCOW architecture is defined as a set of components that implement defined interfaces and their detailed methods as specified in the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology Independent Architecture</span>
        <span>document. This structure is different than the traditional IHE network transaction. As is depicted in the interaction diagram in Section 3.6.4, the IHE Change Context Transaction is composed of multiple CCOW-defined methods.</span>
      </p>
      <h3 id="3.6.2">3.6.2 Use Case Roles</h3>
      <p>
        <span style="font-weight:bold">Actor:</span>
        <span>Client Authentication Agent</span>
      </p>
      <p>
        <span style="font-weight:bold">Role:</span>
        <span>Initiates context change for user subject by supplying new context values.</span>
      </p>
      <p>
        <span style="font-weight:bold">Actor:</span>
        <span>Patient Context Participant</span>
      </p>
      <p>
        <span style="font-weight:bold">Role:</span>
        <span>Initiates context change for patient subject by supplying new context values. After receiving the context survey results it finalizes context change decision. Applications containing this actor without a patient lookup function would not use this transaction.</span>
      </p>
      <p>
        <span style="font-weight:bold">Actor:</span>
        <span>Context Manager</span>
      </p>
      <p>
        <span style="font-weight:bold">Role:</span>
        <span>Manages Change Context Transaction lifecycle.</span>
      </p>
      <h3 id="3.6.3">3.6.3 Referenced Standard</h3>
      <p>HL7 Context Management “CCOW” Standard, Version 1.4:</p>
      <p>
        <span style="width:36pt;display:inline-block"> </span>
        <span>Technology and Subject Independent Architecture</span>
      </p>
      <p>
        <span style="width:36pt;display:inline-block"> </span>
        <span>Component Technology Mapping: ActiveX</span>
      </p>
      <p>
        <span style="width:36pt;display:inline-block"> </span>
        <span>Component Technology Mapping: Web</span>
      </p>
      <p>
        <span style="width:36pt;display:inline-block"> </span>
        <span>Subject Data Definitions</span>
      </p>
      <h3 id="3.6.4">3.6.4 Messages</h3>
      <div id="f3.6-1">
        <img src="media/Figure_3.6-1.png" alt="" />
        <p class="figureTitle">Figure 3.6-1: Change Context sequence</p>
      </div>
      <h4 id="3.6.4.1">3.6.4.1 Context Change – StartContextChanges Method</h4>
      <h5 id="3.6.4.1.1">3.6.4.1.1 Trigger Events</h5>
      <p>This method is triggered by a specific user gesture. The user gesture that triggers this transaction in for the Patient Context Participant is one of selecting a patient. The user gesture that triggers this transaction for the Client Authentication Agent is authentication of a user.</p>
      <h5 id="3.6.4.1.2">3.6.4.1.2 Message Semantics</h5>
      <p>
        <span>The Patient Context Participant and/or the Client Authentication Agent will issue a StartContextChanges method of the ContextManager interface. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.6.5, for a more detailed description of the parameters associated with this method. IHE specifies no restrictions or extensions to the CCOW definition of the StartContextChanges method.</span>
      </p>
      <h5 id="3.6.4.1.3">3.6.4.1.3 Expected Actions</h5>
      <p>
        <span>The Context Manager returns the pending context coupon. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.6.5, for a more detailed description of the response issued by the Context Manager. IHE specifies no restrictions or extensions to the CCOW definition of the StartContextChanges method.</span>
      </p>
      <h4 id="3.6.4.2">3.6.4.2 Change Context – SetItemValues Method</h4>
      <h5 id="3.6.4.2.1">3.6.4.2.1 Trigger Events</h5>
      <p>The SetItemValues method is triggered by the return of a context coupon in response to the StartContextChanges method.</p>
      <h5 id="3.6.4.2.2">3.6.4.2.2 Message Semantics</h5>
      <h6 id="3.6.4.2.2.1">3.6.4.2.2.1 Patient Context Participant Actor support for CCOW Patient Subject</h6>
      <p>
        <span>The Patient Context Participant issues an invocation of the SetItemValues method of the ContextData interface to the Context Manager Actor. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.4.4, for a more detailed description of the parameters associated with this method, to be issued by the Patient Context Participant Actor. The Patient Context Participant supports synchronization around the CCOW patient subject. A Patient Context Participant performing a Change Context Transaction shall set the Patient.Id.IdList.1 patient identifier item. All other patient identifier items as defined by the CCOW standard and shown in Table 3.6.4.2-1 Patient Subject Identifier Items, are subject to deprecation in future releases of the standard.</span>
      </p>
      <p id="t3.6.4.2-1" class="tableTitle">Table 3.6.4.2-1: Patient Subject Identifier Items</p>
      <table cellspacing="0" cellpadding="0">
        <thead>
          <tr>
            <td class="tableHeader">Patient Subject Identifier Item Name</td>
            <td class="tableHeader">HL7 Meaning</td>
            <td class="tableHeader">HL7 Data Type</td>
            <td class="tableHeader">HL7 Semantic Constraints on Values</td>
            <td class="tableHeader">Case Sensitive</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <p>
                <span>Patient.Id.MRN.</span>
                <span style="font-style:italic">Suffix</span>
              </p>
            </td>
            <td>Patient’s medical record number, per PID-2</td>
            <td>ST</td>
            <td>HL7 Table 0203Identifier Type = MR</td>
            <td>No</td>
          </tr>
          <tr>
            <td>Patient.Id.MPI</td>
            <td>Patient’s identifier in the “Master Patient Index”, per PID-2</td>
            <td>ST</td>
            <td>HL7 Table 0203Identifier Type = PT or PI (as agreed upon by context sharing systems) and Assigning Authority represents the MPI system</td>
            <td>No</td>
          </tr>
          <tr>
            <td>Patient.Id.NationalIdNumber</td>
            <td>Patient’s national identifier number, per PID-2</td>
            <td>ST</td>
            <td>HL7 Table 0203Identifier Type = PT and Assigning Authority represents agreed-upon National Authority</td>
            <td>No</td>
          </tr>
          <tr>
            <td>Patient.Id.IdList</td>
            <td>A list of patient identifiers for a patient, per PID-3</td>
            <td>CX</td>
            <td>May be a repeating set of CX item values each of which contains an identifier that denotes the same patient</td>
            <td>No</td>
          </tr>
        </tbody>
      </table>
      <p>
        <span style="font-style:italic">Adapted from the HL7 Context Management “CCOW” Standard, version 1.4</span>
      </p>
      <p>The Patient.Id.IdList.1 item shall populate component 1, (the patient identifier), and either sub-component 1, (namespace ID), of component 4, (the assigning authority), of the CX data item. This is to be consistent with the requirements for the patient identifier as defined in the PIX Query transaction documented in Section 3.9.4.1.2.2.</p>
      <p>
        <span>The Patient Context Participant should use the SetItemValues associated with the ContextData interface, as defined in Sections 17.3.4.4 and 17.3.4.5 respectively of the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document.</span>
      </p>
      <h6 id="3.6.4.2.2.2">3.6.4.2.2.2 Client Authentication Agent Actor support for CCOW User Subject</h6>
      <p>
        <span>The Client Authentication Agent supports synchronization around the CCOW user subject. A Client Authentication Agent performing a Change Context Transaction shall set the User.Id.Logon.</span>
        <span style="font-style:italic">Suffix</span>
        <span>identifier item, where the</span>
        <span style="font-style:italic">Suffix</span>
        <span>is assigned as Kerberos. This would make the item name to be used by the Client Authentication Agent User.Id.Logon.Kerberos. The value of User.Id.Kerberos shall be the username@realm.</span>
      </p>
      <p>
        <span>The Client Authentication Agent shall use the SetItemValues associated with SecureContextData interface as defined in Section 17.3.13.3 of the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document.</span>
      </p>
      <h5 id="3.6.4.2.3">3.6.4.2.3 Expected Actions</h5>
      <p>
        <span>The Context Manager returns an acknowledgement of the changed data. IHE specifies no restrictions or extensions to the CCOW definition of the SetItemValues method. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.4.4, for a more detailed description of the response issued by the Context Manager to the Patient Context Participant Actor. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.13.3, for a more detailed description of the response issued by the Context Manager to the Client Authentication Agent Actor.</span>
      </p>
      <h4 id="3.6.4.3">3.6.4.3 Context Change – EndContextChanges</h4>
      <h5 id="3.6.4.3.1">3.6.4.3.1 Trigger Events</h5>
      <p>The EndContextChanges method is triggered by the completion of the SetItemValues method.</p>
      <h5 id="3.6.4.3.2">3.6.4.3.2 Message Semantics</h5>
      <p>
        <span>The Patient Context Participant and Client Authentication Agent Actors issue an EndContextChanges method of the ContextManager interface to the Context Manager Actor. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.6.6, for a description of the parameters associated with this method. IHE specifies no restrictions or extensions to the CCOW definition of the EndContextChanges method.</span>
      </p>
      <h5 id="3.6.4.3.3">3.6.4.3.3 Expected Actions</h5>
      <p>The EndContextChanges method triggers the ContextChangesPending method as defined in Section 3.13.4.1. The Context Manager returns the results of the context survey to the instigating Patient Context Participant or Client Authentication Agent Actor.</p>
      <p>If the instigating Patient Context Participant or Client Authentication Agent receives a unanimous acceptance in the survey results, then it triggers an accept in the PublishChangesDecision method.</p>
      <p>If the instigating Patient Context Participant or Client Authentication Agent receives one or more Conditional Accept responses in the survey results, then the application containing the actor must ask the user to continue, suspend context participation, or cancel the pending context change transaction. The user’s decision to continue will result in the context change being accepted. The user’s decision to suspend context participation will cancel the change transaction and allow the user to temporarily use the application without affecting the current context session. The user’s decision to cancel will cancel the pending context change transaction. At this point the Patient Context Participant or Client Authentication Agent triggers the PublishChangesDecision with the user’s response.</p>
      <p>In the event a participant application does not respond to the survey, after a configurable period of time the Context Manager will deem the application as “busy”. If the instigating participant application receives one or more busy responses, it shall only present the suspend or cancel choices. This prevents an application from inadvertently becoming out of synch with the context, unbeknownst to the user.</p>
      <p>
        <span>Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.6.6, for a more detailed description of the response issued by the Context Manager and actions required by the Patient Context Participant and or Client Authentication Agent Actors. IHE specifies no restrictions or extensions to the CCOW definition of the EndContextChanges method.</span>
      </p>
      <h4 id="3.6.4.4">3.6.4.4 Context Change – PublishChangesDecision</h4>
      <h5 id="3.6.4.4.1">3.6.4.4.1 Trigger Events</h5>
      <p>The PublishChangesDecision method is triggered by the return of EndContextChanges method.</p>
      <h5 id="3.6.4.4.2">3.6.4.4.2 Message Semantics</h5>
      <p>
        <span>The Patient Context Participant and Client Authentication Agent Actors shall issue either an accept or cancel via the PublishChangesDecision method of the ContextManager interface to the Context Manager Actor. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.6.8, for a more detailed description of the parameters associated with this method. IHE specifies no restrictions or extensions to the CCOW definition of the PublishChangesDecision method.</span>
      </p>
      <h5 id="3.6.4.4.3">3.6.4.4.3 Expected Actions</h5>
      <p>
        <span>When the PublishChangesDecision method is received by the Context Manager it triggers the ContextChangesAccepted or ContextChangesCancelled method as defined in Section 3.13.4.2 or Section 3.13.4.3 respectively. IHE specifies no restrictions or extensions to the CCOW definition of the PublishChangesDecision method. Refer to the</span>
        <span style="font-style:italic">HL7 Context Management “CCOW” Standard: Technology and Subject-Independent Architecture</span>
        <span>document, Section 17.3.6.8, for a description of the response issued by the Context Manager Actor.</span>
      </p>
          </div>
        </div>
      </main>
    </div>
   <footer class="ihe-footer">
    <div class="grid-container fluid">
      <div class="grid-x grid-margin-x align-middle">
        <div class="cell medium-9 small-order-2 medium-order-1 text-center medium-text-left">
          © 2000 &mdash; <span id="current-year"></span> IHE International | TEL 1-630-481-1004 | 820&nbsp;Jorie&nbsp;Boulevard,
          Oak&nbsp;Brook, IL&nbsp;60523
        </div>
        <div class="cell medium-3 small-order-1 medium-order-2 text-center medium-text-right ihe-footer-icons">
          <a href="mailto:secretary@ihe.net"><i class="fi fi-mail"></i></a>
          <a href="https://www.linkedin.com/company/iheintl"><i class="fi fi-social-linkedin"></i></a>
          <a href="https://twitter.com/IHEIntl"><i class="fi fi-social-twitter" aria-hidden="true"></i></a>
          <a href="https://www.youtube.com/user/IHEIntl"><i class="fi fi-social-youtube" aria-hidden="true"></i></a>
        </div>
      </div>
    </div>
  </footer>
    <script src="../../../js/vendor/jquery.min.js"></script>
    <script src="../../../js/vendor/motion-ui.min.js"></script>
    <script src="../../../js/vendor/what-input.js"></script>
    <script src="../../../js/vendor/foundation.min.js"></script>
    <script src="../../../js/app.js"></script>
  	<script>
	 window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-HLBNC861DJ');
	</script>
</body>
</html>
