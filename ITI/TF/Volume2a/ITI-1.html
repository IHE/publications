<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta charset="utf-8" />
    <title>IHE_ITI_TF_Rev16-0_Vol2a_FT</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <p>
      <img src="media/image1.jpeg" class="IHE logo" alt="IHE_LOGO_for_tf-docs" />
    </p>
    <p>IHE IT Infrastructure (ITI)</p>
    <p>Technical Framework</p>
    <p>Revision 16.0 – Final Text</p>
    <p>
      <hr />
    </p>
    <h2 xmlns="" id="3.1">3.1      Maintain Time [ITI-1]</h2>
    <p xmlns="">
      <span>This section corresponds to</span>
      <span>t</span>
      <span>ransaction</span>
      <span>[</span>
      <span>ITI-1</span>
      <span>]</span>
      <span>of the IHE IT Infrastructure Technical Framework. Transaction</span>
      <span>[</span>
      <span>ITI-1</span>
      <span>]</span>
      <span>is used by the Time Server and Time Client</span>
      <span>Actors</span>
      <span>.</span>
    </p>
    <h3 xmlns="" id="3.1.1">3.1.1 Scope</h3>
    <p xmlns="">
      <span>This transaction is used to synchronize time among multiple systems.</span>
    </p>
    <h3 xmlns="" id="3.1.2">3.1.2 Use Case Roles</h3>
    <p xmlns="">
      <img src="media/alql6-rgeyz.004.png" width="365" height="125" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" />
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Actor:</span>
      <span>Time Server</span>
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Role:</span>
      <span>Responds to NTP time service queries.</span>
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Actor:</span>
      <span>Time Client</span>
    </p>
    <p xmlns="">
      <span style="font-family:'Times New Roman'; font-weight:bold">Role:</span>
      <span>Uses NTP or SNTP time service responses to maintain synchronization with Time Servers and maintain the local system clock.</span>
    </p>
    <h3 xmlns="" id="3.1.3">3.1.3 Referenced Standard</h3>
    <p xmlns="">
      <span>NTP</span>
      <span style="width:13.33pt; display:inline-block"> </span>
      <span style="width:36pt; display:inline-block"> </span>
      <span>Network Time Protocol Version 3.</span>
      <span>RFC</span>
      <span>1305</span>
    </p>
    <p xmlns="">
      <span>SNTP</span>
      <span style="width:3.66pt; display:inline-block"> </span>
      <span style="width:36pt; display:inline-block"> </span>
      <span>Simple Network Time Protocol (SNTP)</span>
      <span>RFC</span>
      <span>4330</span>
    </p>
    <h3 xmlns="" id="3.1.4">3.1.4 Messages</h3>
    <p xmlns="">
      <span> </span>
    </p>
    <p xmlns="">
      <img src="media/alql6-rgeyz.005.png" width="316" height="192" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" />
    </p>
    <p xmlns="" style="font-size:11pt">
      <span style="font-family:Arial; font-weight:bold">Figure 3.1.4-1: Maintain Time Messages</span>
    </p>
    <h4 xmlns="" id="3.1.4.1">3.1.4.1    Maintain Time</h4>
    <p xmlns="">
      <span>The NTP transactions are described in detail in</span>
      <span>RFC</span>
      <span>1305. There is also extensive documentation on the transactions and recommendations on configurations and setup provided at</span>
      <a href="http://www.ntp.org/" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; text-decoration:underline; color:#0000ff">http://www.ntp.org</span>
      </a>
      <span>. Rather than reproduce all of that material as part of this Framework, readers are strongly encouraged to explore that site. The most common mode is the query-response mode that is described below. For other forms, see</span>
      <span>RFC</span>
      <span>1305 and the material on</span>
      <a href="http://www.ntp.org/" style="text-decoration:none">
        <span style="font-family:'Times New Roman'; text-decoration:underline; color:#0000ff">http://www.ntp.org</span>
      </a>
      <span>.</span>
    </p>
    <p xmlns="">
      <span>The Time Server shall support NTP (which implicitly means that SNTP clients are also supported). Secure NTP may also be supported. The Time Client shall utilize NTP when it is grouped with a Time Server. For ungrouped Time Clients with 1 second accuracy requirements, SNTP may be useable. Time Clients may also support Secure NTP.</span>
    </p>
    <p xmlns="" style="font-size:11pt">
      <span style="font-family:Arial; font-weight:bold">Table 3.1.4-1: Permissible Protocol Selections</span>
    </p>
    <table xmlns="" cellspacing="0" cellpadding="0" style="margin-left:9.9pt; border-collapse:collapse">
      <thead>
        <tr>
          <td style="width:56.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top; background-color:#d9d9d9">
            <p style="font-size:10pt">
              <span style="font-family:Arial; font-weight:bold">Protocol</span>
            </p>
          </td>
          <td style="width:70.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top; background-color:#d9d9d9">
            <p style="font-size:10pt">
              <span style="font-family:Arial; font-weight:bold">Time Server</span>
            </p>
          </td>
          <td style="width:106.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top; background-color:#d9d9d9">
            <p style="font-size:10pt">
              <span style="font-family:Arial; font-weight:bold">Time Client grouped with a Time Server</span>
            </p>
          </td>
          <td style="width:79.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top; background-color:#d9d9d9">
            <p style="font-size:10pt">
              <span style="font-family:Arial; font-weight:bold">Time Client (1s accuracy)</span>
            </p>
          </td>
          <td style="width:92.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top; background-color:#d9d9d9">
            <p style="font-size:10pt">
              <span style="font-family:Arial; font-weight:bold">Time Client (High accuracy)</span>
            </p>
          </td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="width:56.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>SNTP</span>
            </p>
          </td>
          <td style="width:70.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Must Support</span>
            </p>
          </td>
          <td style="width:106.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Prohibited</span>
            </p>
          </td>
          <td style="width:79.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Permitted</span>
            </p>
          </td>
          <td style="width:92.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Prohibited</span>
            </p>
          </td>
        </tr>
        <tr>
          <td style="width:56.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>NTP</span>
            </p>
          </td>
          <td style="width:70.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Must Support</span>
            </p>
          </td>
          <td style="width:106.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Must Support</span>
            </p>
          </td>
          <td style="width:79.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Permitted</span>
            </p>
          </td>
          <td style="width:92.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Permitted</span>
            </p>
          </td>
        </tr>
        <tr>
          <td style="width:56.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Secure NTP</span>
            </p>
          </td>
          <td style="width:70.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Optional</span>
            </p>
          </td>
          <td style="width:106.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Optional</span>
            </p>
          </td>
          <td style="width:79.2pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Optional</span>
            </p>
          </td>
          <td style="width:92.7pt; border-style:solid; border-width:0.75pt; padding-right:5.03pt; padding-left:5.03pt; vertical-align:top">
            <p style="font-size:9pt">
              <span>Optional</span>
            </p>
          </td>
        </tr>
      </tbody>
    </table>
    <h5 xmlns="" id="3.1.4.1.1">3.1.4.1.1   Trigger Events</h5>
    <p xmlns="">
      <span>In a query-response mode the Time Client queries the Time Server and receives a response. This transaction includes timing estimation of network delays.</span>
    </p>
    <h5 xmlns="" id="3.1.4.1.2">3.1.4.1.2   Message Semantics</h5>
    <p xmlns="">
      <span>The Time Client uses the Network Time Protocol (NTP) to synchronize its time with the Time Server. NTP clients can be configured to use a specific NTP server at a specific IP address, to obtain the NTP server address automatically from DHCP, and/or to discover the NTP server address automatically. Time clients shall support at least manual configuration and may support all three modes. Time Clients usually maintain time synchronization by adjusting the system clock, so that applications continue to use the system clock facilities. The specific precision of synchronization depends upon the requirements of specific actors.</span>
    </p>
    <p xmlns="">
      <span>Implementations must support a time synchronization accuracy with a median error of less than one second.</span>
    </p>
    <p xmlns="">
      <span>There is a Simple Network Time Protocol (SNTP)</span>
      <span>RFC</span>
      <span>4330 defined that can provide one second accuracy for Time Clients. It uses the exact same protocol as NTP, but does not include the measurement data used by the NTP high-accuracy statistical estimation algorithm. It has a lower implementation cost because it omits the measurements and statistical estimation needed to achieve higher accuracy. This omission of the statistical estimation makes it unsuitable for use when grouped with a Time Server. Its use is permitted for Time Clients that are not grouped with a Time Server.</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span>Note:</span>
      <span style="width:16pt; text-indent:0pt; display:inline-block"> </span>
      <span>1. The Time Client can often be implemented by using components provided by operating systems. Some offer only SNTP while others offer the choice of SNTP or NTP clients.</span>
      <br />
      <span>2. SNTP may achieve better than 1 second synchronization when combined with careful hardware, software, and custom network design. This network design will include restrictions on cabling design, hubs, routers, etc. that are outside the scope of the CT Profile and not verifiable except on a site by site basis.</span>
      <br />
      <span style="font-family:'Times New Roman'; font-size:12pt"> </span>
    </p>
    <p xmlns="">
      <span>The use of Secure NTP is not required. The risk of subversion of the time base to conceal penetration is considered very low, and the operational costs of maintaining Secure NTP too high in most environments.</span>
    </p>
    <h5 xmlns="" id="3.1.4.1.3">3.1.4.1.3   Expected Actions</h5>
    <p xmlns="">
      <span>The Time Server and Time Client will maintain synchronization to UTC. The Time Client maintains a statistical estimation process utilizing time estimates and network delay estimates from one or more Time Servers. This statistical estimation process yields a time estimate that is used to continually adjust the system clock.</span>
    </p>
    <p xmlns="" style="font-size:9pt">
      <span>Note:</span>
      <span style="width:16pt; text-indent:0pt; display:inline-block"> </span>
      <span>The relationship between the local reported time, UTC, and battery-backed clock is often a source of confusion. Different hardware and operating systems have different configuration requirements. These should be clearly documented and made clear in the user interface so that field service and operational staff do not introduce errors.</span>
    </p>
  </body>
</html>
