<html xmlns="http://www.w3.org/1999/xhtml" lang="en_US">
  <head>
    <meta charset="utf-8" />
    <title>IHE_ITI_TF_Rev16-0_Vol1_FT</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <p>
      <img src="media/image1.jpeg" class="IHE logo" alt="IHE_LOGO_for_tf-docs" />
    </p>
    <p>IHE IT Infrastructure (ITI)</p>
    <p>Technical Framework</p>
    <p>Volume 1</p>
    <p>Revision 16.0 – Final Text</p>
    <p>
      <hr />
    </p>
    <h1 xmlns="" id="4">4 Enterprise User Authentication (EUA)</h1>
    <p xmlns="">
      <span style="font-weight:bold;font-style:italic">Enterprise User Authentication Profile (EUA)</span>
      <span style="font-weight:bold">–</span>
      <span>This defines a means to establish one name per user that can then be used on all of the devices and software</span>
      <span style="font-weight:bold;font-style:italic" />
      <span>that participate in this integration profile. It greatly facilitates centralized user authentication management and provides users with the convenience and speed of a single sign-on. This profile leverages Kerberos (RFC1510) and the HL7 CCOW standard (user subject). User authentication is a necessary step for most application and data access operations and it is a workflow improvement for the users. The IHE EUA Profile adds value to the CCOW specification for the user subject by specifying the user subject and CCOW user subject suffix. This profile does not address security features such as audit trails, access control, authorization management and PKI. Future profiles will be developed to address these security features in a manner complementary to this EUA Profile.</span>
    </p>
    <p xmlns="">The environment is assumed to be a single enterprise, governed by a single security policy and having a common network domain. Unsecured domains -- in particular, Internet access -- are of interest, but not in the scope of this profile. Considerations for applications such as telemedicine and patient remote access to healthcare data are therefore also not in its scope. See <a href="../Volume1/ch-44.html#Appendix G">ITI TF-1: Appendix G</a>.</p>
    <p xmlns="">Node and machine authentication is specified in the Audit Trail and Node Authentication (ATNA) Profile and is not part of this profile.</p>
    <h2 xmlns="" id="4.1">4.1 EUA Actors/Transactions</h2>
    <p xmlns="">A number of transactions used in this profile conform to the Kerberos v5 standard, defined in RFC1510. This standard has been stable since 1993, is widely implemented on current operating system platforms, has successfully withstood attacks in its 10-year history, and is fully interoperable among platforms. For example, Sun Solaris, Linux, AIX, HPUX, IBM-z/OS, IBM-OS400, Novell, MAC OS X, and Microsoft Windows 2000/XP all implement Kerberos in an interoperable manner. This is not a complete list; many other vendors also support Kerberos.</p>
    <p xmlns="">For additional detailed information on Kerberos, beyond what is specified in this profile, we suggest these references:</p>
    <ul xmlns="">
      <li class="bullet-list1">RFC1510 - http://www.ietf.org/rfc/rfc1510.txt</li>
      <li class="bullet-list1">MIT's Kerberos home page - http://web.mit.edu/kerberos/www/</li>
      <li class="bullet-list1">The Moron's Guide to Kerberos - http://www.isi.edu/~brian/security/kerberos.html</li>
      <li class="bullet-list1">Microsoft Kerberos information http://www.microsoft.com/TechNet/prodtechnol/windows2000serv/deploy/kerberos.asp</li>
    </ul>
    <p xmlns="">
      <span>Kerberos implementations are widely available worldwide. Kerberos does include cryptography that may have restricted use laws in some countries. The US export regulations can be found at .</span>
      <a href="http://www.bxa.doc.gov/Encryption" style="text-decoration:none">
        <span style="text-decoration:underline">http://www.bxa.doc.gov/Encryption</span>
      </a>
    </p>
    <p xmlns="">Figure 4.1-1 shows the actors directly involved in the Enterprise User Authentication Profile and the relevant transactions between them. The box labeled "Other IHE Actor" represents actors from other integration profiles that are meant to be grouped with the nearby actor from within this profile. Other actors that may be indirectly involved due to their use of authentication, etc. are not shown.</p>
    <img xmlns="" src="media/a7222-00r44.007.png" width="528" height="319" alt="" />
    <p xmlns="" class="figureTitle">Figure 4.1-1: Enterprise Authentication Actor Diagram</p>
    <p xmlns="">Table 4.1-1 lists the transactions for each actor directly involved in the Enterprise User Authentication Profile. In order to claim support of this Integration Profile, an implementation must perform the required transactions (labeled “R”). Transactions labeled "O" are optional. A complete list of options defined in this Integration Profile and that implementations may choose to support is listed in Section 4.2.</p>
    <p xmlns="" class="tableTitle">Table 4.1-1: Enterprise User Authentication Profile - Actors and Transactions</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <td style="width:143.45pt" class="tableHeader">Actors</td>
          <td style="width:164.25pt" class="tableHeader">Transactions</td>
          <td style="width:67.65pt" class="tableHeader">Optionality</td>
          <td style="width:64.1pt" class="tableHeader">Section</td>
        </tr>
      </thead>
      <tbody>
        <tr style="height:14.85pt">
          <td rowspan="2" style="width:143.45pt">Kerberos Authentication Server</td>
          <td style="width:164.25pt">Get User Authentication [ITI-2]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-2.html#3.2">ITI TF-2a: 3.2</a></td>
        </tr>
        <tr>
          <td style="width:164.25pt">Get Service Ticket [ITI-3]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-3.html#3.3">ITI TF-2a: 3.3</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td rowspan="6" style="width:143.45pt">Client Authentication Agent</td>
          <td style="width:164.25pt">Get User Authentication [ITI-2]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-2.html#3.2">ITI TF-2a: 3.2</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td style="width:164.25pt">Get Service Ticket [ITI-3]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-3.html#3.3">ITI TF-2a: 3.3</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td style="width:164.25pt">Kerberized Communication [ITI-4]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-4.html#3.4">ITI TF-2a: 3.4</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td style="width:164.25pt">Join Context [ITI-5]</td>
          <td style="width:67.65pt">O [Note1]</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-5.html#3.5">ITI TF-2a: 3.5</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td style="width:164.25pt">Change Context [ITI-6]</td>
          <td style="width:67.65pt">O [Note1]</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-6.html#3.6">ITI TF-2a: 3.6</a></td>
        </tr>
        <tr>
          <td style="width:164.25pt">Leave Context [ITI-7]</td>
          <td style="width:67.65pt">O [Note1]</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-7.html#3.7">ITI TF-2a: 3.7</a></td>
        </tr>
        <tr>
          <td style="width:143.45pt">Kerberized Server</td>
          <td style="width:164.25pt">Kerberized Communication [ITI-4]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-4.html#3.4">ITI TF-2a: 3.4</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td rowspan="3" style="width:143.45pt">User Context Participant</td>
          <td style="width:164.25pt">Join Context [ITI-5]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-5.html#3.5">ITI TF-2a: 3.5</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td style="width:164.25pt">Follow Context [ITI-13]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-13.html#3.13">ITI TF-2a: 3.13</a></td>
        </tr>
        <tr>
          <td style="width:164.25pt">Leave Context [ITI-7]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-7.html#3.7">ITI TF-2a: 3.7</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td rowspan="4" style="width:143.45pt">Context Manager</td>
          <td style="width:164.25pt">Join Context [ITI-5]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-5.html#3.5">ITI TF-2a: 3.5</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td style="width:164.25pt">Follow Context [ITI-13]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-13.html#3.13">ITI TF-2a: 3.13</a></td>
        </tr>
        <tr style="height:14.85pt">
          <td style="width:164.25pt">Leave Context [ITI-7]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-7.html#3.7">ITI TF-2a: 3.7</a></td>
        </tr>
        <tr>
          <td style="width:164.25pt">Change Context [ITI-6]</td>
          <td style="width:67.65pt">R</td>
          <td style="width:64.1pt"><a href="../Volume2a/ITI-6.html#3.6">ITI TF-2a: 3.6</a></td>
        </tr>
      </tbody>
    </table>
    <p xmlns="" class="note">Note 1: When the Authentication for User Context Option is supported, then the transaction is required.</p>
    <p xmlns="">CCOW facilitates the sharing of the identity of a EUA authentication user but does not provide for the authentication of users. In order for the Context Manager and User Context Participant to participate in the EUA Profile it is required that the Client Authentication Agent supports the Authentication for User Option. This design provides the User Context Participant with a consistent and enterprise recognized user identity, but does not define access to the Kerberos credentials. Future IHE profiles may address this limitation. Note that the Client Authentication Agent is the key actor when PSA and EUA are combined. See the use case outlined in Section 4.3.2. Applications that implement both the Client Authentication Agent and the User Context Participant shall support configurations where either actor is disabled.</p>
    <p xmlns="">In any single user environment, there shall be only one Client Authentication Agent for one user. In a multi-user environment there shall not be more than one Client Authentication Agent per user.</p>
    <h2 xmlns="" id="4.2">4.2 EUA Actor Options</h2>
    <p xmlns="">Options that may be selected for this Integration Profile are listed in Table 4.2-1 along with the Actors to which they apply. Dependencies between options when applicable are specified in notes.</p>
    <p xmlns="" class="tableTitle">Table 4.2-1: Enterprise User Authentication - Actors and Options</p>
    <table xmlns="" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <td style="width:121.7pt" class="tableHeader">Actor</td>
          <td style="width:122.95pt" class="tableHeader">Options</td>
          <td style="width:72.2pt" class="tableHeader">Vol. &amp; Section</td>
        </tr>
      </thead>
      <tbody>
        <tr style="height:16.6pt">
          <td style="width:121.7pt">Kerberos Authentication Server</td>
          <td style="width:122.95pt">No options defined</td>
          <td style="width:72.2pt">- -</td>
        </tr>
        <tr style="height:11.65pt">
          <td style="width:121.7pt">Client Authentication Agent</td>
          <td style="width:122.95pt">Authentication for User Context</td>
          <td style="width:72.2pt"><a href="../Volume2a/ITI-6.html#3.6">ITI TF-2a: 3.6</a></td>
        </tr>
        <tr style="height:26.05pt">
          <td style="width:121.7pt">Kerberized Server</td>
          <td style="width:122.95pt">No options defined</td>
          <td style="width:72.2pt">- -</td>
        </tr>
        <tr style="height:26.05pt">
          <td style="width:121.7pt">Context Manager</td>
          <td style="width:122.95pt">No options defined</td>
          <td style="width:72.2pt">- -</td>
        </tr>
        <tr style="height:26.05pt">
          <td style="width:121.7pt">User Context Participant</td>
          <td style="width:122.95pt">No options defined</td>
          <td style="width:72.2pt">- -</td>
        </tr>
      </tbody>
    </table>
    <h2 xmlns="" id="4.3">4.3 Enterprise User Authentication Profile Process Flow</h2>
    <h3 xmlns="" id="4.3.1">4.3.1 Basic User Authentication Process Flow</h3>
    <p xmlns="">The following diagram describes the sequence of events in the use of Enterprise User Authentication:</p>
    <img xmlns="" src="media/a7222-00r44.008.png" width="645" height="433" alt="" />
    <p xmlns="" class="figureTitle">Figure 4.3.1-1: Basic Process Flow in Enterprise User Authentication Profile</p>
    <p xmlns="">The sequence of events in the use of Enterprise User Authentication is:</p>
    <ul xmlns="">
      <li class="bullet-list1">The user begins the session. This initiates a local username/password authentication that is converted into the challenge/response system used by Kerberos to avoid transmitting the password over the network. This information is used as part of the Get User Authentication Transaction to get a “Ticket Granting Ticket” (TGT).</li>
      <li class="bullet-list1">The TGT is saved and managed internally by the Client Authentication Agent Actor. The TGT acts as confirmation that the user has been authenticated.</li>
      <li class="bullet-list1">For each service that has been Kerberized, the Client Authentication Agent uses the Get Service Ticket Transaction to obtain a service ticket. The service ticket is then used as part of the Kerberized Communication Transaction.</li>
    </ul>
    <p xmlns="">A Kerberized Communication is a Kerberos data exchange that is integrated into another protocol, such as HL7 or DICOM, which is used in another IHE transaction. The details of Kerberization vary and are described separately for the protocols that have been Kerberized. The Kerberization enables the other IHE Actors involved in the other transaction to use the identity of the authenticated user for purposes such as user authorization or audit messages.</p>
    <p xmlns="">The Client Authentication Agent also maintains an internal cache of credentials such as the TGT and service tickets. It renews the tickets as necessary to deal with ticket expirations, re-uses tickets while they are still valid, and removes credentials from the cache when the user session ends. The Client Authentication Agent shall make the Kerberos credentials available using the local operating system mechanisms. Other IHE Actors that need the Kerberos credentials are strongly encouraged to obtain them using the local operating system mechanisms. Operating system support for ticket management has been implemented and has been defined for various operating systems.</p>
    <h3 xmlns="" id="4.3.2">4.3.2 User Authentication with User Synchronized Applications Process Flow</h3>
    <p xmlns="">In this use case an application supporting user authentication on the same desktop as another application is synchronized to the same user identity, thus giving the user a single-sign-on experience.</p>
    <p xmlns="">The following diagram describes the sequence of events in the use of User Authentication with User Synchronized Applications:</p>
    <img xmlns="" src="media/a7222-00r44.009.png" width="613" height="433" alt="" />
    <p xmlns="" class="figureTitle">Figure 4.3.2-1: Process Flow with User Synchronized Applications</p>
    <p xmlns="">The sequence of events of the User Authentication with User Synchronized Applications is:</p>
    <ul xmlns="">
      <li class="bullet-list1">The user initiates a login by starting the Client Authentication Agent.</li>
      <li class="bullet-list1">The Client Authentication Agent joins the CCOW user context by sending a Join Context Transaction to the Context Manager Actor. At this point there is no user identity in the context.</li>
      <li class="bullet-list1">The user provides their username and password to the Client Authentication Agent. This authentication information is converted into the challenge/response system used by Kerberos to avoid transmitting the password over the network. This information is used as part of the Get User Authentication Transaction to get a “Ticket Granting Ticket” (TGT).</li>
      <li class="bullet-list1">The TGT is saved and managed internally by the Client Authentication Agent Actor. The TGT acts as confirmation that the user has been authenticated.</li>
      <li class="bullet-list1">A Change Context Transaction is sent to the Context Manager with the users fully qualified user name.</li>
      <li class="bullet-list1">The user is now logged in to the User Context Participant.</li>
      <li class="bullet-list1">When the user ends the session, a Change Context Transaction is sent to the Context Manager with a NULL user name.</li>
      <li class="bullet-list1">The user is logged out of the User Context Participant.</li>
    </ul>
    <h3 xmlns="" id="4.3.3">4.3.3 Fast User Switching with Multiple Applications Process Flow</h3>
    <p xmlns="">The use model in the clinical environment can be characterized as multiple clinicians using the same workstation for short intervals of time many times a day. In this shared workstation environment, the user requires quick access to the patient data contained in the applications. Traditional methods of logging in and out of the workstation at the operating system or network level can take too long and typically force the applications to terminate. This means that the application clients will potentially need to initialize and establish new database connections, introducing further delay to the Clinician access to patient data. The CCOW standard and more specifically the “user” subject provides a means in combination with the Enterprise Authenticator to allow the user to authenticate at the application level and have all of the other applications tune to the new user.</p>
    <p xmlns="">The following diagram describes the sequence of events in the case of Fast User Switching with Multiple Applications:</p>
    <p xmlns="" style="font-size:11pt">
      <img src="media/a7222-00r44.010.png" width="663" height="576" alt="" />
      <span style="font-weight:bold">Figure 4.3.3-1: Fast User Switching when using Multiple Applications</span>
    </p>
    <p xmlns="">The process flow would be similar to the following:</p>
    <p xmlns="">Clinician A launches and authenticates via an application containing the Client Authentication Agent (refer to Figure 4.3.3-1 for details). This actor joins the context session and performs a context change to set Clinician A as the user in context.</p>
    <p xmlns="">Clinician A launches the clinical data repository application, containing a User Context Participant Actor, depicted as User Context Participant 1. The actor joins the context session, gets the current user from the Context Manager, and logs clinician A into the application.</p>
    <p xmlns="">Clinician A launches a cardiology application, containing a User Context Participant Actor, depicted as User Context Participant 2. The actor joins the context session, gets the current user from the Context Manager, and logs clinician A into the application.</p>
    <p xmlns="">Clinician A does his job and then gets called away and leaves the workstation.</p>
    <p xmlns="">Clinician B approaches the workstation and authenticates using the Client Authentication Agent. This results in a context change from Clinician A to Clinician B being set in context without the delay typically associated with a logout and login at the operating system level. The clinical data repository and the cardiology application are notified of the context change by the Context Manager resulting in Clinician A being logged out of both applications and Clinician B being logged into both applications.</p>
    <p xmlns="">Clinician B does his job and then closes the clinical data repository application, which leaves the context prior to terminating the application.</p>
    <p xmlns="">Clinician B is finished reviewing patient data within the cardiology application and logs out using the Client Authentication Agent. This forces a context change to remove the current user from the context, which results in the user being logged out of the cardiology application.</p>
  </body>
</html>
