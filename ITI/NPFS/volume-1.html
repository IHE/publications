<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>1:47 Non-Patient File Sharing (NPFS) Profile - Non-patient File Sharing (NPFS) v2.2.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/ihe.css" rel="stylesheet"/>
<link href="assets/css/nonum.css" rel="stylesheet"/>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async> </script> 


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"2"}
    h3,h4,h5,h6{--heading-prefix:"2"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
  <a id="ihe-logo" no-external="true" href="http://profiles.ihe.net">
    <img height="71" alt="Visit the IHE website" src="assets/images/ihe-international.png"/>
  </a>
</div>
<div id="family-nav">
  <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="30" alt="Visit the FHIR website" src="assets/images/fhir-logo.png"/> </a>
</div>
<!--
<div id="hl7-search">
  <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
</div>
-->
<div id="project-nav">
  
  
    <a id="project-logo" no-external="true" href="http://profiles.ihe.net/ITI/index.html"><img height="70" alt="Visit the ITI website" src="assets/images/ITI.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Non-patient File Sharing (NPFS)</span>
            <br/>
            <span style="display:inline-block;">2.2.0 - Trial-Implementation



  <img alt="International flag" src="assets/images/001.svg" height="16" title="International"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">NPFS Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 1
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="volume-1.html">Introduction</a>
      </li>
      <li>
        <a href="volume-1.html#1471-npfs-actors-transactions-and-content-modules">Actors and Transactions</a>
      </li>
      <li>
        <a href="volume-1.html#1472-npfs-actor-options">Actor Options</a>
      </li>
      <li>
        <a href="volume-1.html#1473-npfs-required-actor-groupings">Required Groupings</a>
      </li>
      <li>
        <a href="volume-1.html#1474-npfs-overview">Overview</a>
      </li>
      <li>
        <a href="volume-1.html#1475-npfs-security-considerations">Security Considerations</a>
      </li>
      <li>
        <a href="volume-1.html#1476-npfs-cross-profile-considerations">Cross-Profile Considerations</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="ITI-87.html">Submit File [ITI-87]</a>
      </li>
      <li>
        <a href="ITI-88.html">Search File [ITI-88]</a>
      </li>
      <li>
        <a href="ITI-89.html">Update DocumentReference [ITI-89]</a>
      </li>
      <li>
        <a href="ITI-109.html">Retrieve File [ITI-109]</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Other
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="other.html">Changes to Other IHE Specifications</a>
      </li>
      <li>
        <a href="download.html">Download and Analysis</a>
      </li>
      <li>
        <a href="testplan.html">Test Plan</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>1:47 Non-Patient File Sharing (NPFS) Profile</b></li>

          <span style="float:right;">

            <a href="index.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="ITI-87.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the Non-patient File Sharing (NPFS) (v2.2.0: Publication) based on <a no-external="true" href="http://hl7.org/fhir/R4">FHIR R4</a>. This is the current published version.  For a full list of available versions, see the <a no-external="true" href="https://profiles.ihe.net/ITI/NPFS/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>1:47 Non-Patient File Sharing (NPFS) Profile</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#1471-npfs-actors-transactions-and-content-modules" id="markdown-toc-1471-npfs-actors-transactions-and-content-modules">1:47.1 NPFS Actors, Transactions, and Content Modules</a>    <ul>
      <li><a href="#14711-actor-descriptions-and-actor-profile-requirements" id="markdown-toc-14711-actor-descriptions-and-actor-profile-requirements">1:47.1.1 Actor Descriptions and Actor Profile Requirements</a></li>
    </ul>
  </li>
  <li><a href="#1472-npfs-actor-options" id="markdown-toc-1472-npfs-actor-options">1:47.2 NPFS Actor Options</a>    <ul>
      <li><a href="#14721-file-retrieve-option" id="markdown-toc-14721-file-retrieve-option">1:47.2.1 File Retrieve Option</a></li>
      <li><a href="#14722-update-file-metadata-option" id="markdown-toc-14722-update-file-metadata-option">1:47.2.2 Update File Metadata Option</a></li>
    </ul>
  </li>
  <li><a href="#1473-npfs-required-actor-groupings" id="markdown-toc-1473-npfs-required-actor-groupings">1:47.3 NPFS Required Actor Groupings</a></li>
  <li><a href="#1474-npfs-overview" id="markdown-toc-1474-npfs-overview">1:47.4 NPFS Overview</a>    <ul>
      <li><a href="#14741-concepts--distinguishing-files-from-documents" id="markdown-toc-14741-concepts--distinguishing-files-from-documents">1:47.4.1 Concepts – distinguishing files from documents</a></li>
      <li><a href="#14742-use-cases" id="markdown-toc-14742-use-cases">1:47.4.2 Use Cases</a></li>
    </ul>
  </li>
  <li><a href="#1475-npfs-security-considerations" id="markdown-toc-1475-npfs-security-considerations">1:47.5 NPFS Security Considerations</a></li>
  <li><a href="#1476-npfs-cross-profile-considerations" id="markdown-toc-1476-npfs-cross-profile-considerations">1:47.6 NPFS Cross Profile Considerations</a></li>
</ul>

</div>

<p>The Non-Patient File Sharing Profile defines how to enable sharing of
non-patient files such as clinical workflow definitions, domain
policies, and stylesheets. Those files can be created and consumed by
many different systems involved in a wide variety of data sharing
workflows.</p>

<p>The NPFS Profile describes a mechanism for sharing non-patient files; it
does not require that the actors be able to process the contents of the
files being shared.</p>

<p>The NPFS Profile specifies transactions for the sharing of files. Any
file type can be shared using this profile; however, specific guidance
is given for three types of files:</p>

<ul>
  <li>
    <p>Workflow Definitions: files which define the processing rules for a
specific clinical/administrative workflow (see <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-30.html#30.4.1.1">ITI TF-1: 30.4.1.1 “XDW Workflow Architecture”</a>)</p>
  </li>
  <li>
    <p>Privacy Domain Policies: files which describe a specific privacy
policy that applies to, or may be agreed to, by a patient (see <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-19.html#19.2">ITI TF-1: 19.2 “Creating Patient Privacy Policies”</a>)</p>
  </li>
  <li>
    <p>Stylesheets: structured documents that can be used by user-agents
(e.g., Web Browsers) to render the content of an XML document</p>
  </li>
</ul>

<p>Local policies may extend the types of files that are being shared using
NPFS and that can be classified using the metadata model described in
this profile.</p>

<h2 id="1471-npfs-actors-transactions-and-content-modules">1:47.1 NPFS Actors, Transactions, and Content Modules</h2>

<p>This section defines the actors, transactions, and/or content modules in
this profile. General definitions of actors are given in the Technical
Frameworks General Introduction Appendix A at
<a href="https://www.ihe.net/resources/technical_frameworks/#GenIntro">https://www.ihe.net/resources/technical_frameworks/#GenIntro</a>.</p>

<p>Figure 1:47.1-1 shows the actors directly involved in NPFS Profile and the
relevant transactions between them. If needed for context, other actors
that may be indirectly involved due to their participation in other
related profiles are shown in dotted lines. Actors which have a
mandatory grouping are shown in conjoined boxes.</p>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="166px" preserveAspectRatio="none" style="width:662px;height:166px;background:#FFFFFF;" version="1.1" viewBox="0 0 662 166" width="662px" zoomAndPan="magnify"><defs /><g><!--entity Source--><g id="elem_Source"><rect fill="#F1F1F1" height="37.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="44.7" y="123" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="54.7" y="147.5332">File Source</text></g><!--entity Consumer--><g id="elem_Consumer"><rect fill="#F1F1F1" height="37.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="436.7" y="123" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="446.7" y="147.5332">File Consumer</text></g><!--entity Manager--><g id="elem_Manager"><rect fill="#F1F1F1" height="37.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="240.2" y="7" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="250.2" y="31.5332">File Manager</text></g><!--link Source to Manager--><g id="link_Source_Manager"><path d="M106.91,122.99 C120.8,108.43 141.96,88.24 163.7,75 C185.75,61.58 212.17,50.89 235.27,43.05 " fill="none" id="Source-to-Manager" style="stroke:#181818;stroke-width:1.0;" /><polygon fill="#181818" points="240.14,41.42,230.3361,40.4802,235.398,43.0054,232.8728,48.0674,240.14,41.42" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="164.7" y="89.4951">Update Document Reference [ITI-89]</text></g><!--reverse link Manager to Source--><g id="link_Manager_Source"><path d="M235.01,28.78 C163.76,32.35 47.5,43.04 20.7,75 C6,92.53 27.08,110.2 49.86,122.84 " fill="none" id="Manager-backto-Source" style="stroke:#181818;stroke-width:1.0;" /><polygon fill="#181818" points="240.06,28.54,230.8765,24.9813,235.0659,28.7826,231.2647,32.9719,240.06,28.54" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="21.7" y="89.4951">Submit File [ITI-87]</text></g><!--reverse link Manager to Consumer--><g id="link_Manager_Consumer"><path d="M329.51,47.64 C344.82,56.05 362.65,65.92 378.7,75 C406.98,90.98 438.96,109.54 461.84,122.9 " fill="none" id="Manager-backto-Consumer" style="stroke:#181818;stroke-width:1.0;" /><polygon fill="#181818" points="324.84,45.07,330.7953,52.9144,329.2202,47.4812,334.6533,45.9061,324.84,45.07" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="410.7" y="89.4951">Search File [ITI-88]</text></g><!--reverse link Manager to Consumer--><g id="link_Manager_Consumer"><path d="M348.52,30.44 C411.26,35.56 506.38,47.7 528.7,75 C540.69,89.65 527.54,108.88 513.9,122.8 " fill="none" id="Manager-backto-Consumer-1" style="stroke:#181818;stroke-width:1.0;" /><polygon fill="#181818" points="343.31,30.02,351.9747,34.7023,348.2951,30.4057,352.5917,26.7261,343.31,30.02" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="533.7" y="89.4951">Retrieve File [ITI-109]</text></g></g></svg>
<p><b>Figure 1:47.1-1: NPFS Actor Diagram</b></p>
</div>

<p>Table 1:47.1-1 lists the transactions for each actor directly involved in the NPFS Profile. To claim
compliance with this profile, an actor shall support all required transactions (labeled “R”) and
may support the optional transactions (labeled “O”).</p>

<div>
<table width="70%" border="1" borderspacing="0" style="border: 1px solid black; border-collapse: collapse">
    <caption style="text-align:left">
        <b> Table 1:47.1-1: NPFS Profile - Actors and transactions </b>
    </caption>
    <thead>
        <tr>
            <th style="text-align:center">Actors</th>
            <th style="text-align:center">Transactions</th>
            <th style="text-align:center">Optionality</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td rowspan="4" style="padding-left:10px">File Manager</td>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-87.html">Submit File [ITI-87]</a></td>
            <td style="text-align:center">R</td>
		</tr>
        <tr>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-88.html">Search File [ITI-88]</a></td>
            <td style="text-align:center">R</td>
		</tr>
		<tr>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-109.html">Retrieve File [ITI-109]</a></td>
            <td style="text-align:center">R</td>
		</tr>
		<tr>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-89.html">Update DocumentReference [ITI-89]</a></td>
            <td style="text-align:center">R</td>
		</tr>
		<tr>
            <td rowspan="2" style="padding-left:10px">File Consumer</td>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-88.html">Search File [ITI-88]</a></td>
            <td style="text-align:center">R</td>
		</tr>
		<tr>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-109.html">Retrieve File [ITI-109]</a></td>
            <td style="text-align:center">O</td>
		</tr>
		<tr>
            <td rowspan="2" style="padding-left:10px">File Source</td>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-87.html">Submit File [ITI-87]</a></td>
            <td style="text-align:center">R</td>
		</tr>
		<tr>
            <td style="padding-left:10px"><a href="https://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-89.html">Update DocumentReference [ITI-89]</a></td>
            <td style="text-align:center">O</td>
		</tr>
    </tbody>
</table>
</div>
<p><br /></p>

<h3 id="14711-actor-descriptions-and-actor-profile-requirements">1:47.1.1 Actor Descriptions and Actor Profile Requirements</h3>

<p>Most requirements are documented in transactions (Volume 2) and Content
Modules (Volume 3). This section documents any additional requirements
on profile’s actors.</p>

<h4 id="147111-file-manager">1:47.1.1.1 File Manager</h4>

<p>The File Manager stores files provided by the File Source and maintains
related metadata. The File Manager responds to search and retrieve
requests initiated by the File Consumer. The File Manager responds to
metadata update requests initiated by the File Source.</p>

<h4 id="147112-file-consumer">1:47.1.1.2 File Consumer</h4>

<p>The File Consumer queries for file metadata meeting certain criteria,
and may retrieve selected files.</p>

<h4 id="147113-file-source">1:47.1.1.3 File Source</h4>

<p>The File Source publishes and updates files produced by either the File
Source or by other systems. It is responsible for sending files and
related metadata to a File Manager. The File Source can send metadata
update requests to the File Manager.</p>

<h2 id="1472-npfs-actor-options">1:47.2 NPFS Actor Options</h2>

<p>Options that may be selected for each actor in this profile, if any, are
listed in Table 1:47.2-1. Dependencies between options when applicable are
specified in notes.</p>

<div>
<table width="50%" border="1" borderspacing="0" style="border: 1px solid black; border-collapse: collapse">
    <caption style="text-align:left">
        <b> Table 1:47.2-1: Not-patient File Sharing - Actors and Options </b>
    </caption>
    <thead>
        <tr>
            <th style="text-align:center">Actors</th>
            <th style="text-align:center">Option Name</th>
            <th style="text-align:center">Reference</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="padding-left:10px">File Manager</td>
            <td style="padding-left:10px">No options defined</td>
            <td style="padding-left:10px">--</td>
        </tr>
        <tr>
            <td style="padding-left:10px">File Consumer</td>
            <td style="padding-left:10px">File Retrieve</td>
            <td style="padding-left:10px">Section 47.2.1</td>
        </tr>
        <tr>
            <td style="padding-left:10px">File Source</td>
            <td style="padding-left:10px">Update File Metadata</td>
            <td style="padding-left:10px">Section 47.2.2</td>
        </tr>
    </tbody>
</table>
</div>
<p><br /></p>

<h3 id="14721-file-retrieve-option">1:47.2.1 File Retrieve Option</h3>

<p>The File Retrieve Option enables a File Consumer to retrieve a file
stored/managed by the File Manager.</p>

<p>A File Consumer that supports the File Retrieve Option shall support the
Retrieve File [ITI-109] transaction.</p>

<h3 id="14722-update-file-metadata-option">1:47.2.2 Update File Metadata Option</h3>

<p>The Update File Metadata Option enables a File Source to update the
metadata of a file stored/managed by the File Manager.</p>

<p>A File Source that supports the Update File Metadata Option shall
support the Update DocumentReference [ITI-89] transaction.</p>

<h2 id="1473-npfs-required-actor-groupings">1:47.3 NPFS Required Actor Groupings</h2>

<p>This profile does not mandate the grouping with other actors.</p>

<h2 id="1474-npfs-overview">1:47.4 NPFS Overview</h2>

<h3 id="14741-concepts--distinguishing-files-from-documents">1:47.4.1 Concepts – distinguishing files from documents</h3>

<p>The NPFS Profile uses the term “<strong>file</strong>” to mark a clear distinction
from the IHE Document Sharing profiles.</p>

<p>A “<strong>file</strong>” represents a collection of information stored on a computer
as one unit. For the purposes of this profile, a file is not
patient-related, as it does not contain patient health identifying
information. It may contain other sensitive information.</p>

<p>Other IHE profiles are used to share (using different sharing paradigms)
information related to patients. In IHE terminology, such
patient-specific content is a “<strong>document</strong>.”</p>

<h3 id="14742-use-cases">1:47.4.2 Use Cases</h3>

<h4 id="147421-use-case-1-manage-stylesheets">1:47.4.2.1 Use Case #1: Manage Stylesheets</h4>

<p>A technician creates a stylesheet to render the XML of
CDA<sup>®</sup> Laboratory Reports produced in all the Laboratory
Information System (LIS) involved in the Healthcare Information Exchange
(HIE). The technician wants to make the stylesheet available to all the
LISs involved in the HIE so that they can search for the stylesheet and
reference it as an XSL transformation of the Laboratory Report.</p>

<h5 id="1474211-manage-stylesheets---use-case-description">1:47.4.2.1.1 Manage Stylesheets - Use Case Description</h5>

<p>A Healthcare Organization desires to use a stylesheet for uniform
rendering of XML Laboratory Reports produced within the organization.
Mr. Black, a technician of the Healthcare Organization, creates the
stylesheet. Then Mr. Black uses his File Source to publish the
stylesheet file into a system that manages non-patient files (File
Manager) using the Submit File [ITI-87] transaction. Now the
stylesheet will be available to all the LISs involved in the
organization.</p>

<p>A Laboratory Information System, according to the HIE policy, should be
able to identify the stylesheet that can be used to render the CDA
document.</p>

<p>Mrs. White uses the LIS to retrieve a patient’s CDA R2 Lab Report
document from the HIE. The LIS also issues a query using the Search File
[ITI-88] transaction, to search for a stylesheet file published by the
HIE Organization, in order to discover the resource URL of the
stylesheet applicable to the Laboratory Reports. This URL is used to
reference it as an XSL transformation of the Laboratory Report.</p>

<h5 id="1474212-stylesheets-management-process-flow">1:47.4.2.1.2 Stylesheet’s Management Process Flow</h5>

<ul>
  <li>
    <p>The Health Information System acting as a File Source issues a Submit
File [ITI-87] transaction to the File Manager to submit the
stylesheet</p>
  </li>
  <li>
    <p>The LIS acting as a File Consumer issues a Search File [ITI-88]
transaction to the File Manager, using the class parameter to search
for stylesheets, and the author.identifier parameter to search for the
organization that submitted the file. The query response contains the
URL of the stylesheet, that will be retrieved using a Retrieve
File [ITI-109] transaction.</p>
  </li>
</ul>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="435px" preserveAspectRatio="none" style="width:1033px;height:435px;background:#FFFFFF;" version="1.1" viewBox="0 0 1033 435" width="1033px" zoomAndPan="magnify"><defs /><g><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="69.9609" /><rect fill="#FFFFFF" height="46.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="256.7734" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="350.1797" /><rect fill="#FFFFFF" height="219.5156" style="stroke:#181818;stroke-width:1.0;" width="10" x="632" y="161.0156" /><rect fill="#FFFFFF" height="249.8672" style="stroke:#181818;stroke-width:1.0;" width="10" x="947" y="130.6641" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="37.6094" y2="398.5313" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="356.5" x2="356.5" y1="37.6094" y2="398.5313" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="637" x2="637" y1="37.6094" y2="398.5313" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="952" x2="952" y1="37.6094" y2="398.5313" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="26.5332">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="397.5313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="419.0645">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="308.5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="315.5" y="26.5332">File Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="308.5" y="397.5313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="315.5" y="419.0645">File Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="584" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="591" y="26.5332">File Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="584" y="397.5313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="591" y="419.0645">File Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="877" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="884" y="26.5332">Document Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="877" y="397.5313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="884" y="419.0645">Document Repository</text><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="69.9609" /><rect fill="#FFFFFF" height="46.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="256.7734" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="350.1797" /><rect fill="#FFFFFF" height="219.5156" style="stroke:#181818;stroke-width:1.0;" width="10" x="632" y="161.0156" /><rect fill="#FFFFFF" height="249.8672" style="stroke:#181818;stroke-width:1.0;" width="10" x="947" y="130.6641" /><polygon fill="#181818" points="340,65.9609,350,69.9609,340,73.9609,344,69.9609" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="346" y1="69.9609" y2="69.9609" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="55" y="65.1045">Submit File [ITI-87] Create File Request message</text><polygon fill="#181818" points="59,96.3125,49,100.3125,59,104.3125,55,100.3125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="53" x2="356" y1="100.3125" y2="100.3125" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="65" y="95.4561">Submit File Response message</text><polygon fill="#181818" points="935,126.6641,945,130.6641,935,134.6641,939,130.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="637" x2="941" y1="130.6641" y2="130.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="644" y="125.8076">Retrieve Document Set [ITI-43] (Laboratory Report)</text><polygon fill="#181818" points="653,157.0156,643,161.0156,653,165.0156,649,161.0156" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="647" x2="946" y1="161.0156" y2="161.0156" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="659" y="156.1592">Retrieve Document Set response</text><polygon fill="#181818" points="373,252.7734,363,256.7734,373,260.7734,369,256.7734" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="631" y1="256.7734" y2="256.7734" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="379" y="186.5107">Search File [ITI-88]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="379" y="202.8623">Search File Request message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="379" y="219.2139">parameters: class=STYLESHEET,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="379" y="235.5654">author.identifier=IHE-FACILITY1039,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="379" y="251.917">patient:exists=false</text><polygon fill="#181818" points="620,299.4766,630,303.4766,620,307.4766,624,303.4766" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="626" y1="303.4766" y2="303.4766" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="364" y="282.2686">Search File Response message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="368" y="298.6201">Bundle with DocumentReference resource</text><polygon fill="#181818" points="373,346.1797,363,350.1797,373,354.1797,369,350.1797" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="631" y1="350.1797" y2="350.1797" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="379" y="328.9717">Retrieve File [ITI-109]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="379" y="345.3232">Retrieve File Request message</text><polygon fill="#181818" points="625,376.5313,635,380.5313,625,384.5313,629,380.5313" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="631" y1="380.5313" y2="380.5313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="364" y="375.6748">Retrieve File Response message</text></g></svg>
<p><b>Figure 1:47.4.2.1.2-1: Basic Process Flow in NPFS Profile for Stylesheets Management</b></p>
</div>

<h4 id="147422-use-case-2-replace-privacy-policies">1:47.4.2.2 Use Case #2: Replace Privacy Policies</h4>

<p>In this use case, the hospital’s privacy office creates files that
describe the Privacy Policies that the patient can agree to. When a
patient is admitted, the admitting nurse uses a NPFS File Consumer to
search the File Manager for the current Privacy Policy files available.</p>

<p>Then, when the patient selects a Privacy Policy, the nurse uses a Basic
Patient Privacy Consent (BPPC) Content Creator Actor (see <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-19.html#19">ITI TF-1: 19</a>)
to create the patient’s Privacy Policy Consent document for the patient.</p>

<h5 id="1474221-replace-privacy-policies---use-case-description">1:47.4.2.2.1 Replace Privacy Policies - Use Case Description</h5>

<p>A hospital’s privacy office defines a set of Privacy Policies that a
patient can agree to. Mr. Blue, a hospital privacy office employee,
creates a Privacy Policy file using the HIS. Using a Submit File
[ITI-87] transaction, the application makes the file available to all
the systems involved in his organization.</p>

<p>Mrs. Black, a nurse of the Goodcare Hospital, wants to search for the
current valid Privacy Policy files that the admitting patient can agree
to. She uses a combined BPPC Content Creator and NPFS File Consumer to
issue a query, a Search File [ITI-88] transaction, to search for the
current valid Privacy Policy files and retrieve them. One of the
retrieved Privacy Policy files is used, by the BPPC Content Creator, to
create the Privacy Policy Consent document that the patient can read and
agree to.</p>

<p>Later, a legal health officer informs the Goodcare Hospital that one of
the Privacy Policies has changed. Mr. Blue searches to discover the
Privacy Policy file and its related metadata (including FHIR resource
ids). He thus needs to replace the Privacy Policy file and uses an HIS
to perform the Submit File [ITI-87] to replace the Privacy Policy by
submitting a new one (linked to the original file via a replacement
association, using the relatesTo parameter) and updating metadata for
the previous Privacy Policy, changing its status to “superseded”.</p>

<p>This use case is different than Use Case #3 because here the original
Privacy Policy file needs to be preserved (i.e., it is not overwritten).</p>

<h5 id="1474222-privacy-domain-policies-process-flow">1:47.4.2.2.2 Privacy Domain Policies Process Flow</h5>

<ul>
  <li>
    <p>The Health Information System, acting as a File Source, issues a
Submit File [ITI-87] (create) transaction to the File Manager to
submit the original Privacy Policy file and metadata.</p>
  </li>
  <li>
    <p>The HIS, acting as a File Consumer, issues a Search File [ITI-88]
transaction to the File Manager. The File Consumer uses the class
parameter and the status parameter to search for the metadata (i.e.,
DocumentReference Resources) for current Privacy Policy files. Once
the DocumentReference Resource is found, the File Consumer issues a
Retrieve File [ITI-109] transaction to the File Manager to
retrieve the file.</p>
  </li>
  <li>
    <p>The HIS, acting as a File Source, issues a Submit File [ITI-87]
(replace) transaction to the File Manager to submit the new Privacy
Policy file and metadata, and update the metadata of the replaced file
to “superseded” (deprecated). (The new DocumentReference Resource is
linked to the previous one via a replacement relationship, using the
relatesTo parameter; see <a href="http://build.fhir.org/ig/IHE/ITI.NPFS/branches/master/ITI-87.html#2387432-message-semantics">ITI TF-2: 3.87.4.3.2)</a></p>
  </li>
</ul>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="484px" preserveAspectRatio="none" style="width:892px;height:484px;background:#FFFFFF;" version="1.1" viewBox="0 0 892 484" width="892px" zoomAndPan="magnify"><defs /><g><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="86.3125" /><rect fill="#FFFFFF" height="46.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="196.0703" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="289.4766" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="399.2344" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="37.6094" y2="447.5859" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="489.5" x2="489.5" y1="37.6094" y2="447.5859" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="833" x2="833" y1="37.6094" y2="447.5859" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="26.5332">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="446.5859" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="468.1191">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="441.5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="448.5" y="26.5332">File Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="441.5" y="446.5859" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="448.5" y="468.1191">File Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="780" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="787" y="26.5332">File Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="780" y="446.5859" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="787" y="468.1191">File Consumer</text><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="86.3125" /><rect fill="#FFFFFF" height="46.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="196.0703" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="289.4766" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="399.2344" /><polygon fill="#181818" points="473,82.3125,483,86.3125,473,90.3125,477,86.3125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="479" y1="86.3125" y2="86.3125" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="55" y="65.1045">Submit File [ITI-87]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="55" y="81.4561">Create File Request message</text><polygon fill="#181818" points="59,112.6641,49,116.6641,59,120.6641,55,116.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="489" y1="116.6641" y2="116.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="65" y="111.8076">Submit File Response message</text><polygon fill="#181818" points="506,192.0703,496,196.0703,506,200.0703,502,196.0703" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="832" y1="196.0703" y2="196.0703" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="512" y="142.1592">Search File [ITI-88]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="512" y="158.5107">Search File Request Message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="512" y="174.8623">parameters: class=PRIVACY_POLICY, status=current,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="516" y="191.2139">patient:exists=false</text><polygon fill="#181818" points="821,238.7734,831,242.7734,821,246.7734,825,242.7734" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="490" x2="827" y1="242.7734" y2="242.7734" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="497" y="221.5654">Search File Response Message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="497" y="237.917">Bundle with DocumentReference resource (id=456)</text><polygon fill="#181818" points="506,285.4766,496,289.4766,506,293.4766,502,289.4766" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="832" y1="289.4766" y2="289.4766" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="512" y="268.2686">Retrieve File [ITI-109]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="512" y="284.6201">Retrieve File Request message</text><polygon fill="#181818" points="821,315.8281,831,319.8281,821,323.8281,825,319.8281" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="490" x2="827" y1="319.8281" y2="319.8281" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="497" y="314.9717">Retrieve File response message</text><polygon fill="#181818" points="473,395.2344,483,399.2344,473,403.2344,477,399.2344" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="479" y1="399.2344" y2="399.2344" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="55" y="345.3232">Submit File [ITI-87]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="55" y="361.6748">Replace File Request message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378" x="55" y="378.0264">new Binary and DocumentReference with replace association and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="418" x="55" y="394.3779">update of previous DocumentReference (id=456) with status=superseded</text><polygon fill="#181818" points="59,425.5859,49,429.5859,59,433.5859,55,429.5859" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="489" y1="429.5859" y2="429.5859" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="65" y="424.7295">Submit File Response message</text></g></svg>
<p><b>Figure 1:47.4.2.2.2-1: Basic Process Flow in NPFS Profile for Privacy Policies management</b></p>
</div>

<h5 id="1474231-manage-change-to-workflow-definitions---use-case-description">1:47.4.2.3.1 Manage change to Workflow Definitions - Use Case Description</h5>

<p>An HIE decides to design the eReferral Process for all the participants
involved in that workflow. Mr. Smith, a technician at Goodcare Hospital,
records the process in a BPMN Workflow Definition file, and makes it
available using the Submit File [ITI-87] transaction.</p>

<p>Dr. Jones, a specialist, uses her HIS to query for the BPMN Workflow
Definition file produced by Goodcare Hospital related to eReferral
workflow, using a Search File [ITI-88] transaction. The previously
submitted Workflow Definition file is found and retrieved, and Dr. Jones
can identify the next steps in the eReferral process.</p>

<p>Later the HIE decides that the Workflow Definition file submitted is no
longer valid and wants to use a new Workflow Definition file, so it
updates the previous file using the Submit File [ITI-87] transaction.</p>

<p>This use case is different than Use Case #2 because here the original
Workflow Definition file does not need to be preserved so it is, in
effect, overwritten.</p>

<h5 id="1474232-workflow-definitions-process-flow">1:47.4.2.3.2 Workflow Definitions Process Flow</h5>

<ul>
  <li>
    <p>The Health Information System acting as a File Source issues a Submit
File [ITI-87] (create) transaction to the File Manager to submit the
original Workflow Definition file.</p>
  </li>
  <li>
    <p>Later, to find the Workflow Definition in order to update it, the HIS
acting as a File Consumer issues a Search File [ITI-88] transaction
to the File Manage. The File Consumer uses the class parameter and the
type parameter to search for Workflow Definitions related to eReferral
workflow. Once the Document Reference Resource is found, the HIS
issues a Retrieve File [ITI-109] transaction to the File Manager
to retrieve it.</p>
  </li>
  <li>
    <p>The Health Information System, acting as a File Source, issues a
Submit File [ITI-87] (update) to the File Manager to make available
the newer Workflow Definition file and metadata (updating the previous
resources on the File Manager).</p>
  </li>
</ul>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="484px" preserveAspectRatio="none" style="width:737px;height:484px;background:#FFFFFF;" version="1.1" viewBox="0 0 737 484" width="737px" zoomAndPan="magnify"><defs /><g><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="86.3125" /><rect fill="#FFFFFF" height="46.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="212.4219" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="305.8281" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="399.2344" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="37.6094" y2="447.5859" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="381.5" x2="381.5" y1="37.6094" y2="447.5859" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="678" x2="678" y1="37.6094" y2="447.5859" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="26.5332">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="446.5859" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="468.1191">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="333.5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="340.5" y="26.5332">File Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="333.5" y="446.5859" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="340.5" y="468.1191">File Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="625" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="632" y="26.5332">File Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="625" y="446.5859" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="632" y="468.1191">File Consumer</text><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="86.3125" /><rect fill="#FFFFFF" height="46.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="212.4219" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="305.8281" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="399.2344" /><polygon fill="#181818" points="365,82.3125,375,86.3125,365,90.3125,369,86.3125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="371" y1="86.3125" y2="86.3125" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="55" y="65.1045">Submit File [ITI-87]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="55" y="81.4561">Create File Request message</text><polygon fill="#181818" points="59,112.6641,49,116.6641,59,120.6641,55,116.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="381" y1="116.6641" y2="116.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="65" y="111.8076">Submit File Response message</text><polygon fill="#181818" points="398,208.4219,388,212.4219,398,216.4219,394,212.4219" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="392" x2="677" y1="212.4219" y2="212.4219" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="404" y="142.1592">Search File [ITI-88]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="404" y="158.5107">Search File Request message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="404" y="174.8623">parameters: class=WORKFLOW_DEFINITION,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="404" y="191.2139">type=1.3.6.1.4.1.19376.1.5.3.1.5.1,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="404" y="207.5654">patient:exists=false</text><polygon fill="#181818" points="666,255.125,676,259.125,666,263.125,670,259.125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="382" x2="672" y1="259.125" y2="259.125" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="389" y="237.917">Search File Response message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="393" y="254.2686">Bundle with DocumentReference resources</text><polygon fill="#181818" points="398,301.8281,388,305.8281,398,309.8281,394,305.8281" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="392" x2="677" y1="305.8281" y2="305.8281" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="404" y="284.6201">Retrieve File [ITI-109]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="404" y="300.9717">Retrieve File Request message</text><polygon fill="#181818" points="666,332.1797,676,336.1797,666,340.1797,670,336.1797" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="382" x2="672" y1="336.1797" y2="336.1797" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="389" y="331.3232">Retrieve File Response message</text><polygon fill="#181818" points="365,395.2344,375,399.2344,365,403.2344,369,399.2344" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="371" y1="399.2344" y2="399.2344" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="55" y="361.6748">Submit File [ITI-87]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="55" y="378.0264">Update File Request message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="55" y="394.3779">metadata: DocumentReference.id=456, Binary.id=789</text><polygon fill="#181818" points="59,425.5859,49,429.5859,59,433.5859,55,429.5859" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="381" y1="429.5859" y2="429.5859" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="65" y="424.7295">Submit File Response message</text></g></svg>
<p><b>Figure 1:47.4.2.3.2-1: Basic Process Flow in NPFS Profile for Workflow Definition Documents management</b></p>
</div>

<h4 id="147424-use-case-4-update-of-files-ownership">1:47.4.2.4 Use Case #4: Update of file’s ownership</h4>

<p>A technician creates a stylesheet to render the XML documents produced
by document producers belonging to Hospital Hope. After some time, the
same stylesheet also needs to be made accessible to Hospital Peace. In
order to accomplish this task, the technician updates metadata that
describe the file in order to extend the ownership also to Hospital
Peace.</p>

<h5 id="1474241-update-of-files-ownership---use-case-description">1:47.4.2.4.1 Update of file’s ownership - Use Case Description</h5>

<p>Hospital Hope desires uniform rendering of XML documents produced within
the organization, so it creates a stylesheet file. Mr. Black, a
technician of the Hospital Hope, creates the stylesheet. Then Mr. Black
uses his File Source to publish the stylesheet file into a system that
manages non-patient files (File Manager) using the Submit File
[ITI-87] transaction. Now the stylesheet will be available to document
producers belonging to Hospital Hope. According to the local policies,
the technician needs to extend the ownership of this file also to
Hospital Peace. In order to do that, Mr. Black executes an update of the
DocumentReference associated with the stylesheet using the Update
DocumentReference [ITI-89] transaction. Now the stylesheet’s
DocumentReference reflects the ownership of Hospital Hope and Hospital
Peace.</p>

<h5 id="1474242-update-of-files-ownership-process-flow">1:47.4.2.4.2 Update of file’s ownership Process Flow</h5>

<ul>
  <li>
    <p>The Health Information System acting as a File Source issues a Submit
File [ITI-87] (create) transaction to the File Manager to submit the
stylesheet</p>
  </li>
  <li>
    <p>The Health Information System acting as a File Source issues an Update
DocumentReference [ITI-89] transaction to the File Manager to modify
the DocumentReference.author list.</p>
  </li>
</ul>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="335px" preserveAspectRatio="none" style="width:488px;height:335px;background:#FFFFFF;" version="1.1" viewBox="0 0 488 335" width="488px" zoomAndPan="magnify"><defs /><g><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="429" y="129.6641" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="429" y="250.0703" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="37.6094" y2="298.4219" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="433.5" x2="433.5" y1="37.6094" y2="298.4219" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="26.5332">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="5" y="297.4219" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="318.9551">File Source</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="385.5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="392.5" y="26.5332">File Manager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="385.5" y="297.4219" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="392.5" y="318.9551">File Manager</text><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="429" y="129.6641" /><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="429" y="250.0703" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="90" y1="69.9609" y2="69.9609" /><line style="stroke:#181818;stroke-width:1.0;" x1="90" x2="90" y1="69.9609" y2="82.9609" /><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="90" y1="82.9609" y2="82.9609" /><polygon fill="#181818" points="59,78.9609,49,82.9609,59,86.9609,55,82.9609" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="55" y="65.1045">Produce stylesheet</text><polygon fill="#181818" points="417,125.6641,427,129.6641,417,133.6641,421,129.6641" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="423" y1="129.6641" y2="129.6641" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="55" y="108.4561">Submit File [ITI-87]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="55" y="124.8076">Create File Request message</text><polygon fill="#181818" points="59,156.0156,49,160.0156,59,164.0156,55,160.0156" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="433" y1="160.0156" y2="160.0156" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="65" y="155.1592">Submit File Response message</text><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="90" y1="190.3672" y2="190.3672" /><line style="stroke:#181818;stroke-width:1.0;" x1="90" x2="90" y1="190.3672" y2="203.3672" /><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="90" y1="203.3672" y2="203.3672" /><polygon fill="#181818" points="59,199.3672,49,203.3672,59,207.3672,55,203.3672" style="stroke:#181818;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="55" y="185.5107">update of the ownership</text><polygon fill="#181818" points="417,246.0703,427,250.0703,417,254.0703,421,250.0703" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="423" y1="250.0703" y2="250.0703" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="55" y="228.8623">Update DocumentReference [ITI-89]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="59" y="245.2139">DocumentRefernce.author=Organization/123,Organization/456</text><polygon fill="#181818" points="59,276.4219,49,280.4219,59,284.4219,55,280.4219" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="433" y1="280.4219" y2="280.4219" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="65" y="275.5654">Update DocumentReference response message</text></g></svg>
<p><b>Figure 1:47.4.2.4.2-1: Basic Process Flow in NPFS Profile for Update of file’s ownership</b></p>
</div>

<h2 id="1475-npfs-security-considerations">1:47.5 NPFS Security Considerations</h2>

<p>Non-patient files do not contain Patient Health Information (PHI), but
they may contain other sensitive information such as physician reviews,
work schedules, etc. In addition, those files can be used in conjunction
with patient-related documents in order to satisfy clinical data
consuming/sharing workflows. The reader should know that mistakes will
be made, and these files may convey private information.</p>

<p>Although this profile does not require actors to audit the transactions
that exchange non-patient files, grouping with an <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-9.html">ATNA</a> Secure Node or
Secure Application is strongly encouraged in order to track file and
metadata creation and update.
For further considerations about Audit record refer to <a href="https://profiles.ihe.net/ITI/BALP/">BALP profile</a>.</p>

<p>User authentication/authorization represents another important factor to
consider in order to avoid malicious creation/updating of files.
Grouping NPFS actors with actors in the Internet User Authorization
(IUA) Profile enables deployments to mitigate these security issues.</p>

<h2 id="1476-npfs-cross-profile-considerations">1:47.6 NPFS Cross Profile Considerations</h2>

<p>None.</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="index.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="ITI-87.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2021+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.ihe.net/ihe_domains/it_infrastructure/">IHE IT Infrastructure Technical Committee</a>.  Package ihe.iti.npfs#2.2.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Thu, Nov 16, 2023 16:11-0600">2023-11-16</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.NPFS/issues/new/choose">New Issue</a> | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.NPFS/issues">Issues</a>
                
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://profiles.ihe.net/ITI/NPFS/history.html">Version History</a></a> |
                 <a style="color: var(--footer-hyperlink-text-color)" rel="license" href="https://profiles.ihe.net/GeneralIntro/ch-9.html"><img style="border-style: none;" alt="CC0" src="assets/images/cc-by.png" height="17"/></a> |
                <!-- <a style="color: var(--footer-hyperlink-text-color)" href="searchform.html">Search</a> | -->
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://www.ihe.net/resources/public_comment/">Propose a change<img alt="external" style="vertical-align: baseline" src="external.png"/></a>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-HLBNC861DJ');
</script>

          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->


  
    
  


  
    
  



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

