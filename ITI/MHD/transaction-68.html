<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>IHE.ITI.MHD\Transaction 68 - FHIR v4.0.1</title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>
  
    <link rel="stylesheet" href="fhir.css"/>
      
      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.css"/>
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>
  
      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  
      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->
  
      <!-- Favicons -->
    <link sizes="144x144" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link sizes="114x114" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link sizes="72x72" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>  
  </head>
  <body>


    <style type="text/css">h2{--heading-prefix:"14"}
    h3,h4,h5,h6{--heading-prefix:"14"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
        <div id="hl7-nav">
          <a no-external="true" id="ihe-logo" href="http://hl7.org/fhir/R4/">
            <img src="assets/images/ihe-fhir-logo-www.png" alt="Visit the IHE website" height="50"/>
          </a>
        </div>
        <div id="fhir-nav">
          <a no-external="true" id="fhir-logo" href="http://hl7.org/fhir"><img src="assets/images/ihe-logo.png" alt="Visit the FHIR website" height="50"/> </a>
        </div>
        <div id="hl7-search">
          <a no-external="true" id="hl7-search-lnk" href="http://hl7.org/fhir/search.cfm"><img src="assets/images/search.png" alt="Search FHIR"/></a>
        </div>
        <div id="hl7-status">
          <p><span style="font-size:12pt;font-weight:bold">MHD Sushi Implementation Guide</span><br/>0.1.0 - CI Build</p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->
    
    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->
    
        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->
<ul class="nav navbar-nav">
  <li><a href="index.html">MHD Home</a></li>
  <li><a href="toc.html">Table of Contents</a></li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Overview<b class="caret">
      </b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="overview.html">Overview</a>
      </li>
      <li>
        <a href="actors_and_transactions.html">Actors and Transactions</a>
      </li>
      <li>
        <a href="security_considerations.html">Security Considerations</a>
      </li>
      <li>
        <a href="grouping.html">Cross Profile Considerations</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Transactions<b class="caret">
      </b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="transaction-65.html">Provide Document Bundle [ITI-65]</a>
      </li>
      <li>
        <a href="transaction-66.html">Find Document Lists [ITI-66]</a>
      </li>
      <li>
        <a href="transaction-67.html">Find Document References [ITI-67]</a>
      </li>
      <li>
        <a href="transaction-68.html">Retrieve Document [ITI-68]</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Other<b class="caret">
      </b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="metadata_maps.html">FHIR Representation of Document Sharing Metadata</a>
      </li>
      <li>
        <a href="appendix_e.html">E: FHIR Identifier Type for CX</a>
      </li>
      <li>
        <a href="appendix_z.html">Z: FHIR Common IHE Constraints</a>
      </li>
      <li>
        <a href="testplan.html">Test Plan</a>
      </li>
    </ul>
  </li>
  <li><a href="artifacts.html">Artifact Index</a></li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Support<b class="caret">
      </b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="http://hl7.org/fhir/R4/index.html" target="_blank">FHIR Spec <img src="external.png" style="text-align: baseline"/></a>
      </li>
      <li><a name="4641908d-8520-4505-93ec-6496759e217e">​</a>
        <a href="downloads.html">Downloads</a>
      </li>
    </ul>
  </li>
</ul>      

            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->
    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->  
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Transaction 68</b></li>
        </ul>  
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->
    
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">MHD Sushi Implementation Guide, published by IHE. This is not an authorized publication; it is the continuous build for version 0.1.0). This version is based on the current content of <a href="https://github.com/JohnMoehrke/MHD-fsh/">https://github.com/JohnMoehrke/MHD-fsh/</a> and changes regularly. See the <a href="http://ihe.net/fhir/ITI.MHD/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Transaction 68</h2>
  
  
  
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#scope" id="markdown-toc-scope">Scope</a></li>
  <li><a href="#actors-roles" id="markdown-toc-actors-roles">Actors Roles</a></li>
  <li><a href="#referenced-standards" id="markdown-toc-referenced-standards">Referenced Standards</a></li>
  <li><a href="#interactions" id="markdown-toc-interactions">Interactions</a>    <ul>
      <li><a href="#retrieve-document-request-message" id="markdown-toc-retrieve-document-request-message">Retrieve Document Request Message</a>        <ul>
          <li><a href="#trigger-events" id="markdown-toc-trigger-events">Trigger Events</a></li>
          <li><a href="#message-semantics" id="markdown-toc-message-semantics">Message Semantics</a></li>
          <li><a href="#expected-actions" id="markdown-toc-expected-actions">Expected Actions</a></li>
        </ul>
      </li>
      <li><a href="#retrieve-document-response-message" id="markdown-toc-retrieve-document-response-message">Retrieve Document Response Message</a>        <ul>
          <li><a href="#trigger-events-1" id="markdown-toc-trigger-events-1">Trigger Events</a></li>
          <li><a href="#message-semantics-1" id="markdown-toc-message-semantics-1">Message Semantics</a></li>
          <li><a href="#expected-actions-1" id="markdown-toc-expected-actions-1">Expected Actions</a></li>
        </ul>
      </li>
      <li><a href="#capabilitystatement-resource" id="markdown-toc-capabilitystatement-resource">CapabilityStatement Resource</a></li>
    </ul>
  </li>
  <li><a href="#security-considerations" id="markdown-toc-security-considerations">Security Considerations</a>    <ul>
      <li><a href="#security-audit-considerations" id="markdown-toc-security-audit-considerations">Security Audit Considerations</a>        <ul>
          <li><a href="#document-consumer-audit" id="markdown-toc-document-consumer-audit">Document Consumer Audit</a></li>
          <li><a href="#document-responder-audit" id="markdown-toc-document-responder-audit">Document Responder Audit</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

</div>
  <!-- transaction-68.md -->
<p>This section corresponds to transaction [ITI-68] of the IHE Technical Framework. Transaction [ITI-68] is used by the Document Consumer and Document Responder Actors.</p>

<h3 id="scope">Scope</h3>

<p>The Retrieve Document [ITI-68] transaction is used by the Document Consumer to retrieve a document from the Document Responder.</p>

<h3 id="actors-roles">Actors Roles</h3>

<table border="1" borderspacing="0">
<caption><b>Table: Actor Roles</b></caption>
<thead><tr><th>Actor</th><th>Role</th></tr></thead>
<tbody><tr><td><a href="actors_and_transactions.html#document-consumer">Document Consumer</a></td>
<td>Requests a document from the Document Responder</td>
</tr>
<tr><td><a href="actors_and_transactions.html#document-responder">Document Responder</a></td>
<td>Serves the document to the Document Consumer</td>
</tr>
</tbody>
</table>

<h3 id="referenced-standards">Referenced Standards</h3>

<table border="1" borderspacing="0">
<caption><b>Table 3.71.3-1: Referenced Standards</b></caption>
<thead><tr><th>Standard</th><th>Name</th></tr></thead>
<tbody>
<tr><td>FHIR-R4</td><td><a href="http://www.hl7.org/FHIR/R4">HL7 FHIR Release 4.0</a></td></tr>
</tbody>
</table>

<h3 id="interactions">Interactions</h3>

<p><img src="transaction-68-seq.svg" alt="Figure: Retrieve Document Interactions" title="Figure: Retrieve Document  Interactions"/></p>

<div style="clear: left"></div>

<p><strong>Figure: Retrieve Document Interactions</strong></p>

<h4 id="retrieve-document-request-message">Retrieve Document Request Message</h4>

<p>This message is an HTTP GET request to retrieve the document.</p>

<h5 id="trigger-events">Trigger Events</h5>

<p>The Document Consumer wants to obtain a document.</p>

<h5 id="message-semantics">Message Semantics</h5>

<p>The Document Consumer sends a HTTP GET request to the server. The Document Consumer request may be to retrieve the document content referenced by a DocumentReference.content.attachment.url.</p>

<p>The Document Consumer may provide a HTTP Accept header, according to the semantics of the HTTP protocols (see RFC2616, Section 14.1). The only MIME type assured to be returned is the MIME type indicated in the DocumentReference.content.attachment.contentType.</p>

<p>The HTTP If-Unmodified-Since header shall not be included in the GET request.</p>

<h5 id="expected-actions">Expected Actions</h5>

<p>The Document Responder shall provide the document in the requested MIME type or reply with an HTTP status code indicating the error condition. The Document Responder is not required to transform the document.</p>

<h4 id="retrieve-document-response-message">Retrieve Document Response Message</h4>

<p>This is the return message sent by the Document Responder.</p>

<h5 id="trigger-events-1">Trigger Events</h5>

<p>The HTTP Response message is sent upon completion of the Retrieve Document Request.</p>

<h5 id="message-semantics-1">Message Semantics</h5>

<p>This message shall be an HTTP Response, as specified by RFC2616. When the requested document is returned, the Document Responder shall respond with HTTP Status Code 200. The HTTP message-body shall be the content of the requested document.</p>

<p>Table 3.68.4.2.2-1 contains error situations and the HTTP Response.</p>

<p>Table 3.68.4.2.2-1: HTTP Error Response Codes and Suggested Text</p>

<table>
  <thead>
    <tr>
      <th>Situation</th>
      <th>HTTP Response</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>URI not known</td>
      <td>404 Document Not Found</td>
    </tr>
    <tr>
      <td>Document is Deprecated or not available</td>
      <td>410 Gone (or 404 when 410 is unacceptable due to security/privacy policy)</td>
    </tr>
    <tr>
      <td>Document Responder unable to format document in content types listed the ‘Accept’ field</td>
      <td>406 Not Acceptable</td>
    </tr>
    <tr>
      <td>HTTP request specified is otherwise not a legal value</td>
      <td>403 Forbidden/Request Type Not Supported</td>
    </tr>
  </tbody>
</table>

<p>The Document Responder may return other HTTP Status Codes. Guidance on handling Access Denied related to use of 200, 403 and 404 can be found in ITI TF-2x: Appendix Z.7.</p>

<p>The Document Responder should complement the returned error code with a human readable description of the error condition.</p>

<p>The Document Responder may return HTTP redirect responses (responses with HTTP Status Codes 301, 302, 303 or 307) in response to a request. See RFC7231 Section 6.4 Redirection 3xx.</p>

<h5 id="expected-actions-1">Expected Actions</h5>

<p>If the Document Responder returns an HTTP redirect response (HTTP status codes 301, 302, 303, or 307), the Document Consumer shall follow the redirect, but may stop processing if it detects a loop. See RFC7231 Section 6.4 Redirection 3xx.</p>

<p>The Document Consumer processes the results according to application-defined rules.</p>

<h4 id="capabilitystatement-resource">CapabilityStatement Resource</h4>

<p>Document Responders implementing this transaction shall provide a CapabilityStatement Resource as described in <a href="appendix_z.html#capability">ITI TF-2x: Appendix Z.3</a> indicating the transaction has been implemented.</p>
<ul>
  <li>Requirements CapabilityStatement for <a href="IHE.MHD.DocumentConsumer.html">Document Consumer</a></li>
  <li>Requirements CapabilityStatement for <a href="IHE.MHD.DocumentResponder.html">Document Responder</a></li>
</ul>

<h3 id="security-considerations">Security Considerations</h3>

<p>See <a href="security_considerations.html">MHD Security Considerations</a></p>

<p>This transaction should not return information that the Document Consumer is not authorized to access.</p>

<h4 id="security-audit-considerations">Security Audit Considerations</h4>

<p>The security audit criteria are similar to those for the Retrieve Document Set-b [ITI-43] transaction. Grouping a Document Consumer or Document Responder with an ATNA Secure Node or Secure Application is recommended, but not mandated.</p>

<h5 id="document-consumer-audit">Document Consumer Audit</h5>

<p><a name="59fc01ce-f945-4d4f-b0a4-acc78cbebb10">​</a>The Document Consumer when grouped with ATNA Secure Node or Secure Application actor shall be able to record a <a href="IHE.MHD.RetrieveDocument.Audit.Consumer.html">Retrieve Document Consumer Audit Event Log</a>. <a href="ex-auditRetrieveDocument-consumer.html">Audit Example for a Retrieve Document transaction from consumer perspective</a></p>

<h5 id="document-responder-audit">Document Responder Audit</h5>

<p><a name="d18fdd6f-b5a8-497f-9234-8b5bf11f765d">​</a>The Document Responder when grouped with ATNA Secure Node or Secure Application actor shall be able to record a <a href="IHE.MHD.RetrieveDocument.Audit.Responder.html">Retrieve Document Responder Audit Event Log</a>. <a href="ex-auditProvideBundle-responder.html">Audit Example for a Find Documet Lists Transaction from responder perspective</a></p>


</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->


  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->
      <div class="inner-wrapper">
        <p><a name="51cc4ad2-7733-4b4a-8d6a-cbacd6c56e0d">​</a>
          IG &copy; 2020+ <a style="color: #81BEF7" href="john.moehrke@gmail.com"></a>IHE.  Package IHE.ITI.MHD#0.1.0 based on <a style="color: #81BEF7" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Sun, May 3, 2020 13:51+0000">2020-05-03</span>
          <br/>
          <span style="color: #FFFF77">
          Links: <a style="color: #81BEF7" href="toc.html">Table of Contents</a> |
                 <a style="color: #81BEF7" href="qa.html">QA Report</a> |
                 <a style="color: #81BEF7" href="http://ihe.net/fhir/ITI.MHD/history.html" target="_blank">Version History <img src="external.png" alt="external" style="vertical-align: baseline"/></a> |
                 <a rel="license" style="color: #81BEF7" href="http://hl7.org/fhir/R4/license.html"><img src="cc0.png" alt="CC0" style="border-style: none;"/></a> |
                   <!-- <a style="color: #81BEF7" href="todo.html">Search</a> | --> 
                 <a style="color: #81BEF7" href="https://wiki.ihe.net/index.php/Category:CPs" target="_blank">Propose a change<img src="external.png" alt="external" style="vertical-align: baseline"/></a>
          </span>
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/fhir.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
    <!-- Analytics Below
  ================================================== -->
  </body>
</html>