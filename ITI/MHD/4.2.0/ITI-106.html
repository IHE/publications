<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>IHE.ITI.MHD\2:3.106 Generate Metadata [ITI-106] - FHIR v4.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/ihe.css" rel="stylesheet"/>
<link href="assets/css/nonum.css" rel="stylesheet"/>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async> </script> 


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"13"}
    h3,h4,h5,h6{--heading-prefix:"13"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
  <a id="ihe-logo" no-external="true" href="http://profiles.ihe.net">
    <img height="71" alt="Visit the IHE website" src="assets/images/ihe-international.png"/>
  </a>
</div>
<div id="family-nav">
  <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="30" alt="Visit the FHIR website" src="assets/images/fhir-logo.png"/> </a>
</div>
<!--
<div id="hl7-search">
  <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
</div>
-->
<div id="project-nav">
  
  
    <a id="project-logo" no-external="true" href="http://profiles.ihe.net/ITI/index.html"><img height="70" alt="Visit the ITI website" src="assets/images/ITI.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Mobile access to Health Documents (MHD)</span>
            <br/>
            <span style="display:inline-block;">4.2.0 - Trial-Implementation



  <img alt="International flag" src="assets/images/001.svg" height="16" title="International"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">MHD Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 1
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="index.html">Introduction</a>
      </li>
      <li>
        <a href="1331_actors_and_transactions.html">Actors and Transactions</a>
      </li>
      <li>
        <a href="1332_actor_options.html">Actor Options</a>
      </li>
      <li>
        <a href="1333_required_grouping.html">Actor Required Grouping</a>
      </li>
      <li>
        <a href="1334_overview.html">Overview</a>
      </li>
      <li>
        <a href="1335_security_considerations.html">Security Considerations</a>
      </li>
      <li>
        <a href="1336_cross_profile_considerations.html">Cross Profile Considerations</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="ITI-65.html">Provide Document Bundle [ITI-65]</a>
      </li>
      <li>
        <a href="ITI-66.html">Find Document Lists [ITI-66]</a>
      </li>
      <li>
        <a href="ITI-67.html">Find Document References [ITI-67]</a>
      </li>
      <li>
        <a href="ITI-68.html">Retrieve Document [ITI-68]</a>
      </li>
      <li>
        <a href="ITI-105.html">Simplified Publish [ITI-105]</a>
      </li>
      <li>
        <a href="ITI-106.html">Generate Metadata [ITI-106]</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 3
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="31_xds.html">Error Codes</a>
      </li>
      <li>
        <a href="32_fhir_maps.html">FHIR Maps</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="testplan.html">Test Plan</a>
  </li>
  <li>
    <a href="artifacts.html">Artifact Index</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>2:3.106 Generate Metadata [ITI-106]</b></li>

          <span style="float:right;">

            <a href="ITI-105.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="31_xds.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the IHE Mobile Access to Health Documents (v4.2.0: Publication) based on <a href="http://hl7.org/fhir/R4">FHIR R4</a>. This is the current published version in its permanent home (it will always be available at this URL).  For a full list of available versions, see the <a href="https://profiles.ihe.net/ITI/MHD/history.html">Directory of published versions <img src="external.png" style="text-align: baseline"></a></p><!--EndReleaseHeader-->
  <h2>2:3.106 Generate Metadata [ITI-106]</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#231061-scope" id="markdown-toc-231061-scope">2:3.106.1 Scope</a></li>
  <li><a href="#231062-actors-roles" id="markdown-toc-231062-actors-roles">2:3.106.2 Actors Roles</a></li>
  <li><a href="#231063-referenced-standards" id="markdown-toc-231063-referenced-standards">2:3.106.3 Referenced Standards</a></li>
  <li><a href="#231064-messages" id="markdown-toc-231064-messages">2:3.106.4 Messages</a></li>
  <li><a href="#231065-security-considerations" id="markdown-toc-231065-security-considerations">2:3.106.5 Security Considerations</a></li>
</ul>

</div>
<p>This section corresponds to transaction [ITI-106] of the IHE Technical Framework. Transaction [ITI-106] is used by the Document Source and Document Recipient Actors. The Generate Metadata [ITI-106] transaction is used to transmit a structured and coded document (i.e., CDA or FHIR-Document) and have the Document Recipient create associated metadata.</p>

<h3 id="231061-scope">2:3.106.1 Scope</h3>

<p>The Generate Metadata [ITI-106] transaction passes a Generate Metadata Request from a Document Source to a Document Recipient.</p>

<h3 id="231062-actors-roles">2:3.106.2 Actors Roles</h3>

<p><strong>Table 2:3.106.2-1: Actor Roles</strong></p>

<table class="grid">
  <thead>
    <tr>
      <th>Actor</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="1331_actors_and_transactions.html#133111-document-source">Document Source</a></td>
      <td>Sends document to the Document Recipient</td>
    </tr>
    <tr>
      <td><a href="1331_actors_and_transactions.html#133113-document-recipient">Document Recipient</a></td>
      <td>Accepts the document and creates metadata</td>
    </tr>
  </tbody>
</table>

<h3 id="231063-referenced-standards">2:3.106.3 Referenced Standards</h3>

<p><strong>FHIR-R4</strong> <a href="http://www.hl7.org/FHIR/R4">HL7 FHIR Release 4.0</a></p>

<h3 id="231064-messages">2:3.106.4 Messages</h3>

<div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="302px" preserveAspectRatio="none" style="width:678px;height:302px;background:#FFFFFF;" version="1.1" viewBox="0 0 678 302" width="678px" zoomAndPan="magnify"><defs><filter height="300%" id="f9d8sbvadocox" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0" /><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0" /><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3" /><feBlend in="SourceGraphic" in2="blurOut3" mode="normal" /></filter></defs><g><rect fill="#FFFFFF" filter="url(#f9d8sbvadocox)" height="226.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="65.5" y="51.6094" /><rect fill="#FFFFFF" filter="url(#f9d8sbvadocox)" height="226.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="291.5" y="51.6094" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="70" x2="70" y1="41.6094" y2="295.7188" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="296" x2="296" y1="41.6094" y2="295.7188" /><rect fill="#FEFECE" filter="url(#f9d8sbvadocox)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="12" y="26.5332">Document Source</text><rect fill="#FEFECE" filter="url(#f9d8sbvadocox)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="141" x="224" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="231" y="26.5332">Document Recipient</text><rect fill="#FFFFFF" filter="url(#f9d8sbvadocox)" height="226.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="65.5" y="51.6094" /><rect fill="#FFFFFF" filter="url(#f9d8sbvadocox)" height="226.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="291.5" y="51.6094" /><polygon fill="#A80036" points="279.5,69.9609,289.5,73.9609,279.5,77.9609,283.5,73.9609" style="stroke:#A80036;stroke-width:1.0;" /><line style="stroke:#A80036;stroke-width:1.0;" x1="75.5" x2="285.5" y1="73.9609" y2="73.9609" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="82.5" y="69.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="93.5" y="69.1045">Generate Metadata (document)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="301.5" x2="343.5" y1="104.3125" y2="104.3125" /><line style="stroke:#A80036;stroke-width:1.0;" x1="343.5" x2="343.5" y1="104.3125" y2="117.3125" /><line style="stroke:#A80036;stroke-width:1.0;" x1="302.5" x2="343.5" y1="117.3125" y2="117.3125" /><polygon fill="#A80036" points="312.5,113.3125,302.5,117.3125,312.5,121.3125,308.5,117.3125" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="308.5" y="99.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="319.5" y="99.4561">Extract the document</text><line style="stroke:#A80036;stroke-width:1.0;" x1="301.5" x2="343.5" y1="147.6641" y2="147.6641" /><line style="stroke:#A80036;stroke-width:1.0;" x1="343.5" x2="343.5" y1="147.6641" y2="160.6641" /><line style="stroke:#A80036;stroke-width:1.0;" x1="302.5" x2="343.5" y1="160.6641" y2="160.6641" /><polygon fill="#A80036" points="312.5,156.6641,302.5,160.6641,312.5,164.6641,308.5,160.6641" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="308.5" y="142.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="319.5" y="142.8076">Create DocumentReference from document</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="301.5" x2="343.5" y1="191.0156" y2="191.0156" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="343.5" x2="343.5" y1="191.0156" y2="204.0156" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="302.5" x2="343.5" y1="204.0156" y2="204.0156" /><polygon fill="#A80036" points="312.5,200.0156,302.5,204.0156,312.5,208.0156,308.5,204.0156" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="308.5" y="186.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="319.5" y="186.1592">Create SubmissionSet from DocumentReference and context</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="301.5" x2="343.5" y1="234.3672" y2="234.3672" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="343.5" x2="343.5" y1="234.3672" y2="247.3672" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="302.5" x2="343.5" y1="247.3672" y2="247.3672" /><polygon fill="#A80036" points="312.5,243.3672,302.5,247.3672,312.5,251.3672,308.5,247.3672" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="308.5" y="229.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="319.5" y="229.5107">persist (e.g. XDS Provide and Register)</text><polygon fill="#A80036" points="81.5,273.7188,71.5,277.7188,81.5,281.7188,77.5,277.7188" style="stroke:#A80036;stroke-width:1.0;" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="295.5" y1="277.7188" y2="277.7188" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="87.5" y="272.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="98.5" y="272.8623">Generated DocumentReference</text></g></svg>
</div>

<p><br clear="all" /></p>

<p><strong>Figure 2:3.106.4-1: Generate Metadata Interactions</strong></p>

<h4 id="2310641-generate-metadata-request-message">2:3.106.4.1 Generate Metadata Request Message</h4>
<p>This message uses the FHIR <a href="http://hl7.org/fhir/R4/operations.html">Operation</a> method on the target Generate Metadata endpoint to convey the document.</p>

<h5 id="23106411-trigger-events">2:3.106.4.1.1 Trigger Events</h5>

<p>This method is invoked when the Document Source needs to submit one structured and coded document to a Document Recipient.</p>

<h5 id="23106412-message-semantics">2:3.106.4.1.2 Message Semantics</h5>

<p>The Document Source shall initiate an http <code class="language-plaintext highlighter-rouge">POST</code> operation request as defined in FHIR <a href="http://hl7.org/fhir/R4/operations.html">Operations</a>  using the <a href="OperationDefinition-generate-metadata.html">Generate Metadata Operation Definition</a> on the <code class="language-plaintext highlighter-rouge">DocumentReference</code> endpoint.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST http://fhir.someserver.org/fhir/DocumentReference/$generate-metadata
</code></pre></div></div>

<p>The Document Source provides the document. It can be provided in either a Binary or a Bundle form.</p>
<ul>
  <li>Binary resource, used with a CDA document, might be used with a FHIR-Document</li>
  <li>Bundle resource, must be a Document kind Bundle. aka, <a href="http://hl7.org/fhir/R4/documents.html">FHIR-Document</a></li>
</ul>

<h5 id="23106413-expected-actions">2:3.106.4.1.3 Expected Actions</h5>

<p>The Document Recipient shall accept both media types <code class="language-plaintext highlighter-rouge">application/fhir+json</code> and <code class="language-plaintext highlighter-rouge">application/fhir+xml</code>.</p>

<p>On receipt of the Generate Metadata Request Message, the Document Recipient shall read the existing document and confirm that the document is sufficiently structured and coded for processing. 
The Document Recipient may impose specific constraints on the input document, such as conforming to <a href="https://confluence.hl7.org/display/PC/International+Patient+Summary">International Patient Summary (IPS)</a> or <a href="https://www.hl7.org/ccdasearch/">Consolidated Clinical Document Architecture (C-CDA) 2.1</a>. These constraints may be further refined within the Community.
The Document Recipient shall persist the document, the Bundle will be persisted using the original mime-type from the operation.
The Document Recipient shall persist the document in a format consistent with the media type in DocumentReference.attachment.contentType. It may make the document available in other formats, for example, making a FHIR Document Bundle submitted in XML format available in JSON format, but it is not required to.
The Document Recipient shall generate a valid DocumentReference resource given the document content. 
The DocumentReference that is generated may be an existing DocumentReference or may be a new one as necessary. The DocumentReference.content.attachment.url shall point at the persisted document.</p>

<p>Note that persist methodology will depend on the actors and functionality grouped with the Document Recipient. For example when grouped with a XDS Document Source, the persistence is achieved using XDS; when grouped with MHDS, the persistence is achieved at the MHDS Document Registry. The Document Recipient may need to produce a SubmissionSet derived off of the DocumentReference, such as when persistence is via XDS, XDR, or MHDS where a SubmissionSet is required to track the provenance of the publication request.</p>

<p>The Document Recipient shall extract the document, generate the DocumentReference metadata, and translate the DocumentReference metadata elements into a SubmissionSet following the <a href="https://www.ihe.net/uploadedFiles/Documents/PCC/IHE_PCC_TF_Vol2.pdf">PCC TF-2: 4.1.1 XDSSubmissionSet Metadata</a>, and may have further metadata translation requirements specified by the local Document Sharing Community policy.</p>

<p>The Document Recipient shall generate Document Sharing metadata requirements as specified for attributes <a href="https://profiles.ihe.net/ITI/TF/Volume3/ch-4.3.html#4.3.1">ITI TF-3: Table 4.3.1-3: “Sending Actor Metadata Attribute Optionality”</a>.</p>
<ul>
  <li>The Document Recipient that supports the <a href="1332_actor_options.html#13322-xds-on-fhir-option">Comprehensive Metadata</a> or the <a href="1332_actor_options.html#13322-xds-on-fhir-option">XDS on FHIR</a> Option shall generate metadata consistent with column “XDS DS”;</li>
</ul>

<h6 id="231064131-grouping-with-actors-in-other-document-sharing-profiles">2:3.106.4.1.3.1 Grouping with Actors in other Document Sharing Profiles</h6>

<p>This section applies to grouping MHD Document Recipient with <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-10.html">XDS</a> <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-10.html#10.1.1.1">Document Source</a> Actor, <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-15.html">XDR</a> Document Source Actor, <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-15.html">XDR</a> Limited-Metadata Document Source Actor, and <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-16.html">XDM</a> Portable Media Creator Actor (e.g., with the <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-16.html#16.2.3">XDM ZIP over Email Option</a>).</p>

<p>The Document Recipient shall transform the DocumentReference content into a proper message for the given grouped actor (e.g., the XDS Document Source using the Provide and Register Document Set-b <a href="https://profiles.ihe.net/ITI/TF/Volume2/ITI-41.html">[ITI-41]</a> transaction). The Document Recipient shall create appropriate metadata from Resources in the FHIR DocumentReference Resource, including SubmissionSet, and DocumentEntry.</p>

<p>Where values provided are References to FHIR resources (e.g., DocumentReference.encounter), the Reference should be converted to a <a href="https://profiles.ihe.net/ITI/TF/Volume3/ch-4.2.html#4.2.3.1.7">Document Sharing <code class="language-plaintext highlighter-rouge">CXi</code> Identifier Datatype</a> for recording in the Document Sharing ebRIM using the Identifier Type Codes when appropriate (see <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.9.1.2-xds-cxi-mapped-to-fhir-identifier-type">Appendix Z.9.1.2</a> ). The conversion may be by using the referenced Resource business .identifier. Note, there is not an obvious conversion of a reference .id to <code class="language-plaintext highlighter-rouge">CXi</code> identifier. Note that DocumentReference.encounter would be mapped into DocumentEntry.referenceIdList as an Identifier Type Code of <code class="language-plaintext highlighter-rouge">urn:ihe:iti:xds:2015:encounterId</code>.</p>

<p>Some FHIR elements do not translate to XDS concepts; the handling of these elements is left to the implementer of the Document Recipient.</p>

<p>Upon successful conversion of the FHIR DocumentReference to XDS Document Sharing metadata, the grouped source actor shall execute the appropriate transaction. The transaction result, and any error or warning messages, shall be reported to the MHD Document Source. The Document Recipient is responsible for translating the response to the appropriate HTTP Status Code and FHIR OperationOutcome Resource in the Generate Metadata Response Message.</p>

<h4 id="2310642-generate-metadata-response-message">2:3.106.4.2 Generate Metadata Response Message</h4>

<p>The Document Recipient responds with success or failure</p>

<h5 id="23106421-trigger-events">2:3.106.4.2.1 Trigger Events</h5>

<p>This message shall be sent when a success or error condition needs to be communicated. Success is only indicated once the document is received and completely processed and persisted as appropriate to the Document Recipient Actor configuration.</p>

<h5 id="23106422-message-semantics">2:3.106.4.2.2 Message Semantics</h5>

<p>The Document Recipient upon success returns a Parameter resource with a reference to the DocumentReference.</p>

<p>The Document Recipient returns an OperationOutcome upon failure.</p>

<h5 id="23106423-expected-actions">2:3.106.4.2.3 Expected Actions</h5>

<p>The Document Source processes the results according to application-defined rules.</p>

<h4 id="2310643-capabilitystatement-resource">2:3.106.4.3 CapabilityStatement Resource</h4>

<p>Document Recipient shall provide a CapabilityStatement Resource as described in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.3-capabilitystatement-resource">ITI TF-2x: Appendix Z.3</a> indicating the transaction has been implemented.</p>
<ul>
  <li>Requirements CapabilityStatement for <a href="CapabilityStatement-IHE.MHD.DocumentRecipient.Generate.html">Document Recipient Generate Metadata Option</a>. This indicates that the Generate Metadata Option is declared.</li>
</ul>

<p>Document Source should provide a CapabilityStatement Resource as described in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.3-capabilitystatement-resource">ITI TF-2x: Appendix Z.3</a> indicating the transaction has been implemented.</p>
<ul>
  <li>Requirements CapabilityStatement for <a href="CapabilityStatement-IHE.MHD.DocumentSource.Generate.html">Document Source Generate Metadata Metadata Option</a>. This indicates that the Generate Metadata Option is declared.</li>
</ul>

<h3 id="231065-security-considerations">2:3.106.5 Security Considerations</h3>

<p>See <a href="1335_security_considerations.html">MHD Security Considerations</a>.</p>

<h4 id="2310651-security-audit-considerations">2:3.106.5.1 Security Audit Considerations</h4>

<p>The security audit criteria are similar to those for the Provide and Register Document Set-b <a href="https://profiles.ihe.net/ITI/TF/Volume2/ITI-41.html">ITI-41</a> transaction as this transaction does export a document.</p>

<h5 id="23106511-document-source-audit">2:3.106.5.1.1 Document Source Audit</h5>

<p>The Document Source when grouped with ATNA Secure Node or Secure Application Actor shall be able to record a <a href="StructureDefinition-IHE.MHD.GenerateMetadata.Audit.Source.html">Generate Metadata Audit Event Log</a>. <a href="AuditEvent-ex-auditGenerateMetadata-source.html">Audit Example for a Generate Metadata Transaction from source perspective</a>.</p>

<h5 id="23106512-document-recipient-audit">2:3.106.5.1.2 Document Recipient Audit</h5>

<p>The Document Recipient when grouped with ATNA Secure Node or Secure Application Actor shall be able to record a <a href="StructureDefinition-IHE.MHD.GenerateMetadata.Audit.Recipient.html">Generate Metadata Audit Event Log</a>. <a href="AuditEvent-ex-auditGenerateMetadata-recipient.html">Audit Example for a Generate Metadata Bundle Transaction from recipient perspective</a>.</p>



</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="ITI-105.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="31_xds.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.ihe.net/ihe_domains/it_infrastructure/">IHE IT Infrastructure Technical Committee</a>.  Package ihe.iti.mhd#4.2.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Dec 7, 2022 16:34-0600">2022-12-07</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.MHD/issues/new/choose">New Issue</a> | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.MHD/issues">Issues</a>
                
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://profiles.ihe.net/ITI/MHD/history.html">Version History</a></a> |
                 <a style="color: var(--footer-hyperlink-text-color)" rel="license" href="https://profiles.ihe.net/GeneralIntro/ch-9.html"><img style="border-style: none;" alt="CC0" src="assets/images/cc-by.png" height="17"/></a> |
                <!-- <a style="color: var(--footer-hyperlink-text-color)" href="searchform.html">Search</a> | -->
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://www.ihe.net/resources/public_comment/">Propose a change<img alt="external" style="vertical-align: baseline" src="external.png"/></a>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-HLBNC861DJ');
</script>

          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->


  
    
  


  
    
  



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

