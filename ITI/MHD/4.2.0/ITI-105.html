<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>IHE.ITI.MHD\2:3.105 Simplified Publish [ITI-105] - FHIR v4.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/ihe.css" rel="stylesheet"/>
<link href="assets/css/nonum.css" rel="stylesheet"/>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async> </script> 


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"12"}
    h3,h4,h5,h6{--heading-prefix:"12"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
  <a id="ihe-logo" no-external="true" href="http://profiles.ihe.net">
    <img height="71" alt="Visit the IHE website" src="assets/images/ihe-international.png"/>
  </a>
</div>
<div id="family-nav">
  <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="30" alt="Visit the FHIR website" src="assets/images/fhir-logo.png"/> </a>
</div>
<!--
<div id="hl7-search">
  <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
</div>
-->
<div id="project-nav">
  
  
    <a id="project-logo" no-external="true" href="http://profiles.ihe.net/ITI/index.html"><img height="70" alt="Visit the ITI website" src="assets/images/ITI.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Mobile access to Health Documents (MHD)</span>
            <br/>
            <span style="display:inline-block;">4.2.0 - Trial-Implementation



  <img alt="International flag" src="assets/images/001.svg" height="16" title="International"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">MHD Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 1
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="index.html">Introduction</a>
      </li>
      <li>
        <a href="1331_actors_and_transactions.html">Actors and Transactions</a>
      </li>
      <li>
        <a href="1332_actor_options.html">Actor Options</a>
      </li>
      <li>
        <a href="1333_required_grouping.html">Actor Required Grouping</a>
      </li>
      <li>
        <a href="1334_overview.html">Overview</a>
      </li>
      <li>
        <a href="1335_security_considerations.html">Security Considerations</a>
      </li>
      <li>
        <a href="1336_cross_profile_considerations.html">Cross Profile Considerations</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="ITI-65.html">Provide Document Bundle [ITI-65]</a>
      </li>
      <li>
        <a href="ITI-66.html">Find Document Lists [ITI-66]</a>
      </li>
      <li>
        <a href="ITI-67.html">Find Document References [ITI-67]</a>
      </li>
      <li>
        <a href="ITI-68.html">Retrieve Document [ITI-68]</a>
      </li>
      <li>
        <a href="ITI-105.html">Simplified Publish [ITI-105]</a>
      </li>
      <li>
        <a href="ITI-106.html">Generate Metadata [ITI-106]</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 3
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="31_xds.html">Error Codes</a>
      </li>
      <li>
        <a href="32_fhir_maps.html">FHIR Maps</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="testplan.html">Test Plan</a>
  </li>
  <li>
    <a href="artifacts.html">Artifact Index</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>2:3.105 Simplified Publish [ITI-105]</b></li>

          <span style="float:right;">

            <a href="ITI-68.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="ITI-106.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the IHE Mobile Access to Health Documents (v4.2.0: Publication) based on <a href="http://hl7.org/fhir/R4">FHIR R4</a>. This is the current published version in its permanent home (it will always be available at this URL).  For a full list of available versions, see the <a href="https://profiles.ihe.net/ITI/MHD/history.html">Directory of published versions <img src="external.png" style="text-align: baseline"></a></p><!--EndReleaseHeader-->
  <h2>2:3.105 Simplified Publish [ITI-105]</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#231051-scope" id="markdown-toc-231051-scope">2:3.105.1 Scope</a></li>
  <li><a href="#231052-actors-roles" id="markdown-toc-231052-actors-roles">2:3.105.2 Actors Roles</a></li>
  <li><a href="#231053-referenced-standards" id="markdown-toc-231053-referenced-standards">2:3.105.3 Referenced Standards</a></li>
  <li><a href="#231054-messages" id="markdown-toc-231054-messages">2:3.105.4 Messages</a></li>
  <li><a href="#231055-security-considerations" id="markdown-toc-231055-security-considerations">2:3.105.5 Security Considerations</a></li>
</ul>

</div>
<p>This section corresponds to transaction [ITI-105] of the IHE Technical Framework. Transaction [ITI-105] is used by the Document Source and Document Recipient Actors. The Simplified Publish [ITI-105] transaction is used to transmit a document and the document metadata.</p>

<h3 id="231051-scope">2:3.105.1 Scope</h3>

<p>The Simplified Publish [ITI-105] transaction passes a Simplified Publish Request from a Document Source to a Document Recipient.</p>

<h3 id="231052-actors-roles">2:3.105.2 Actors Roles</h3>

<p><strong>Table 2:3.105.2-1: Actor Roles</strong></p>

<table class="grid">
  <thead>
    <tr>
      <th>Actor</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="1331_actors_and_transactions.html#133111-document-source">Document Source</a></td>
      <td>Sends document and metadata to the Document Recipient</td>
    </tr>
    <tr>
      <td><a href="1331_actors_and_transactions.html#133113-document-recipient">Document Recipient</a></td>
      <td>Accepts the document and metadata sent from the Document Source</td>
    </tr>
  </tbody>
</table>

<h3 id="231053-referenced-standards">2:3.105.3 Referenced Standards</h3>

<p><strong>FHIR-R4</strong> <a href="http://www.hl7.org/FHIR/R4">HL7 FHIR Release 4.0</a></p>

<h3 id="231054-messages">2:3.105.4 Messages</h3>

<div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="382px" preserveAspectRatio="none" style="width:716px;height:382px;background:#FFFFFF;" version="1.1" viewBox="0 0 716 382" width="716px" zoomAndPan="magnify"><defs><filter height="300%" id="f1cujxzons67wq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0" /><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0" /><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3" /><feBlend in="SourceGraphic" in2="blurOut3" mode="normal" /></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="277" x="222.25" y="30.6855">Publish Document Bundle [ITI-105]</text><rect fill="#FFFFFF" filter="url(#f1cujxzons67wq)" height="269.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="65.5" y="88.25" /><rect fill="#FFFFFF" filter="url(#f1cujxzons67wq)" height="269.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="329.5" y="88.25" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="70" x2="70" y1="78.25" y2="375.7109" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="334" x2="334" y1="78.25" y2="375.7109" /><rect fill="#FEFECE" filter="url(#f1cujxzons67wq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="5" y="41.6406" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="12" y="63.1738">Document Source</text><rect fill="#FEFECE" filter="url(#f1cujxzons67wq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="141" x="262" y="41.6406" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="269" y="63.1738">Document Recipient</text><rect fill="#FFFFFF" filter="url(#f1cujxzons67wq)" height="269.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="65.5" y="88.25" /><rect fill="#FFFFFF" filter="url(#f1cujxzons67wq)" height="269.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="329.5" y="88.25" /><polygon fill="#A80036" points="317.5,106.6016,327.5,110.6016,317.5,114.6016,321.5,110.6016" style="stroke:#A80036;stroke-width:1.0;" /><line style="stroke:#A80036;stroke-width:1.0;" x1="75.5" x2="323.5" y1="110.6016" y2="110.6016" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="82.5" y="105.7451">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="93.5" y="105.7451">Request to publish document [ITI-105]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="339.5" x2="381.5" y1="140.9531" y2="140.9531" /><line style="stroke:#A80036;stroke-width:1.0;" x1="381.5" x2="381.5" y1="140.9531" y2="153.9531" /><line style="stroke:#A80036;stroke-width:1.0;" x1="340.5" x2="381.5" y1="153.9531" y2="153.9531" /><polygon fill="#A80036" points="350.5,149.9531,340.5,153.9531,350.5,157.9531,346.5,153.9531" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="346.5" y="136.0967">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="357.5" y="136.0967">Validate DocumentReference</text><line style="stroke:#A80036;stroke-width:1.0;" x1="339.5" x2="381.5" y1="184.3047" y2="184.3047" /><line style="stroke:#A80036;stroke-width:1.0;" x1="381.5" x2="381.5" y1="184.3047" y2="197.3047" /><line style="stroke:#A80036;stroke-width:1.0;" x1="340.5" x2="381.5" y1="197.3047" y2="197.3047" /><polygon fill="#A80036" points="350.5,193.3047,340.5,197.3047,350.5,201.3047,346.5,197.3047" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="346.5" y="179.4482">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="357.5" y="179.4482">Extract the document</text><line style="stroke:#A80036;stroke-width:1.0;" x1="339.5" x2="381.5" y1="227.6563" y2="227.6563" /><line style="stroke:#A80036;stroke-width:1.0;" x1="381.5" x2="381.5" y1="227.6563" y2="240.6563" /><line style="stroke:#A80036;stroke-width:1.0;" x1="340.5" x2="381.5" y1="240.6563" y2="240.6563" /><polygon fill="#A80036" points="350.5,236.6563,340.5,240.6563,350.5,244.6563,346.5,240.6563" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="346.5" y="222.7998">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="357.5" y="222.7998">Revise DocumentReference to point at document</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="339.5" x2="381.5" y1="271.0078" y2="271.0078" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381.5" x2="381.5" y1="271.0078" y2="284.0078" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="340.5" x2="381.5" y1="284.0078" y2="284.0078" /><polygon fill="#A80036" points="350.5,280.0078,340.5,284.0078,350.5,288.0078,346.5,284.0078" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="346.5" y="266.1514">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="357.5" y="266.1514">Create SubmissionSet from DocumentReference and context</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="339.5" x2="381.5" y1="314.3594" y2="314.3594" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381.5" x2="381.5" y1="314.3594" y2="327.3594" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="340.5" x2="381.5" y1="327.3594" y2="327.3594" /><polygon fill="#A80036" points="350.5,323.3594,340.5,327.3594,350.5,331.3594,346.5,327.3594" style="stroke:#A80036;stroke-width:1.0;" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="346.5" y="309.5029">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="357.5" y="309.5029">persist (e.g. XDS Provide and Register)</text><polygon fill="#A80036" points="81.5,353.7109,71.5,357.7109,81.5,361.7109,77.5,357.7109" style="stroke:#A80036;stroke-width:1.0;" /><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="333.5" y1="357.7109" y2="357.7109" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="87.5" y="352.8545">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="98.5" y="352.8545">Document published [ITI-105]</text></g></svg>
</div>

<p><br clear="all" /></p>

<p><strong>Figure 2:3.105.4-1: Simplified Publish Interactions</strong></p>

<h4 id="2310541-simplified-publish-request-message">2:3.105.4.1 Simplified Publish Request Message</h4>
<p>This message uses the HTTP POST method on the target Simplified Publish endpoint to convey the metadata and the document as a FHIR DocumentReference.</p>

<h5 id="23105411-trigger-events">2:3.105.4.1.1 Trigger Events</h5>

<p>This method is invoked when the Document Source needs to submit one document to a Document Recipient.</p>

<h5 id="23105412-message-semantics">2:3.105.4.1.2 Message Semantics</h5>

<p>The Document Source shall initiate a FHIR “create” action by sending an HTTP POST request method composed of a FHIR <a href="StructureDefinition-IHE.MHD.SimplifiedPublish.DocumentReference.html">Simplified Publish DocumentReference</a>, with the document encoded in the <code class="language-plaintext highlighter-rouge">DocumentReference.content.attachment.data</code> element. Refer to <a href="32_fhir_maps.html">ITI TF-3: 4.5.1</a> for details on the FHIR Resources and how Document Sharing metadata attributes are mapped.</p>

<p>The media type of the HTTP body shall be either <code class="language-plaintext highlighter-rouge">application/fhir+json</code> or <code class="language-plaintext highlighter-rouge">application/fhir+xml</code>.</p>

<p>The Simplified Publish message is sent to the DocumentReference at the base URL as defined in FHIR. See <a href="http://hl7.org/fhir/R4/http.html">http://hl7.org/fhir/R4/http.html</a> for the definition of “HTTP” access methods and “base”.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[base]/DocumentReference
</code></pre></div></div>

<p>The Document Source shall assure the <a href="StructureDefinition-IHE.MHD.SimplifiedPublish.DocumentReference.html">Simplified Publish DocumentReference</a> resource are consistent with the <a href="https://profiles.ihe.net/ITI/TF/Volume3/index.html#4">Document Sharing metadata</a> requirements as specified for attributes <a href="https://profiles.ihe.net/ITI/TF/Volume3/ch-4.3.html#4.3.1">ITI TF-3: Table 4.3.1-3 “Sending Actor Metadata Attribute Optionality”</a>. The Document Source that supports the <a href="1332_actor_options.html#13322-xds-on-fhir-option">Comprehensive Metadata</a> or the <a href="1332_actor_options.html#13322-xds-on-fhir-option">XDS on FHIR</a> Options shall assure consistency with column “XDS DS”; otherwise, the Document Source shall assure consistency with column “XDR MS”. 
Except that the Document Source does not need to provide any entryUUID values, as the entryUUID will be populated by the Document Recipient when necessary.</p>

<h6 id="231054121-documentreference-resources">2:3.105.4.1.2.1 DocumentReference Resources</h6>

<p>For complete information on constructing a FHIR <a href="StructureDefinition-IHE.MHD.SimplifiedPublish.DocumentReference.html">Simplified Publish DocumentReference</a> Resource metadata requirements. Recommend to populate all elements possible.</p>

<p>When resources are <code class="language-plaintext highlighter-rouge">contained</code> , see <a href="32_fhir_maps.html">ITI TF-3: 4.5.1</a>, they shall be contained using the FHIR contained method (see <a href="http://hl7.org/fhir/R4/references.html#contained">http://hl7.org/fhir/R4/references.html#contained</a> ).</p>

<p>The Document Source shall populate accurate .hash and .size for the raw document content artifact, that has been base64encoded in the <code class="language-plaintext highlighter-rouge">DocumentReference.content.attachment.data</code> element.</p>

<p>The <code class="language-plaintext highlighter-rouge">DocumentReference.subject</code> value shall be populated with the identity of the Patient.</p>

<h6 id="231054122-patient-identity">2:3.105.4.1.2.2 Patient Identity</h6>

<p>The DocumentReference.subject value shall be a Reference to a FHIR Patient Resource. The Patient Reference shall be a Patient Resource hosted on a commonly accessible server.</p>
<ul>
  <li>A Patient Reference to a commonly accessible server may be obtained through use of <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-38.html">PDQm</a>, <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-41.html">PIXm</a>, <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-49.html">PMIR</a>, or by some other means.</li>
  <li>A commonly accessible logical reference using Patient Identifier, instead of a literal reference, may be acceptable where there is a common Identifier, such as a national individual identifier.</li>
</ul>

<p>When the <a href="1332_actor_options.html#13323-uncontained-reference-option">UnContained Reference Option</a> is used, there is no need to populate the sourcePatientInfo element. Otherwise, when sourcePatientInfo is provided, the DocumentReference.context.sourcePatientInfo shall be a reference to a “contained” Patient Resource. That is, the source patient info is encoded in a Patient Resource within the DocumentReference.contained element (see <a href="http://hl7.org/fhir/R4/references.html#contained">http://hl7.org/fhir/R4/references.html#contained</a> ).</p>

<h6 id="231054123-replace-transform-signs-and-append-associations">2:3.105.4.1.2.3 Replace, Transform, Signs, and Append Associations</h6>

<p>The DocumentReference.relatesTo element indicates an association between DocumentReference resources. The relatesTo.target element in the provided DocumentReference points at the pre-existing DocumentReference that is being replaced, transformed, signed, or appended. The relatesTo.code element in the provided DocumentReference shall be the appropriate relationship type code defined in <a href="http://hl7.org/fhir/R4/valueset-document-relationship-type.html">http://hl7.org/fhir/R4/valueset-document-relationship-type.html</a>. If a DocumentReference will be replaced, the to be replaced DocumentReference needs to be added and updated to status <code class="language-plaintext highlighter-rouge">superseded</code> within the transaction bundle.</p>

<h5 id="23105413-expected-actions">2:3.105.4.1.3 Expected Actions</h5>

<p>The Document Recipient shall accept both media types <code class="language-plaintext highlighter-rouge">application/fhir+json</code> and <code class="language-plaintext highlighter-rouge">application/fhir+xml</code>.</p>

<p>On receipt of the Simplified Publish Request Message, the Document Recipient shall validate the DocumentReference resource provided, extract the document from the DocumentReference.content.attachment.data element, create a Binary and SubmissionSet derived off of the DocumentReference, and respond with one of the HTTP codes defined in the response <a href="#23105412-message-semantics">Message Semantics</a>.</p>

<p>The Document Recipient should verify the FHIR resource elements for consistency with the Document Sharing metadata requirements as specified for attributes <a href="https://profiles.ihe.net/ITI/TF/Volume3/ch-4.3.html#4.3.1">ITI TF-3: Table 4.3.1-3: “Sending Actor Metadata Attribute Optionality”</a>.</p>
<ul>
  <li>The Document Recipient that supports the <a href="1332_actor_options.html#13322-xds-on-fhir-option">Comprehensive Metadata</a> or the <a href="1332_actor_options.html#13322-xds-on-fhir-option">XDS on FHIR</a> Option should validate against column “XDS DS”;</li>
  <li>Otherwise the Document Recipient should validate against column “XDR MS”.</li>
</ul>

<p>The Document Recipient shall extract the document, translate the DocumentReference metadata elements into a SubmissionSet following the <a href="https://www.ihe.net/uploadedFiles/Documents/PCC/IHE_PCC_TF_Vol2.pdf">PCC TF-2: 4.1.1 XDSSubmissionSet Metadata</a>, and may have further metadata translation requirements specified by the local Document Sharing Community policy.</p>

<p>A Document Recipient is allowed to be robust for non-compliant resources that violate the Document Sharing metadata requirements.</p>

<p>If necessary for processing, the Document Recipient shall retrieve Resources referenced by absolute URLs in the FHIR DocumentReference Resource.</p>

<p>If the Document Recipient encounters any errors or if any validation fails, the Document Recipient shall return an error using a FHIR OperationOutcome. If appropriate, it shall use error codes from <a href="https://profiles.ihe.net/ITI/TF/Volume3/ch-4.2.html#4.2.4.1">ITI TF-3: Table 4.2.4.1-2</a>.</p>

<p>If the DocumentReference Resource is populated with a relatesTo element and the Document Recipient does not support the relatesTo.code value given, it shall return a warning message, as indicated in <em>Table 2:3.65.4.1.3-1: Warning message when relatesTo code is not supported</em>.</p>

<p><strong>Table 2:3.65.4.1.3-1: Warning message when relatesTo code is not supported</strong></p>

<table class="grid">
  <thead>
    <tr>
      <th>relatesTo.code</th>
      <th>Warning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>replaces</td>
      <td>PartialReplaceContentNotProcessed</td>
    </tr>
    <tr>
      <td>transforms</td>
      <td>PartialTransformContentNotProcessed</td>
    </tr>
    <tr>
      <td>appends</td>
      <td>PartialAppendContentNotProcessed</td>
    </tr>
  </tbody>
</table>

<h6 id="231054131-grouping-with-actors-in-other-document-sharing-profiles">2:3.105.4.1.3.1 Grouping with Actors in other Document Sharing Profiles</h6>

<p>This section applies to grouping MHD Document Recipient with <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-10.html">XDS</a> <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-10.html#10.1.1.1">Document Source</a> Actor, <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-15.html">XDR</a> Document Source Actor, <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-15.html">XDR</a> Limited-Metadata Document Source Actor, and <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-16.html">XDM</a> Portable Media Creator Actor (e.g., with the <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-16.html#16.2.3">XDM ZIP over Email Option</a> ).</p>

<p>The Document Recipient shall transform the DocumentReference content into a proper message for the given grouped actor (e.g., the XDS Document Source using the Provide and Register Document Set-b <a href="https://profiles.ihe.net/ITI/TF/Volume2/ITI-41.html">[ITI-41]</a> transaction). The Document Recipient shall create appropriate metadata from Resources in the FHIR DocumentReference Resource, including SubmissionSet, and DocumentEntry.</p>

<p>Where values provided are References to FHIR resources (e.g., DocumentReference.encounter), the Reference should be converted to a <a href="https://profiles.ihe.net/ITI/TF/Volume3/ch-4.2.html#4.2.3.1.7">Document Sharing <code class="language-plaintext highlighter-rouge">CXi</code> Identifier Datatype</a> for recording in the Document Sharing ebRIM using the Identifier Type Codes when appropriate (see <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.9.1.2-xds-cxi-mapped-to-fhir-identifier-type">Appendix Z.9.1.2</a> ). The conversion may be by using the referenced Resource business .identifier. Note, there is not an obvious conversion of a reference .id to <code class="language-plaintext highlighter-rouge">CXi</code> identifier. Note that DocumentReference.encounter would be mapped into DocumentEntry.referenceIdList as an Identifier Type Code of <code class="language-plaintext highlighter-rouge">urn:ihe:iti:xds:2015:encounterId</code>.</p>

<p>If the Provide Document Bundle Message contains a DocumentReference with a relatesTo element, the code shall be translated using the <a href="ConceptMap-AssociationTypeVsRelatesTo.html">AssociationType vs RelatesTo ConceptMap</a>.</p>

<p>Some FHIR elements do not translate to XDS concepts; the handling of these elements is left to the implementer of the Document Recipient.</p>

<p>Upon successful conversion of the FHIR DocumentReference to XDS Document Sharing metadata, the grouped source actor shall execute the appropriate transaction. The transaction result, and any error or warning messages, shall be reported to the MHD Document Source. The Document Recipient is responsible for translating the response to the appropriate HTTP Status Code and FHIR OperationOutcome Resource in the Simplified Publish Response Message.</p>

<h4 id="2310542-simplified-publish-response-message">2:3.105.4.2 Simplified Publish Response Message</h4>

<p>The Document Recipient returns a HTTP Status code appropriate to the processing outcome, conforming to the create transaction specification requirements as specified in <a href="http://hl7.org/fhir/R4/http.html#create">http://hl7.org/fhir/R4/http.html#create</a>.</p>

<h5 id="23105421-trigger-events">2:3.105.4.2.1 Trigger Events</h5>

<p>This message shall be sent when a success or error condition needs to be communicated. Success is only indicated once the document is received and completely processed and persisted as appropriate to the Document Recipient Actor configuration.</p>

<h5 id="23105422-message-semantics">2:3.105.4.2.2 Message Semantics</h5>

<p>To enable the Document Source to know the outcome of processing the transaction, and the identities assigned to the resources by the Document Recipient, the Document Recipient shall return the DocumentReference as created. The Document Recipient shall comply with FHIR <a href="http://hl7.org/fhir/R4/http.html#ops">http://hl7.org/fhir/R4/http.html#ops</a>.</p>

<h5 id="23105423-expected-actions">2:3.105.4.2.3 Expected Actions</h5>

<p>The Document Source processes the results according to application-defined rules.</p>

<h4 id="2310543-capabilitystatement-resource">2:3.105.4.3 CapabilityStatement Resource</h4>

<p>Document Recipient shall provide a CapabilityStatement Resource as described in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.3-capabilitystatement-resource">ITI TF-2x: Appendix Z.3</a> indicating the transaction has been implemented.</p>
<ul>
  <li>Requirements CapabilityStatement for <a href="CapabilityStatement-IHE.MHD.DocumentRecipient.Simplified.html">Document Recipient Simplified Publish Option</a>. This indicates that the Simplified Publish Option is declared.</li>
</ul>

<p>Document Source should provide a CapabilityStatement Resource as described in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.3-capabilitystatement-resource">ITI TF-2x: Appendix Z.3</a> indicating the transaction has been implemented.</p>
<ul>
  <li>Requirements CapabilityStatement for <a href="CapabilityStatement-IHE.MHD.DocumentSource.Simplified.html">Document Source Simplified Publish Metadata Option</a>. This indicates that the Simplified Publish Option is declared.</li>
</ul>

<h3 id="231055-security-considerations">2:3.105.5 Security Considerations</h3>

<p>See <a href="1335_security_considerations.html">MHD Security Considerations</a>.</p>

<h4 id="2310551-security-audit-considerations">2:3.105.5.1 Security Audit Considerations</h4>

<p>The security audit criteria are similar to those for the Provide and Register Document Set-b <a href="https://profiles.ihe.net/ITI/TF/Volume2/ITI-41.html">[ITI-41]</a> transaction as this transaction does export a document.</p>

<h5 id="23105511-document-source-audit">2:3.105.5.1.1 Document Source Audit</h5>

<p>The Document Source when grouped with ATNA Secure Node or Secure Application Actor shall be able to record a <a href="StructureDefinition-IHE.MHD.SimplifiedPublish.Audit.Source.html">Simplified Publish Audit Event Log</a>. <a href="AuditEvent-ex-auditSimplifiedPublish-source.html">Audit Example for a Simplified Publish Bundle Transaction from source perspective</a>.</p>

<h5 id="23105512-document-recipient-audit">2:3.105.5.1.2 Document Recipient Audit</h5>

<p>The Document Recipient when grouped with ATNA Secure Node or Secure Application Actor shall be able to record a <a href="StructureDefinition-IHE.MHD.SimplifiedPublish.Audit.Recipient.html">Simplified Publish Audit Event Log</a>. <a href="AuditEvent-ex-auditSimplifiedPublish-recipient.html">Audit Example for a Simplified Publish Bundle Transaction from recipient perspective</a>.</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="ITI-68.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="ITI-106.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.ihe.net/ihe_domains/it_infrastructure/">IHE IT Infrastructure Technical Committee</a>.  Package ihe.iti.mhd#4.2.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Dec 7, 2022 16:34-0600">2022-12-07</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.MHD/issues/new/choose">New Issue</a> | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/ITI.MHD/issues">Issues</a>
                
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://profiles.ihe.net/ITI/MHD/history.html">Version History</a></a> |
                 <a style="color: var(--footer-hyperlink-text-color)" rel="license" href="https://profiles.ihe.net/GeneralIntro/ch-9.html"><img style="border-style: none;" alt="CC0" src="assets/images/cc-by.png" height="17"/></a> |
                <!-- <a style="color: var(--footer-hyperlink-text-color)" href="searchform.html">Search</a> | -->
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://www.ihe.net/resources/public_comment/">Propose a change<img alt="external" style="vertical-align: baseline" src="external.png"/></a>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-HLBNC861DJ');
</script>

          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->


  
    
  


  
    
  



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

