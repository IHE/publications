<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>2:3.44 Mobile Query Existing Data [PCC-44] - Query for Existing Data for Mobile (QEDm) v3.0.0-comment1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/ihe.css" rel="stylesheet"/>
<link href="assets/css/nonum.css" rel="stylesheet"/>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-HLBNC861DJ" async> </script> 


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"3"}
    h3,h4,h5,h6{--heading-prefix:"3"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
  <a id="ihe-logo" no-external="true" href="http://profiles.ihe.net">
    <img height="71" alt="Visit the IHE website" src="assets/images/ihe-international.png"/>
  </a>
</div>
<div id="family-nav">
  <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="30" alt="Visit the FHIR website" src="assets/images/fhir-logo.png"/> </a>
</div>
<!--
<div id="hl7-search">
  <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
</div>
-->
<div id="project-nav">
  
  
    <a id="project-logo" no-external="true" href="http://profiles.ihe.net/PCC/index.html"><img height="70" alt="Visit the PCC website" src="assets/images/PCC.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Query for Existing Data for Mobile (QEDm)</span>
            <br/>
            <span style="display:inline-block;">3.0.0-comment1 - ballot



  <img alt="International flag" src="assets/images/001.svg" height="16" title="International"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">QEDm Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 1
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="volume-1.html">Introduction</a>
      </li>
      <li>
        <a href="volume-1.html#actors-and-transactions">Actors and Transactions</a>
      </li>
      <li>
        <a href="volume-1.html#actor-options">Actor Options</a>
      </li>
      <li>
        <a href="volume-1.html#required-groupings">Required Groupings</a>
      </li>
      <li>
        <a href="volume-1.html#overview">Overview</a>
      </li>
      <li>
        <a href="volume-1.html#security-considerations">Security Considerations</a>
      </li>
      <li>
        <a href="volume-1.html#other-grouping">Cross-Profile Considerations</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="PCC-44.html">Mobile Query Existing Data [PCC-44]</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="volume-4.html">Volume 4</a>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Other
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="other.html">Changes to Other IHE Specifications</a>
      </li>
      <li>
        <a href="downloads.html">Download and Analysis</a>
      </li>
      <li>
        <a href="testplan.html">Test Plan</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>2:3.44 Mobile Query Existing Data [PCC-44]</b></li>

          <span style="float:right;">

            <a href="volume-1.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="volume-4.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the Query for Existing Data for Mobile (QEDm) (v3.0.0-comment1: Publication Ballot 1) based on <a no-external="true" href="http://hl7.org/fhir/R4">FHIR (HL7® FHIR® Standard) R4</a>. This is the current published version in its permanent home (it will always be available at this URL).  For a full list of available versions, see the <a no-external="true" href="https://profiles.ihe.net/PCC/QEDm/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>2:3.44 Mobile Query Existing Data [PCC-44]</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#23441-scope" id="markdown-toc-23441-scope">2:3.44.1 Scope</a></li>
  <li><a href="#23442-actor-roles" id="markdown-toc-23442-actor-roles">2:3.44.2 Actor Roles</a></li>
  <li><a href="#23443-referenced-standards" id="markdown-toc-23443-referenced-standards">2:3.44.3 Referenced Standards</a></li>
  <li><a href="#23444-messages" id="markdown-toc-23444-messages">2:3.44.4 Messages</a></li>
  <li><a href="#23445-security-considerations" id="markdown-toc-23445-security-considerations">2:3.44.5 Security Considerations</a></li>
</ul>

</div>
<p>This section corresponds to transaction [PCC-44] of the IHE Technical Framework. Transaction [PCC-44] is used by the Clinical Data Consumer and Clinical Data Source Actors.</p>

<h3 id="23441-scope">2:3.44.1 Scope</h3>

<p>The Mobile Query Existing Data transaction is used to query for fine
grained clinical data elements that satisfy a set of parameters by using
the FHIR framework. The result of the query is a FHIR Bundle containing
FHIR clinical data Resources that match the query parameters.</p>

<p>The QEDm Profile assumes that categories and codes referenced by these
FHIR Resources need to be defined at the time of deployment. The
specification of these FHIR Resources make recommendations on categories
and codes that SHOULD be considered.</p>

<h3 id="23442-actor-roles">2:3.44.2 Actor Roles</h3>

<p><strong>Table 2:3.44.2-1: Actor Roles</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Actor</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="volume-1.html#client">Clinical Data Consumer</a></td>
      <td>Queries the Clinical Data Source for clinical data content. Clinical content requested by the Clinical Data Consumer depends on query options supported by the consumer.</td>
    </tr>
    <tr>
      <td><a href="volume-1.html#server">Clinical Data Source</a></td>
      <td>Responds to query, supplying the FHIR Resources representing the clinical data content that match the search criteria provided by the Clinical Data Consumer.</td>
    </tr>
  </tbody>
</table>

<h3 id="23443-referenced-standards">2:3.44.3 Referenced Standards</h3>

<ul>
  <li><a href="http://hl7.org/fhir/R4/">HL7 FHIR standard</a></li>
</ul>

<h3 id="23444-messages">2:3.44.4 Messages</h3>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="125px" preserveAspectRatio="none" style="width:249px;height:125px;background:#FFFFFF;" version="1.1" viewBox="0 0 249 125" width="249px" zoomAndPan="magnify"><defs /><g><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="25" y="47.6094" /><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="210" y="47.6094" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="30" x2="30" y1="37.6094" y2="118.3125" /><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="215" x2="215" y1="37.6094" y2="118.3125" /><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="5" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="12" y="26.5332">Client</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="187" y="5" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="194" y="26.5332">Server</text><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="25" y="47.6094" /><rect fill="#FFFFFF" height="52.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="210" y="47.6094" /><polygon fill="#181818" points="198,65.9609,208,69.9609,198,73.9609,202,69.9609" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;" x1="35" x2="204" y1="69.9609" y2="69.9609" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="42" y="65.1045">1. Go Query [PCC-44]</text><polygon fill="#181818" points="41,96.3125,31,100.3125,41,104.3125,37,100.3125" style="stroke:#181818;stroke-width:1.0;" /><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="35" x2="214" y1="100.3125" y2="100.3125" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="47" y="95.4561">2. Go Response [PCC-44]</text></g></svg>
</div>
<p><br clear="all" /></p>

<p><strong>Figure 2:3.44.4-1: Interaction Diagram</strong></p>

<h4 id="234441-mobile-query-existing-data-request-message">2:3.44.4.1 Mobile Query Existing Data Request message</h4>
<p>This message uses the HTTP GET method parameterized query to retrieve
FHIR Resources representing clinical data matching search parameters in
the GET request.</p>

<p>QEDm does not mandate any additional extended or custom method.</p>

<h5 id="2344411-trigger-events">2:3.44.4.1.1 Trigger Events</h5>

<p>When the Clinical Data Consumer needs to discover clinical data
Resources matching various search parameters it issues a Mobile Query
Existing Data message.</p>

<h5 id="2344412-message-semantics">2:3.44.4.1.2 Message Semantics</h5>

<p>The Clinical Data Consumer executes an HTTP GET against the proper
Clinical Data Source’s QEDm URL.</p>

<p>The search target follows the FHIR http specification <a href="http://hl7.org/fhir/R4/http.html">http://hl7.org/fhir/R4/http.html</a>, addressing the proper FHIR
Resource type, according to the supported query options (see Section
2:3.44.4.1.2.1). The syntax of the FHIR query is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/[Resource-type]{?[parameters]}
</code></pre></div></div>

<p>with the following constraints:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">[base]</code> represents the Service Base URL</li>
  <li>The <code class="language-plaintext highlighter-rouge">[Resource-type]</code> represents the name of the FHIR Resource to consider (each option can involve one or more Resources), as specified in Section 3.44.4.1.2.1</li>
  <li>The <code class="language-plaintext highlighter-rouge">[parameters]</code> represents a series of encoded name-value pairs representing the filter for the query, as specified in Section 3.44.4.1.2.1, as well as control parameters to modify the behavior of the Clinical Data Source such as response format, or pagination. See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.6-populating-the-expected-response-format">ITI TF-2: Appendix Z.6</a> for more details on response format.</li>
</ul>

<h6 id="23444121-query-search-parameters">2:3.44.4.1.2.1 Query Search Parameters</h6>

<p>All query parameter values SHALL be appropriately encoded per RFC3986
“percent” encoding rules. Note that percent encoding does restrict the
character set to a subset of ASCII characters which is used for encoding
all other characters used in the URL.</p>

<p>The FHIR Resource type or types supported by the Clinical Data Consumer
and Clinical Data Source are determined by a QEDm named option. An actor
claiming named option is required to support the FHIR Resource types
listed below. According to the supported option, the Clinical Data
Consumer MAY query and the Clinical Data Source SHALL be capable of
responding on the Resource types specified in Table 2:3.44.4.1.2.1-1 by processing
all the search parameters defined in the following sections.</p>

<p>The Clinical Data Source MAY choose to support additional query
parameters beyond the subset defined by the profiling listed below, if
done according to the core FHIR specification. Such additional
parameters are considered out of scope for this transaction. The
Clinical Data Source MAY ignore any additional parameter not specified
in this transaction. See <a href="http://hl7.org/fhir/R4/search.html#errors">http://hl7.org/fhir/R4/search.html#errors</a>.</p>

<p>Sections 2:3.44.4.1.2.1.1 through 2:3.44.4.1.2.1.10 detail the Resource and search
parameters combinations to be supported for each of the FHIR Resources
designated by a named option.</p>

<p>See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.10-profiling-conventions-for-constraints-on-fhir">ITI TF-2: Appendix Z.10 Profiling conventions for constraints on FHIR</a> for a description of terms used in the Optionality columns.</p>

<h6 id="234441211-simple-observations-option-search-parameters">2:3.44.4.1.2.1.1 Simple Observations Option Search Parameters</h6>

<p>When supporting the Simple Observations Option, the Clinical Data
Consumer supplies, and the Clinical Data Source SHALL support, the
FHIR <a href="http://hl7.org/fhir/R4/observation.html">Observation</a> Resource
and be at least capable
of processing the search parameters combinations as specified by the
following table, according to the related optionality.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Observation?[parameters]
</code></pre></div></div>

<tablecaption><b>Table 2:3.44.4.1.2.1.1-1: Simple Observations Option Search Parameters</b></tablecaption>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Type</th>
      <th>Modifiers</th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient + category</td>
      <td>reference + token</td>
      <td> </td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + category + code</td>
      <td>reference + token</td>
      <td> </td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + category + date</td>
      <td>reference + token + date</td>
      <td>date modifiers <code class="language-plaintext highlighter-rouge">ge</code>,<code class="language-plaintext highlighter-rouge">le</code>,<code class="language-plaintext highlighter-rouge">gt</code>,<code class="language-plaintext highlighter-rouge">lt</code></td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + category + code + date</td>
      <td>reference + token + date</td>
      <td>date modifiers <code class="language-plaintext highlighter-rouge">ge</code>,<code class="language-plaintext highlighter-rouge">le</code>,<code class="language-plaintext highlighter-rouge">gt</code>,<code class="language-plaintext highlighter-rouge">lt</code></td>
      <td>O</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<p><em>Note 1: The Clinical Data Consumer SHALL support at least one of the search parameters combinations.</em></p>

<h6 id="234441212-allergies-and-intolerances-option-search-parameters">2:3.44.4.1.2.1.2 Allergies and Intolerances Option Search Parameters</h6>

<p>When supporting the Allergies and Intolerances Option, the Clinical Data
Consumer SHALL supply and the Clinical Data Source SHALL support the
FHIR <a href="http://hl7.org/fhir/R4/allergyintolerance.html">AllergyIntolerance</a> Resource
and be capable of
processing the search parameter as specified by the following table.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/AllergyIntolerance?[parameters]
</code></pre></div></div>

<p><strong>Table 2:3.44.4.1.2.1.2-1: Allergies and Intolerances Option Search Parameters</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Type</th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient</td>
      <td>reference</td>
      <td>R</td>
      <td>R</td>
    </tr>
  </tbody>
</table>

<h6 id="234441213-conditions-option-search-parameters">2:3.44.4.1.2.1.3 Conditions Option Search Parameters</h6>

<p>The intended use of FHIR Condition resource includes recording of detailed information about conditions, problems or diagnoses recognized by a clinician.
When supporting the Conditions Option, the Clinical Data Consumer
supplies and the Clinical Data Source SHALL support the
FHIR <a href="http://hl7.org/fhir/R4/condition.html">Condition</a> Resource
and be capable of processing all
the search parameters combinations as specified by the following table,
according to the related optionality.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Condition?[parameters]
</code></pre></div></div>

<p><strong>Table 2:3.44.4.1.2.1.3-1: Conditions Option Search Parameters</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Type</th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient</td>
      <td>reference</td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + category</td>
      <td>reference + token</td>
      <td>O</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + clinical-status</td>
      <td>reference + token</td>
      <td>O</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<p><em>Note 1: The Clinical Data Consumer SHALL support at least one of the search parameters combinations</em></p>

<h6 id="234441214-diagnostic-reports-option-search-parameters">2:3.44.4.1.2.1.4 Diagnostic Reports Option Search Parameters</h6>

<p>When supporting the Diagnostic Reports Option, the Clinical Data
Consumer supplies and the Clinical Data Source SHALL support the
FHIR <a href="http://hl7.org/fhir/R4/diagnosticreport.html">DiagnosticReport</a> Resource
and be capable of
processing all the search parameters combinations as specified by the
following table, according to the related optionality.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/DiagnosticReport?[parameters]
</code></pre></div></div>

<p>Table 2:3.44.4.1.2.1.4-1: Diagnostic Reports Option Search Parameters</p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Type</th>
      <th>Modifiers</th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient + category</td>
      <td>reference + token</td>
      <td> </td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + category + code</td>
      <td>reference + token</td>
      <td> </td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + category + date</td>
      <td>reference + token + date</td>
      <td>date modifiers <code class="language-plaintext highlighter-rouge">ge</code>,<code class="language-plaintext highlighter-rouge">le</code>,<code class="language-plaintext highlighter-rouge">gt</code>,<code class="language-plaintext highlighter-rouge">lt</code></td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + category + code + date</td>
      <td>reference + token + date</td>
      <td>date modifiers <code class="language-plaintext highlighter-rouge">ge</code>,<code class="language-plaintext highlighter-rouge">le</code>,<code class="language-plaintext highlighter-rouge">gt</code>,<code class="language-plaintext highlighter-rouge">lt</code></td>
      <td>O</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<p><em>Note 1: The Clinical Data Consumer SHALL support at least one of the search parameters combinations</em></p>

<h6 id="234441215-medications-option-search-parameters">2:3.44.4.1.2.1.5 Medications Option Search Parameters</h6>

<p>When supporting the Medications Option, the Clinical Data Consumer SHALL
supply and the Clinical Data Source SHALL support the
FHIR <a href="http://hl7.org/fhir/R4/medication.html">Medication</a> Resource,
FHIR <a href="http://hl7.org/fhir/R4/medicationstatement.html">MedicationStatement</a> Resource, and
FHIR <a href="http://hl7.org/fhir/R4/medicationrequest.html">MedicationRequest</a> Resource,
and be capable of processing the
search parameters as specified by the following tables.</p>

<p>The <code class="language-plaintext highlighter-rouge">MedicationStatement</code> and <code class="language-plaintext highlighter-rouge">MedicationRequest</code> resources can represent a
medication, using an external reference to a <code class="language-plaintext highlighter-rouge">Medication</code> resource. If an
external <code class="language-plaintext highlighter-rouge">Medication</code> Resource is used in a <code class="language-plaintext highlighter-rouge">MedicationStatement</code> or a
<code class="language-plaintext highlighter-rouge">MedicationRequest</code>, it can be retrieved by using the <code class="language-plaintext highlighter-rouge">_include</code> search
parameter.</p>

<p>There are no search parameters required for the <code class="language-plaintext highlighter-rouge">Medication</code> Resource.</p>

<p>For MedicationStatement:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/MedicationStatement?[parameters]
</code></pre></div></div>

<p><strong>Table 2:3.44.4.1.2.1.5-1: MedicationStatement Search Parameters</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Type</th>
      <th><code class="language-plaintext highlighter-rouge">_include</code></th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient</td>
      <td>reference</td>
      <td>MedicationStatement:medication</td>
      <td>R</td>
      <td>R</td>
    </tr>
  </tbody>
</table>

<p>For MedicationRequest:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/MedicationRequest?[parameters]
</code></pre></div></div>

<p><strong>Table 3.44.4.1.2.1.5-2: MedicationRequest Search Parameters</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Type</th>
      <th><code class="language-plaintext highlighter-rouge">_include</code></th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient</td>
      <td>reference</td>
      <td>MedicationRequest:medication</td>
      <td>R</td>
      <td>R</td>
    </tr>
  </tbody>
</table>

<h6 id="234441216-immunizations-option-search-parameters">2:3.44.4.1.2.1.6 Immunizations Option Search Parameters</h6>

<p>When supporting the Immunizations Option, the Clinical Data Consumer MAY
supply and the Clinical Data Source SHALL support the
FHIR <a href="http://hl7.org/fhir/R4/immunization.html">Immunization</a> Resource
and be capable of processing the
search parameter as specified by the following table.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Immunization?[parameters]
</code></pre></div></div>

<p><strong>Table 2:3.44.4.1.2.1.6-1: Immunizations Option Search Parameters</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient</td>
      <td>reference</td>
      <td>R</td>
      <td>R</td>
    </tr>
  </tbody>
</table>

<h6 id="234441217-procedures-option-search-parameters">2:3.44.4.1.2.1.7 Procedures Option Search Parameters</h6>

<p>When supporting the Procedures Option, the Clinical Data Consumer
supplies and the Clinical Data Source SHALL support the
FHIR <a href="http://hl7.org/fhir/R4/procedure.html">Procedure</a> Resource
and be capable of processing all
the search parameters as specified by the following table, according to
the related optionality.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Procedure?[parameters]
</code></pre></div></div>

<p><strong>Table 2:3.44.4.1.2.1.7-1: Procedures Option Search Parameters</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Modifiers</th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient</td>
      <td>reference</td>
      <td> </td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + date</td>
      <td>reference + date</td>
      <td>date modifiers <code class="language-plaintext highlighter-rouge">ge</code>,<code class="language-plaintext highlighter-rouge">le</code>,<code class="language-plaintext highlighter-rouge">gt</code>,<code class="language-plaintext highlighter-rouge">lt</code></td>
      <td>R</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<p><em>Note 1: The Clinical Data Consumer SHALL support at least one of the search parameters combinations</em></p>

<h6 id="234441218-encounters-option-search-parameters">2:3.44.4.1.2.1.8 Encounters Option Search Parameters</h6>

<p>When supporting the Encounters Option, the Clinical Data Consumer
supplies and the Clinical Data Source SHALL support the
FHIR <a href="http://hl7.org/fhir/R4/encounter.html">Encounter</a> Resource
and be capable of processing all
the search parameters as specified by the following table, according to
the related optionality.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/Encounter?[parameters]
</code></pre></div></div>

<p><strong>Table 2:3.44.4.1.2.1.8-1: Encounters Option Search Parameters</strong></p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Modifiers</th>
      <th>Clinical Data Source</th>
      <th>Clinical Data Consumer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>patient</td>
      <td>reference</td>
      <td> </td>
      <td>R</td>
      <td>O</td>
    </tr>
    <tr>
      <td>patient + date</td>
      <td>reference + date</td>
      <td>date modifiers <code class="language-plaintext highlighter-rouge">ge</code>,<code class="language-plaintext highlighter-rouge">le</code>,<code class="language-plaintext highlighter-rouge">gt</code>,<code class="language-plaintext highlighter-rouge">lt</code></td>
      <td>R</td>
      <td>O</td>
    </tr>
  </tbody>
</table>

<p><em>Note 1: The Clinical Data Consumer SHALL support at least one of the search parameters combinations</em></p>

<h6 id="234441219-provenance-option-search-parameters">2:3.44.4.1.2.1.9 Provenance Option Search Parameters</h6>

<p>Clinical Data Consumer supporting this option is enabled to fetch a
certain FHIR Resource(s) together with any reference to the original
Document from which the Resource(s) has been derived. The FHIR
Provenance Resource containing those references can be included by
providing the <code class="language-plaintext highlighter-rouge">_revinclude</code> parameter in the query.</p>

<p>When supporting the Provenance Option, the Clinical Data
Consumer SHALL supply and the Clinical Data Source SHALL be capable of
processing the <code class="language-plaintext highlighter-rouge">_revinclude</code> parameter, as defined at <a href="http://hl7.org/fhir/R4/search.html#include">FHIR Search include</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET [base]/[Resource-type]?_revinclude=Provenance:target&amp;criteria
</code></pre></div></div>

<p>See Section 2:3.44.4.2.2.1 for the specification about the Provenance
content.</p>

<h6 id="2344412110-occupational-data-for-health-option-search-parameters">2:3.44.4.1.2.1.10 Occupational Data for Health Option Search Parameters</h6>

<p>When supporting the Occupational Data for Health (ODH) Option, the Clinical
Data Consumer SHALL supply and the Clinical Data Source SHALL be capable
of supporting <code class="language-plaintext highlighter-rouge">Observation</code> Resources compliant with
the <a href="https://profiles.ihe.net/PCC/ODH">IHE FHIR Profile: Occupational Data for Health (ODH) - International</a>.</p>

<h6 id="23444122-parameter-modifiers">2:3.44.4.1.2.2 Parameter Modifiers</h6>

<p>The Clinical Data Source SHALL support the “:exact” parameter modifier
on all query parameters of type string. When supplied by the Clinical
Data Consumer, the “:exact” parameter modifier instructs the Clinical
Data Source that exact matching SHALL be performed.</p>

<p>The Clinical Data Consumer SHOULD not use any additional parameter modifiers listed in the FHIR standard,
which are considered out of scope in the context of this transaction.</p>

<p>The Clinical Data Source SHALL reject any search request that contains a search parameter with an <a href="http://hl7.org/fhir/R4/search.html#modifiers">unsupported modifier</a>.</p>

<h6 id="23444123-populating-expected-response-format">2:3.44.4.1.2.3 Populating Expected Response Format</h6>

<p>The FHIR standard provides encodings for responses as either XML or
JSON. The Clinical Data Source SHALL support both message encodings,
whilst the Clinical Data Consumer SHALL support one and MAY support
both.</p>

<p>See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.6-populating-the-expected-response-format">ITI TF-2: Appendix Z.6</a> for details.</p>

<h5 id="2344413-expected-actions">2:3.44.4.1.3 Expected Actions</h5>

<p>The Clinical Data Source SHALL process the query to discover the
clinical data FHIR Resource entries (the fine-grained data elements)
that match the search parameters given and SHALL use a FHIR Bundle
resource to collect the matching entries to be returned.</p>

<p>The Clinical Data Source SHALL respond with a Mobile Query Existing Data
Response synchronously (i.e., on the same connection as was used to
initiate the request).</p>

<p>When the Provenance Option is specified, the response FHIR
Bundle SHALL also contain FHIR Provenance Resource entries that provide
consistency of the returned fine-grained data elements with the
coarse-grained data origin (e.g., Document). See Section 3.44.4.2.2.1
for the specification about the Provenance content. If the fine-grained
data element has not been extracted from a document, the Provenance
Resource MAY be absent.</p>

<p>See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.6-populating-the-expected-response-format">ITI TF-2: Appendix Z.6</a> for more details on response format
handling. See <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.7-guidance-on-access-denied-results">ITI TF-2: Appendix Z.7</a> for handling guidance for Access
Denied.</p>

<h4 id="34442-mobile-query-existing-data-response-message">3.44.4.2 Mobile Query Existing Data Response message</h4>

<p>The Clinical Data Source returns an HTTP Status code appropriate to the
processing as well as a list of the matching clinical data FHIR
Resources.</p>

<h5 id="344421-trigger-events">3.44.4.2.1 Trigger Events</h5>

<p>The Clinical Data Source completed processing of the Mobile Query
Existing Data Request message.</p>

<h5 id="344422-message-semantics">3.44.4.2.2 Message Semantics</h5>

<p>Based on the query results, the Clinical Data Source will either return
an error or success. The guidance on handling Access Denied related to
use of 200, 403 and 404 can be found in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.7-guidance-on-access-denied-results">ITI TF-2: Appendix Z.7</a>.</p>

<p>When the Clinical Data Source needs to report an error, it SHALL use
HTTP error response codes and SHOULD include a FHIR OperationOutcome
with more details on the failure. See FHIR
<a href="http://hl7.org/fhir/R4/http.html">http://hl7.org/fhir/R4/http.html</a> and
<a href="http://hl7.org/fhir/R4/operationoutcome.html">http://hl7.org/fhir/R4/operationoutcome.html</a>.</p>

<p>In particular, if a Data Source receives a Mobile Query Existing Data
transaction for a resource related to a QEDm Option not supported, it
SHALL return an OperationOutcome.issue.code valued as: ‘not-supported’
and an OperationOutcome.issue.details valued as: MSG_NO_MATCH No
Resource found matching the query “%s”.</p>

<p>If the Mobile Query Existing Data request message is processed
successfully, whether or not clinical data Resources are found, the HTTP
status code SHALL be 200.</p>

<p>The Mobile Query Existing Data Response message SHALL be a FHIR Bundle
Resource containing zero or more clinical data Resources plus optional
Provenance Resources (see Section 2:3.44.4.2.2.1). If the Clinical Data
Source is sending warnings, the Bundle Resource SHALL also contain an
OperationOutcome Resource that contains those warnings.</p>

<p>The response SHALL adhere to the FHIR Bundle constraints specified in
<a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.1-resource-bundles">ITI TF-2: Appendix Z.1</a>.</p>

<h6 id="23444221-provenance-option">2:3.44.4.2.2.1 Provenance Option</h6>

<p>A Clinical Data Source that supports the Provenance Option
may be grouped with the <a href="https://profiles.ihe.net/ITI/mXDE/index.html">Mobile Cross-Enterprise Document Data Element Extraction (mXDE)</a> Data Element Extractor <a href="https://profiles.ihe.net/ITI/mXDE/volume-1.html#145111-data-element-extractor">Actor</a> and thus will expose <a href="https://profiles.ihe.net/ITI/mXDE/StructureDefinition-IHE.ITI.mXDE.Provenance.html">mXDE defined Provenance</a> resources.</p>

<p>The Clinical Data Source MAY return Provenance Resources used for other
purposes than the one defined here. These would not have the indicated
<code class="language-plaintext highlighter-rouge">Provenance.policy</code> of <code class="language-plaintext highlighter-rouge">urn:ihe:iti:mxde:2023:document-provenance-policy</code>.</p>

<h6 id="23444222-resource-bundling">2:3.44.4.2.2.2 Resource Bundling</h6>

<p>Resource Bundling SHALL comply with the guidelines in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.1-resource-bundles">ITI TF-2: Appendix Z.1</a>.</p>

<p>The Clinical Data Source SHALL include all resources to be returned as a
contained resource. This means that the query SHALL return resource data
contained in the FHIR Bundle as entries.</p>

<h5 id="2344423-expected-actions">2:3.44.4.2.3 Expected Actions</h5>

<p>The Clinical Data Consumer processes the bundle of resources, received
in transaction [PCC-44] according to the capabilities of its
application. These capabilities are not specified by IHE.</p>

<p>If a Clinical Data Consumer cannot automatically recover from an error
condition, it SHOULD offer a means to make the error accessible to the
query initiator (e.g., user, system).</p>

<h6 id="23444231-provenance-option">2:3.44.4.2.3.1 Provenance Option</h6>

<p>A Clinical Data Consumer that supports the Provenance Option
processes the FHIR Provenance
resources.</p>

<p>When a Provenance resource is received with Provenance.policy valued at
<code class="language-plaintext highlighter-rouge">urn:ihe:iti:mxde:2023:document-provenance-policy</code>, the Provenance is compliant with the  <a href="https://profiles.ihe.net/ITI/mXDE/StructureDefinition-IHE.ITI.mXDE.Provenance.html">mXDE defined Provenance</a>. The <code class="language-plaintext highlighter-rouge">Provenance.target</code>
has a reference for the data element(s) for which a document reference
is sought. The Clinical Data Consumer SHALL extract from these Provenance.entity, the reference contained in the Provenance.entity to the document from which the target data-element was extracted. For more detail on interpretation of these Provenance records and accessing the provenance documents, see <a href="https://profiles.ihe.net/ITI/mXDE/index.html">Mobile Cross-Enterprise Document Data Element Extraction (mXDE)</a>.</p>

<p>A Clinical Data Consumer that supports the Provenance Option
SHALL process all Provenance resources contained in a bundle returned by
a [PCC-44] transaction where each provenance resource MAY include one
or more Provenance.target in conjunction with one or more
Provenance.entity.</p>

<h4 id="234443-conformance-resource">2:3.44.4.3 Conformance Resource</h4>

<p>Clinical Data Sources implementing this transaction SHALL provide a
Conformance Resource as described in <a href="https://profiles.ihe.net/ITI/TF/Volume2/ch-Z.html#z.3-capabilitystatement-resource">ITI TF-2: Appendix Z.3</a> indicating
the query operation for the Resources have been implemented and SHALL
include all the supported query parameters.</p>

<h3 id="23445-security-considerations">2:3.44.5 Security Considerations</h3>

<p>The retrieved content contains PHI that SHALL be protected.</p>

<p>See the <a href="volume-1.html#security-considerations">QEDm Security Considerations</a>.</p>

<h4 id="234451-security-audit-considerations">2:3.44.5.1 Security Audit Considerations</h4>

<p>Grouping a Clinical Data Source with an <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-9.html">Audit Trail and Node Authentication (ATNA)</a> Secure Node or Secure
Application is required. Grouping a Clinical Data Consumer with an <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-9.html">ATNA</a>
Secure Node or Secure Application is recommended.</p>

<p>The Clinical Data Consumer MAY be considered overburdened to fully
implement the requirements of a Secure Node or Secure Application. The
Clinical Data Source is likely a more robust service and SHALL
generate audit messages.</p>

<p>The AuditEvent resources to be recorded are refinements of the <a href="https://profiles.ihe.net/ITI/BALP/index.html">Basic AuditEvent Log Patterns (BALP)</a> for <a href="https://profiles.ihe.net/ITI/BALP/content.html#3573-restful-activities">RESTful Execute (search and query) where a Patient is a subject of the search</a>.</p>

<h5 id="2344511-clinical-data-consumer">2:3.44.5.1.1 Clinical Data Consumer</h5>

<p>The Clinical Data Consumer when grouped with <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-9.html">ATNA Secure Node or Secure Application</a> Actor SHALL be able to record a <a href="StructureDefinition-IHE.QEDm.Query.Audit.Consumer.html">Clinical Data Consumer AuditEvent</a>. <a href="AuditEvent-ex-auditQedmQuery-consumer.html">Audit Example for a QEDm Query transaction from consumer perspective</a>.</p>

<h5 id="2344512-clinical-data-source">2.3.44.5.1.2 Clinical Data Source</h5>

<p>The Clinical Data Source when grouped with <a href="https://profiles.ihe.net/ITI/TF/Volume1/ch-9.html">ATNA Secure Node or Secure Application</a> Actor SHALL be able to record a <a href="StructureDefinition-IHE.QEDm.Query.Audit.Source.html">Clinical Data Source AuditEvent</a>. <a href="AuditEvent-ex-auditQedmQuery-source.html">Audit Example for a QEDm Query transaction from source perspective</a>.</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="volume-1.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="volume-4.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2023+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.ihe.net/ihe_domains/patient_care_coordination/">IHE Patient Care Coordination Technical Committee</a>.  Package ihe.pcc.qedm#3.0.0-comment1 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Mon, Aug 5, 2024 09:49-0500">2024-08-05</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                  | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/PCC.QEDm/issues/new/choose">New Issue</a> | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/IHE/PCC.QEDm/issues">Issues</a>
                
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://profiles.ihe.net/PCC/QEDm/history.html">Version History</a></a> |
                 <a style="color: var(--footer-hyperlink-text-color)" rel="license" href="https://profiles.ihe.net/GeneralIntro/ch-9.html"><img style="border-style: none;" alt="CC0" src="assets/images/cc-by.png" height="17"/></a> |
                <!-- <a style="color: var(--footer-hyperlink-text-color)" href="searchform.html">Search</a> | -->
                 <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://www.ihe.net/resources/public_comment/">Propose a change<img alt="external" style="vertical-align: baseline" src="external.png"/></a>
                 <script type="text/javascript" src=".assets/js/google-analytics.js"> </script>
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

